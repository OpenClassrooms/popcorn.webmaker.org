/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the MIT license
 * If a copy of the MIT license was not distributed with this file, you can
 * obtain one at https://raw.github.com/mozilla/butter/master/LICENSE */

// Copyright (c) 2010 Tim Down

// (c) Steven Levithan <stevenlevithan.com>

/*
 RequireJS text 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/text for details
*/

/*
PluginDetect v0.8.0
www.pinlady.net/PluginDetect/license/
[ getVersion isMinVersion onWindowLoaded ]
[ Flash ]
*/

// UA-Parser.JS v0.5.15
// Lightweight JavaScript-based User-Agent string parser
// https://github.com/faisalman/ua-parser-js
//
// Copyright © 2012-2013 Faisalman
// Dual licensed under GPLv2 & MIT

/*********************************************************************************
   * parseUri 1.2.2
   * http://blog.stevenlevithan.com/archives/parseuri
   * (c) Steven Levithan <stevenlevithan.com>
   * MIT License
   */

//Copyright 2012, etc.

/**
 * almond 0.1.2 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! This Source Code Form is subject to the terms of the MIT license
 *  If a copy of the MIT license was not distributed with this file, you can
 *  obtain one at https://raw.github.com/mozilla/butter/master/LICENSE */

(function(){var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("../../node_modules/requirejs-middleware/almond",function(){}),define("util/shims",[],function(){window.console||(window.console={log:function(){},warn:function(){},debug:function(){},info:function(){},error:function(){}});if("Range"in window&&!Range.prototype.createContextualFragment){var e={getDocument:function(t){if(t.nodeType===9)return t;if(typeof t.ownerDocument!="undefined")return t.ownerDocument;if(typeof t.document!="undefined")return t.document;if(t.parentNode)return this.getDocument(t.parentNode);throw"No document found for node."},isCharacterDataNode:function(e){var t=e.nodeType;return t===3||t===4||t===8},parentElement:function(e){var t=e.parentNode;return t.nodeType===1?t:null},isHtmlNamespace:function(e){var t;return typeof e.namespaceURI=="undefined"||(t=e.namespaceURI)===null||t==="http://www.w3.org/1999/xhtml"},fragmentFromNodeChildren:function(e){var t=this.getDocument(e).createDocumentFragment(),n;while(!!(n=e.firstChild))t.appendChild(n);return t}};Range.prototype.createContextualFragment=function(t){var n=this.startContainer,r=e.getDocument(n);if(!n)throw new DOMException("INVALID_STATE_ERR");var i=null;return n.nodeType===1?i=n:e.isCharacterDataNode(n)&&(i=e.parentElement(n)),i===null||i.nodeName==="HTML"&&e.isHtmlNamespace(e.getDocument(i).documentElement)&&e.isHtmlNamespace(i)?i=r.createElement("body"):i=i.cloneNode(!1),i.innerHTML=t,e.fragmentFromNodeChildren(i)}}typeof document!="undefined"&&!("classList"in document.createElement("a"))&&function(e){var t="classList",n="prototype",r=(e.HTMLElement||e.Element)[n],i=Object,s=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(t in this&&this[t]===e)return t;return-1},u=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(t==="")throw new u("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new u("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},f=function(e){var t=s.call(e.className),n=t?t.split(/\s+/):[],r=0,i=n.length;for(;r<i;r++)this.push(n[r]);this._updateClassName=function(){e.className=this.toString()}},l=f[n]=[],c=function(){return new f(this)};u[n]=Error[n],l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",a(this,e)!==-1},l.add=function(e){e+="",a(this,e)===-1&&(this.push(e),this._updateClassName())},l.remove=function(e){e+="";var t=a(this,e);t!==-1&&(this.splice(t,1),this._updateClassName())},l.toggle=function(e){e+="",a(this,e)===-1?this.add(e):this.remove(e)},l.toString=function(){return this.join(" ")};if(i.defineProperty){var h={get:c,enumerable:!0,configurable:!0};try{i.defineProperty(r,t,h)}catch(p){p.number===-2146823252&&(h.enumerable=!1,i.defineProperty(r,t,h))}}else i[n].__defineGetter__&&r.__defineGetter__(t,c)}(self);return}),define("util/uri",[],function(){function e(t){var n=e.options,r=n.parser[n.strictMode?"strict":"loose"].exec(t),i={},s=14;while(s--)i[n.key[s]]=r[s]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}function r(e){var t="";return t+=e.protocol?e.protocol+"://":"",t+=e.authority||"",t+=e.path||"",t+=e.query?"?"+e.query:"",t+=e.anchor?"#"+e.anchor:"",t}function i(e){var t=e.queryKey,n="",r=0,i,s;for(i in t)t.hasOwnProperty(i)&&(s=t[i],n+=r>0?"&":"",n+=i,n+=!s&&s!==0?"":"="+s,r++);return e.query=n,e}e.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var t="butteruid",n=Date.now(),s={set seed(e){n=e|0},get seed(){return n},parse:function(t){var n=e(t);return n.toString=function(){return r(this)},n},makeUnique:function(e){typeof e=="string"&&(e=this.parse(e));var r=e.queryKey;return r[t]=n++,i(e)},stripUnique:function(e){typeof e=="string"&&(e=this.parse(e));var n=e.queryKey;return n&&delete n[t],i(e)}};return s}),define("util/lang",[],function(){var e=15,t=function(){var e=document.createElement("div"),t="Webkit Moz O ms".split(" ").map(function(e){return e+"Transform"});for(var n=t.length;n>=0;--n)if(e.style[t[n]]!==undefined)return t[n];return"transform"}(),n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return{escapeHTML:function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return n[e]||e})},extend:function(e){var t=e,n=[].slice.call(arguments,1);n.forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})},smpteToSeconds:function(e){var t=e.split(":");if(t.length===1)return parseFloat(t[0],10);if(t.length===2)return parseFloat(t[0],10)+parseFloat(t[1]/12,10);if(t.length===3)return parseInt(t[0]*60,10)+parseFloat(t[1],10)+parseFloat(t[2]/12,10);if(t.length===4)return parseInt(t[0]*3600,10)+parseInt(t[1]*60,10)+parseFloat(t[2],10)+parseFloat(t[3]/12,10)},secondsToSMPTE:function(e){var t=new Date(1970,0,1),n;return t.setSeconds(e),n=t.toTimeString().substr(0,8),n>86399&&(n=Math.floor((t-Date.parse("1/1/70"))/36e5)+n.substr(2)),n},clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},defaults:function(e,t){for(var n in t)e[n]===undefined&&(e[n]=t[n]);return e},domFragment:function(e,t){var n=document.createRange(),r=document.body||document.head,i,s;n.selectNode(r),i=n.createContextualFragment(e);if(t){s=i.querySelector(t);if(s)return s.parentNode.removeChild(s),s}return i},applyTransitionEndListener:function(){var t=document.createElement("div"),n,r=["OTransition","webkitTransition","MozTransition","transition"];for(n in r)if(t.style[r[n]]!==undefined)return function(e,t){e.addEventListener("transitionend",t,!1),e.addEventListener("oTransitionEnd",t,!1),e.addEventListener("webkitTransitionEnd",t,!1)};return function(t,n){var r=t.getAttribute("data-butter-transition-end");typeof r=="string"&&r!==""&&clearTimeout(r|0),r=setTimeout(function(){t.removeAttribute("data-butter-transition-end"),n.apply(this,arguments)},e),t.setAttribute("data-butter-transition-end",r)}}(),removeTransitionEndListener:function(e,t){e.removeEventListener("transitionend",t,!1),e.removeEventListener("oTransitionEnd",t,!1),e.removeEventListener("webkitTransitionEnd",t,!1)},setTransformProperty:function(e,n){e.style[t]=n},getTransformProperty:function(e){return e.style[t]}}}),define("util/time",[],function(){function t(t,n){return n=n>=0?n:e,Math.round(t*Math.pow(10,n))/Math.pow(10,n)}function n(e){var t,n,r,i,s=1;return typeof e=="number"?e:typeof e!="string"?0:(e=e.trim(),e.substring(0,1)==="-"&&(e=e.replace("-",""),s=-1),t=e.split(":"),n=+t[t.length-1]||0,r=+t[t.length-2]||0,i=+t[t.length-3]||0,n+=i*3600,n+=r*60,n*s)}function r(e,r){var i,s,o,u,a="";return!r&&r!==0&&(r=2),typeof e=="string"&&(e=n(e)),typeof e!="number"?0:(e<0&&(a="-",e=-e),e=t(e,r),i=Math.floor(e/3600),s=Math.floor(e%3600/60),o=t(e%60,r),u=o+"",!s&&!i?(o<10&&(u="0"+u),a+"0:"+u):(o?o<10?u=":0"+o:u=":"+u:u=":00",s?i&&s<10?u="0"+s+u:u=s+u:u="00"+u,i&&(u=i+":"+u),a+u))}function i(e){var t=Math.round,n,r,i,s,o;return n=e/1e3,r=t(n%60),n/=60,i=t(n%60),n/=60,s=t(n%24),n/=24,o=t(n),o>=1?""+o+(o===1?" day":" days"):s>=1?""+s+(s===1?" hour":" hours"):i>=1?""+i+(i===1?" minute":" minutes"):"less than a minute"}var e=5,s={roundTime:t,toSeconds:n,toTimecode:r,toPrettyString:i};return Object.defineProperties(s,{timeAccuracy:{enumerable:!0,get:function(){return e},set:function(t){e=t}}}),s}),define("util/sanitizer",[],function(){var e=document.implementation.createHTMLDocument(""),t=e.createElement("div"),n={reconstituteHTML:function(n){var r=!1;while(!r){r=!0,t.innerHTML=n;var i=t.childNodes,s;for(s=i.length-1;s>=0;s--)i[s].nodeType!==3&&(t.removeChild(i[s]),r=!1);n!==t.textContent&&(n=t.textContent,r=!1)}return n}};return n}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o="undefined"!=typeof location&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||void 0),l=[],c=e.config&&e.config()||{};return t={version:"2.0.5",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),-1!==s&&(i="strip"===r.substring(s+1),r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],!(s&&s!==n||o&&o.toLowerCase()!==r.toLowerCase()||(u||o)&&u!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText)return r(),void 0;c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+(s.ext?"."+s.ext:""),p=n.toUrl(l),d=c.useXhr||t.useXhr;!o||d(p,u,a,f)?t.get(p,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r){if(l.hasOwnProperty(n)){var i=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(){var n=function(e){return i(f,e)};n.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,n,s)},s)}},"node"===c.env||!c.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");0===r.indexOf("﻿")&&(r=r.substring(1)),t(r)}):"xhr"===c.env||!c.env&&t.createXhr()?t.get=function(e,n,r,i){var s,o=t.createXhr();if(o.open("GET",e,!0),i)for(s in i)i.hasOwnProperty(s)&&o.setRequestHeader(s.toLowerCase(),i[s]);c.onXhr&&c.onXhr(o,e),o.onreadystatechange=function(){var t,i;4===o.readyState&&(t=o.status,t>399&&600>t?(i=Error(e+" HTTP status: "+t),i.xhr=o,r(i)):n(o.responseText))},o.send(null)}:("rhino"===c.env||!c.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{for(n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),n.append(r);null!==(r=u.readLine());)n.append(o),n.append(r);a=""+n+""}finally{u.close()}t(a)}),t}),define("text!layouts/controls.html",[],function(){return'<div id="butter-controls">\n  <div class="controls-left">\n    <span id="controls-play" class="controls-btn controls-paused"></span>\n  </div>\n  <div class="time">\n    <span id="controls-currenttime">0:00</span>\n    <span class="divider">/</span>\n    <span id="controls-duration">0:00</span>\n  </div>\n  <div class="controls-middle">\n    <div id="controls-time-tooltip" class="butter-tooltip tooltip-no-hover" data-tooltip></div>\n    <div id="controls-bar">\n      <div id="controls-tocbar"></div>\n      <div id="controls-timebar">\n        <div id="controls-progressbar"></div>\n      </div>\n    </div>\n  </div>\n  <div id="controls-nav-container">\n    <div id="controls-prev" class="controls-btn"></div>\n    <div id="controls-next" class="controls-btn"></div>\n  </div>\n  <div id="controls-volume-container">\n    <span id="controls-mute" class="controls-btn icon icon-volume-up"></span>\n    <div id="controls-volume">\n      <div id="controls-volume-progressbar"></div>\n    </div>\n  </div>\n  <div class="controls-right">\n    <div id="controls-share" title="Share"></div>\n    <!--div id="controls-remix" title="Remix"></div-->\n    <div id="controls-fullscreen" title="Fullscreen"></div>\n  </div>\n</div>\n'}),define("ui/widget/controls",["util/lang","util/time","util/sanitizer","text!layouts/controls.html"],function(e,t,n,r){function i(i,s){function Tt(){function e(e){l=e}A&&(A.removeEventListener("click",Tt,!1),A.classList.remove("preload")),S.removeEventListener("click",Tt,!1),H.classList.remove("controls-hide"),q&&q.classList.add("show"),xt(e),l.controls(!1),l.media.addEventListener("play",Z,!1),l.readyState()>=1?Nt():l.media.addEventListener("loadedmetadata",Nt,!1)}var o=0,u=32,a=e.domFragment(r).querySelector("#butter-controls"),f=typeof i=="string"?document.getElementById(i):i,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt;s=s||{};var yt=function(){},bt=s.onShareClick||yt,wt=s.onRemixClick||yt,Et=s.onFullscreenClick||yt,St=s.onLogoClick||yt,xt=s.init||yt;S=document.getElementById("controls-big-play-button"),S.classList.remove("hide-button"),H=document.querySelector(".controls"),A=document.querySelector("#thumbnail-container"),q=document.querySelector("#attribution-info"),O=document.getElementById("container"),Z=function(){l.media.removeEventListener("play",Z,!1),S.removeEventListener("click",Z,!1),S.classList.add("hide-button"),l.media.addEventListener("mouseover",et,!1),A&&A.classList.add("hidden"),l.paused()&&(l.play(),h.classList.remove("controls-paused"),h.classList.add("controls-playing"))};var Nt=function(){function xt(e,t,n){for(var r=0;r<W.length;r++){var i=W[r];i.start>=t&&i.start<=n&&i.end>=t&&i.end<=n&&i.tocBars.push(e)}}l.media.removeEventListener("loadedmetadata",Nt,!1),c=document.getElementById("controls-mute"),h=document.getElementById("controls-play"),p=document.getElementById("controls-prev"),d=document.getElementById("controls-next"),v=document.getElementById("controls-currenttime"),g=document.getElementById("controls-duration"),L=document.getElementById("controls-bar"),y=document.getElementById("controls-tocbar"),b=document.getElementById("controls-timebar"),w=document.getElementById("controls-time-tooltip"),E=document.getElementById("controls-progressbar"),x=document.getElementById("controls-scrubber"),M=document.getElementById("controls-volume"),m=document.getElementById("controls-fullscreen"),_=document.getElementById("controls-volume-progressbar"),D=document.getElementById("controls-volume-scrubber"),B=document.getElementById("controls-share"),j=document.getElementById("controls-remix"),F=document.getElementById("controls-fullscreen"),I=document.getElementById("controls-logo"),T=!1,N=!1,C=!1,k=l.duration(),J=document.createElement("span"),J.classList.add("tooltip-time"),K=document.createElement("div"),K.classList.add("tooltip-titles"),w.appendChild(J),w.appendChild(K),R=l.data.running.toc?l.data.running.toc[0].jsonml:null,U=R?JsonML.toHTML(R):document.createElement("ol"),W=l.data.running.toc?l.data.running.toc[0].tocTooltips:null,B.addEventListener("click",bt,!1),F.addEventListener("click",Et,!1);var e=U.querySelectorAll("a");h1Count=0,h2Count=0,h3Count=0;var r=0;$(U).find("li:not(:has(ul))").each(function(){var e=$(this).parents("ul").length;e>r&&(r=e)}),r==3&&(Q=document.createElement("span"),Q.classList.add("tooltip-title-top"),K.appendChild(Q),w.classList.add("controls-time-tooltip-large")),r>=2&&(G=document.createElement("span"),G.classList.add("tooltip-title-middle"),K.appendChild(G),w.classList.add("controls-time-tooltip-medium")),r>=1&&(Y=document.createElement("span"),Y.classList.add("tooltip-title-bottom"),K.appendChild(Y),w.classList.add("controls-time-tooltip-small"));for(var i=0;i<e.length;i++){var A=e[i],H=document.createElement("div");A.innerHTML=n.reconstituteHTML(A.innerHTML);var q=A.getAttribute("data-view-end-time"),z=A.getAttribute("data-start"),yt=A.getAttribute("data-level"),wt=z/k*100+"%",St=(q-z)/k*100+"%";H.style.position="absolute",H.style.left=wt,H.style.width=St,H.setAttribute("data-start",z),yt==1?(++h1Count,r==3?H.classList.add("controls-tocbar-item-top"):r==2?H.classList.add("controls-tocbar-item-middle"):r==1&&(h1Count%2===0?H.classList.add("even"):H.classList.add("odd"),H.classList.add("controls-tocbar-item-bottom"))):yt==2?(++h2Count,r==3?H.classList.add("controls-tocbar-item-middle"):(h2Count%2===0?H.classList.add("even"):H.classList.add("odd"),H.classList.add("controls-tocbar-item-bottom"))):yt==3&&(++h3Count,h3Count%2===0?H.classList.add("even"):H.classList.add("odd"),H.classList.add("controls-tocbar-item-bottom")),H.addEventListener("click",function(e){var t=e.target.getAttribute("data-start");l.paused()?l.pause(t):l.play(t)},!1),y.appendChild(H),xt(H,parseFloat(z),parseFloat(q))}toggleTocBars=function(e,t,n){jQuery.each(e,function(){n?this.classList.add(t):this.classList.remove(t)})},toggleCurrentTocBars=function(e){if(!X)return;toggleTocBars(X.tocBars,"current-tocbar-item",e)},togglePlayingTocBars=function(e){if(!V)return;toggleTocBars(V.tocBars,"playing-tocbar-item",e)},setPlayingTocBar=function(){togglePlayingTocBars(!1);var e=l.currentTime();if(W){for(var t=0;t<W.length;t++){var n=W[t];e>=n.start&&e<=n.end&&V!=n&&(V=n)}togglePlayingTocBars(!0)}};if(W)for(var i=0;i<W.length;i++){var Tt=W[i];l.cue(Tt.start,setPlayingTocBar)}l.paused()||(S&&Z(),h.classList.remove("controls-paused"),h.classList.add("controls-playing")),s.preload||Z(),a.classList.add("controls-ready"),et=function(){C=!0,a.classList.add("controls-active")},tt=function(){C=!1,T||a.classList.remove("controls-active")},l.media.addEventListener("mouseout",tt,!1),a.addEventListener("mouseover",et,!1),a.addEventListener("mouseout",tt,!1),it=function(e){var t=document.querySelector(".embed").getAttribute("data-state-waiting");if(e.button!==o&&e.which!==u)return;l.paused()?t?(ht(),l.on("sequencesReady",rt)):l.play():l.pause()},prevClick=function(e){goToStep(!0)},nextClick=function(e){goToStep(!1)},goToStep=function(e){var t=l.currentTime(),n;if(W)for(var r=0;r<W.length;r++){var i=W[r];if(t>=i.start&&t<i.end){e?r>0?n=W[r-1]:r==0&&(n=W[0]):r<W.length-1?n=W[r+1]:r==W.length-1&&(n=W[W.length-1]);break}}W&&(l.paused()?l.pause(n.start):l.play(n.start))},rt=function(){l.off("sequencesReady",rt),l.play()},ct=function(){h.classList.remove("controls-playing"),h.classList.add("controls-paused")},ht=function(){l.off("sequencesReady",l.play),h.classList.remove("controls-paused"),h.classList.add("controls-playing")},l.media.addEventListener("click",it,!1),window.addEventListener("keypress",it,!1),h&&(h.addEventListener("click",it,!1),l.on("play",ht),l.on("pause",ct)),p&&p.addEventListener("click",prevClick,!1),d&&d.addEventListener("click",nextClick,!1),c&&(c.addEventListener("click",function(e){if(e.button!==0)return;l[l.muted()?"unmute":"mute"]()},!1),gt=function(){l.muted()?(c.classList.remove("icon-volume-up"),c.classList.add("icon-volume-off")):(c.classList.add("icon-volume-up"),c.classList.remove("icon-volume-off"))},l.on("volumechange",gt),gt()),M&&(pt=function(e){e.preventDefault(),P=e.clientX-M.getBoundingClientRect().left,P<=0?(l.mute(),P=0):P>M.offsetWidth?P=M.offsetWidth:l.muted()&&l.unmute(),_&&(_.style.width=P/M.offsetWidth*100+"%"),D&&(D.style.left=(P-D.offsetWidth/2)/M.offsetWidth*100+"%"),l.volume(P/M.offsetWidth)},dt=function(e){if(e.button!==0)return;e.preventDefault(),window.removeEventListener("mouseup",dt,!1),window.removeEventListener("mousemove",pt,!1)},vt=function(e){if(e.button!==0)return;P=e.clientX-M.getBoundingClientRect().left,e.preventDefault(),window.addEventListener("mouseup",dt,!1),window.addEventListener("mousemove",pt,!1),P===0?l.mute():l.muted()&&l.unmute(),_&&(_.style.width=P/M.offsetWidth*100+"%"),D&&(D.style.left=(P-D.offsetWidth/2)/M.offsetWidth*100+"%"),l.volume(P/M.offsetWidth)},M.addEventListener("mousedown",vt,!1),nt=function(){var e;l.muted()?e=0:e=l.volume(),e===0&&c&&(c.classList.remove("controls-unmuted"),c.classList.add("controls-muted")),_&&(_.style.width=e*100+"%"),D&&(D.style.left=(e-D.offsetWidth/2)*100+"%")},l.on("volumechange",nt),nt()),g&&(mt=function(){g.innerHTML=t.toTimecode(l.duration(),0)},mt()),b&&(setTimeTooltip=function(){var e=Math.floor(P/b.offsetWidth*k);J.innerHTML=t.toTimecode(e,0);if(W)for(var n=0;n<W.length;n++){var i=W[n];if(e>=i.start&&e<=i.end){X!=i&&(toggleCurrentTocBars(!1),X=i,r==3?(i.titles.length>=1&&(Q.innerHTML=i.titles[0]),i.titles.length>=2&&(G.innerHTML=i.titles[1]),i.titles.length==3&&(Y.innerHTML=i.titles[2])):r==2?(i.titles.length>=1&&(G.innerHTML=i.titles[0]),i.titles.length>=2&&(bottom.innerHTML=i.titles[1])):r==1&&i.titles.length>=1&&(Y.innerHTML=i.titles[0])),toggleCurrentTocBars(!0);break}}},controlsMouseMove=function(e){e.preventDefault(),P=e.clientX-b.getBoundingClientRect().left,P<0?P=0:P>b.offsetWidth&&(P=b.offsetWidth),E&&(E.style.width=P/b.offsetWidth*100+"%"),x&&(x.style.left=(P-x.offsetWidth/2)/b.offsetWidth*100+"%"),lt(e),e.currentTarget.id!="controls-bar"&&l.currentTime(P/b.offsetWidth*100*l.duration()/100),setTimeTooltip()},controlsMouseUp=function(e){if(e.button!==0)return;e.preventDefault(),T=!1,C||tt(),N&&l.play(),b!==document.elementFromPoint(e.clientX,e.clientY)&&w.classList.remove("tooltip-no-transition-on"),O.classList.remove("no-events"),b.addEventListener("mouseover",at,!1),b.addEventListener("mousemove",lt,!1),b.addEventListener("mousedown",ot,!1),window.removeEventListener("mouseup",controlsMouseUp,!1),window.removeEventListener("mousemove",controlsMouseMove,!1),l.emit("updateToc"),setPlayingTocBar()},controlsMouseDown=function(e){if(e.button!==0)return;P=e.clientX-b.getBoundingClientRect().left,e.preventDefault(),T=!0,N=!l.paused(),l.pause(),window.addEventListener("mouseup",controlsMouseUp,!1),window.addEventListener("mousemove",controlsMouseMove,!1),l.emit("updateToc"),setPlayingTocBar()},ot=function(e){if(e.button!==0)return;P=e.clientX-b.getBoundingClientRect().left,e.preventDefault(),T=!0,N=!l.paused(),l.pause(),O.classList.add("no-events"),b.removeEventListener("mouseout",ft,!1),b.removeEventListener("mousemove",lt,!1),b.removeEventListener("mousedown",ot,!1),window.addEventListener("mousemove",st,!1),window.addEventListener("mouseup",ut,!1),E&&(E.style.width=P/b.offsetWidth*100+"%"),x&&(x.style.left=(P-x.offsetWidth/2)/b.offsetWidth*100+"%"),l.currentTime(P/b.offsetWidth*100*l.duration()/100),it(e),l.emit("updateToc"),setPlayingTocBar()},st=function(e){P=e.clientX-b.getBoundingClientRect().left,P<0?P=0:P>f.offsetWidth&&(P=f.offsetWidth),w.style.left=P+"px",setTimeTooltip()},controlsMouseOver=function(e){st(e),w.classList.add("tooltip-no-transition-on"),L.addEventListener("mousemove",st,!1),L.removeEventListener("mouseover",controlsMouseOver,!1),L.addEventListener("mouseout",controlsMouseOut,!1)},controlsMouseOut=function(e){w.classList.remove("tooltip-no-transition-on"),L.removeEventListener("mousemove",st,!1),L.removeEventListener("mouseout",controlsMouseOut,!1),L.addEventListener("mouseover",controlsMouseOver,!1),toggleCurrentTocBars(!1)},L.addEventListener("mouseover",controlsMouseOver,!1),L.addEventListener("mousedown",controlsMouseDown,!1),b.addEventListener("mousedown",ot,!1),l.on("timeupdate",function(){var e=l.currentTime(),n=e/l.duration()*100*b.offsetWidth/100;E&&(E.style.width=n/b.offsetWidth*100+"%"),x&&(x.style.left=(n-x.offsetWidth/2)/b.offsetWidth*100+"%"),v&&(v.innerHTML=t.toTimecode(e,0))}))};f.appendChild(a),s.preload?(Tt(),S.addEventListener("click",Z,!1)):(A&&A.addEventListener("click",Tt,!1),S.addEventListener("click",Tt,!1));if(!f)return;return f}return{create:i}}),define("ui/widget/textbox",[],function(){function e(t){var n=t.target;n.select(),n.removeEventListener("focus",e,!1)}function t(e){e.preventDefault();var n=e.target;n.removeEventListener("mouseup",t,!1)}function n(n){n.addEventListener("focus",e,!1),n.addEventListener("mouseup",t,!1)}return{applyTo:function(e,t){if(!e||e.type!=="text"&&e.type!=="textarea"&&e.type!=="url")throw"Textbox: Expected an input element of type text";return t=t||{},e.readOnly=!!t.readOnly,e.addEventListener("blur",function(e){n(e.target)},!1),n(e),e}}}),define("ui/resizeHandler",[],function(){return function(e){e=e||{};var t=document.querySelector(".video-container"),n=document.querySelector(".wrapper"),r,i=e.margin||0,s=e.border||0,o=i*2,u=s*2,a=14,f=560;n||(n=t),r=n.parentNode,this.resize=function(){n.style.width=r.clientWidth-u-o+"px",n.style.margin=i+"px "+i+"px",r.clientHeight<n.offsetHeight+o&&(n.style.margin=i+"px auto",n.style.width=16/9*(r.clientHeight-u-o)+"px"),t.style.fontSize=a*(t.offsetWidth/f)+"px"}}}),define("util/mediatypes",["util/uri"],function(e){function f(e,t,n){function u(){r.removeEventListener("loadedmetadata",a,!1),r.removeEventListener("error",u,!1),n(o),document.body.removeChild(i)}function a(){r.removeEventListener("loadedmetadata",a,!1),r.removeEventListener("error",u,!1),document.body.removeChild(i),t({source:e.source,title:e.title||e.source,type:e.type,thumbnail:e.thumbnail||"",linkback:e.linkback,duration:r.duration})}var r,i=document.createElement("div"),s=document.createElement("div");i.style.height="400px",i.style.width="400px",i.style.left="-400px",i.style.position="absolute",s.style.height="100%",s.style.width="100%",document.body.appendChild(i),i.appendChild(s),s.id=Popcorn.guid("popcorn-jwplayer-"),r=Popcorn.HTMLJWPlayerVideoElement(s),r.addEventListener("error",u,!1),r.addEventListener("loadedmetadata",a,!1),r.src=e.source}var t={YouTube:/^(?:https?:\/\/www\.|https?:\/\/|www\.|\.|^)youtu/,Vimeo:/^https?:\/\/(www\.)?vimeo.com\/(\d+)/,SoundCloud:/^(?:https?:\/\/www\.|https?:\/\/|www\.|\.|^)(soundcloud)/,Archive:/^(?:https?:\/\/www\.|https?:\/\/|www\.|\.|^)archive\.org\/(details|download|stream)\/((.*)start(\/|=)[\d\.]+(.*)end(\/|=)[\d\.]+)?/,"null":/^\s*#t=(?:\d*(?:(?:\.|\:)?\d+)?),?(\d+(?:(?:\.|\:)\d+)?)\s*$/,Flickr:/^https?:\/\/(www\.)flickr.com/},n="Embedding of this YouTube video is disabled",r="This YouTube video is unplayable",i="Private Video",s="Embedding of this Archive item is not available yet",o="This media source is unplayable",u="Embedding of this SoundCloud audio source is disabled",a="";return{checkUrl:function(e){for(var n in t)if(t.hasOwnProperty(n)&&t[n].test(e))return n;return"HTML5"},getMetaData:function(o,l,c,h){o=decodeURI(o);var p,d,v,m,g,y=this.checkUrl(o),b;l=l||function(){},c=c||function(){},h=h||function(){};if(y==="YouTube"){v=e.parse(o),p=v.queryKey.v||v.directory.replace("/","");if(!p)return;g="https://gdata.youtube.com/feeds/api/videos/"+p+"?v=2&alt=jsonc&callback=?",Popcorn.getJSONP(g,function(e){function f(){o.off("loadedmetadata",d),o.off("error",f),c(r),o.destroy()}function d(){o.off("loadedmetadata",d),o.off("error",f),document.body.removeChild(u),o.destroy(),l({source:a,title:t.title,type:y,thumbnail:t.thumbnail.hqDefault,author:t.uploader,duration:o.duration(),from:s,next:h})}var t=e.data,s=v.queryKey.t,o,u=document.createElement("div"),a;u.style.height="400px",u.style.width="400px",u.style.left="-400px",u.style.position="absolute",document.body.appendChild(u);if(e.error){if(e.error.code===403)return c(i);c(r)}if(!t)return;if(t.accessControl.embed==="denied"){c(n);return}s&&(s=s.replace(/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?/,function(e,t,n,r){return t|=0,n|=0,r|=0,+r+(t*60+n)*60})),a="http://www.youtube.com/watch?v="+p,o=Popcorn.smart(u,a),o.on("error",f),o.media.readyState>=1?d():o.on("loadedmetadata",d)})}else if(y==="SoundCloud")v=e.parse(o),m=v.directory.split("/"),p=m[m.length-1],d=m[m.length-2],g="https://api.soundcloud.com/tracks/"+p+".json?callback=?&client_id=PRaNFlda6Bhf5utPjUsptg&user_id="+d,Popcorn.getJSONP(g,function(e){if(!e)return;if(e.sharing==="private"||e.embeddable_by==="none"){c(u);return}l({source:o,type:y,thumbnail:e.artwork_url||"../../resources/icons/soundcloud-small.png",duration:e.duration/1e3,title:e.title,hidden:!0,next:h})});else if(y==="Vimeo")v=e.parse(o),m=v.directory.split("/"),p=m[m.length-1],g="https://vimeo.com/api/v2/video/"+p+".json?callback=?",Popcorn.getJSONP(g,function(e){e=e&&e[0];if(!e)return;l({source:o,type:y,thumbnail:e.thumbnail_small,duration:e.duration,title:e.title,next:h})});else if(y==="Archive"){if(o.indexOf("details")===-1&&o.indexOf("stream")===-1)return c(s);g="https://archive.org/services/maker.php?callback=caller&url="+encodeURIComponent(o),Popcorn.getJSONP(g,function(t){if(!t||t.error||!t.title||!t.duration)return c(s);b=document.createElement("video"),b.addEventListener("error",function(){var e={source:t.media,type:y,title:t.title,thumbnail:t.thumb,linkback:t.linkback};f(e,l,c)},!1),b.addEventListener("loadedmetadata",function(){l({source:t.media,type:y,title:t.title,thumbnail:t.thumb,linkback:t.linkback,duration:b.duration,next:h})},!1),b.src=e.makeUnique(t.media).toString()})}else if(y==="null")l({source:o,type:y,title:o,duration:+t["null"].exec(o)[1],next:h});else{var w=o.substring(o.lastIndexOf("/")+1),E,S,x;o=encodeURI(o),S={source:o,type:y,title:w},x={source:o,type:y,title:w,thumbnail:e.makeUnique(o).toString()},Popcorn.getJSONP(a+"mime/"+o,function(t){var n=t.contentType;x.contentType=S.contentType=n;if(n.indexOf("video")===0)E=document.createElement("video");else if(n.indexOf("audio")===0||n.indexOf("application/ogg")===0)E=document.createElement("audio"),x.hidden=S.hidden=!0;else if(n.indexOf("image")===0){l({source:o,type:"image",thumbnail:o,title:o,contentType:n,duration:5});return}E.addEventListener("loadedmetadata",function(){x.duration=E.duration,l(x)},!1),E.addEventListener("error",function(){f(S,l,c)},!1),E.src=e.makeUnique(o).toString()})}}}}),define("text!layouts/attribution.html",[],function(){return'<div class="attribution-media">\n  <span class="container-label">Media</span>\n</div>\n\n<div class="data-container media">\n  <span class="media-icon"></span>\n  <a target="_blank" class="attribution-media-src"></a>\n  <br>\n</div>\n\n<div class="attribution-images">\n  <span class="container-label">Images</span>\n</div>\n\n<div class="data-container image">\n  <a target="_blank" class="attribution-media-src"></a>\n  <br>\n</div>\n\n<div class="attribution-extra">\n  <span class="container-label">Maps</span>\n  <div class="data-container map"></div>\n</div>\n'}),function(global){var PluginDetect={version:"0.8.0",name:"PluginDetect",openTag:"<",isDefined:function(e){return typeof e!="undefined"},isArray:function(e){return/array/i.test(Object.prototype.toString.call(e))},isFunc:function(e){return typeof e=="function"},isString:function(e){return typeof e=="string"},isNum:function(e){return typeof e=="number"},isStrNum:function(e){return typeof e=="string"&&/\d/.test(e)},getNumRegx:/[\d][\d\.\_,-]*/,splitNumRegx:/[\.\_,-]/g,getNum:function(e,t){var n=this,r=n.isStrNum(e)?(n.isDefined(t)?new RegExp(t):n.getNumRegx).exec(e):null;return r?r[0]:null},compareNums:function(e,t,n){var r=this,i,s,o,u=parseInt;if(r.isStrNum(e)&&r.isStrNum(t)){if(r.isDefined(n)&&n.compareNums)return n.compareNums(e,t);i=e.split(r.splitNumRegx),s=t.split(r.splitNumRegx);for(o=0;o<Math.min(i.length,s.length);o++){if(u(i[o],10)>u(s[o],10))return 1;if(u(i[o],10)<u(s[o],10))return-1}}return 0},formatNum:function(e,t){var n=this,r,i;if(!n.isStrNum(e))return null;n.isNum(t)||(t=4),t--,i=e.replace(/\s/g,"").split(n.splitNumRegx).concat(["0","0","0","0"]);for(r=0;r<4;r++){/^(0+)(.+)$/.test(i[r])&&(i[r]=RegExp.$2);if(r>t||!/\d/.test(i[r]))i[r]="0"}return i.slice(0,4).join(",")},$$hasMimeType:function(e){return function(t){if(!e.isIE&&t){var n,r,i,s=e.isArray(t)?t:e.isString(t)?[t]:[];for(i=0;i<s.length;i++)if(e.isString(s[i])&&/[^\s]/.test(s[i])){n=navigator.mimeTypes[s[i]],r=n?n.enabledPlugin:0;if(r&&(r.name||r.description))return n}}return null}},getPROP:function(e,t,n){var r;try{e&&(n=e[t])}catch(r){}return n},isEnabled:{$:1,IEPluginSecurityPopup:function(){var e=this,t=e.$;return t.isIE&&t.verIE>=7?1:0},objectProperty:function(e){var t=this,n=t.$,r,i=0;return n.isIE&&n.verIE>=7&&(r=n.getPROP(e,"object"),n.isDefined(r)&&(i=r?1:-1)),i}},findNavPlugin:function(e,t,n){var r=this,i=new RegExp(e,"i"),s=!r.isDefined(t)||t?/\d/:0,o=n?new RegExp(n,"i"):0,u=navigator.plugins,a="",f,l,c;for(f=0;f<u.length;f++){c=u[f].description||a,l=u[f].name||a;if(i.test(c)&&(!s||s.test(RegExp.leftContext+RegExp.rightContext))||i.test(l)&&(!s||s.test(RegExp.leftContext+RegExp.rightContext)))if(!o||!o.test(c)&&!o.test(l))return u[f]}return null},getMimeEnabledPlugin:function(e,t,n){var r=this,i,s=new RegExp(t,"i"),o="",u=n?new RegExp(n,"i"):0,a,f,l,c=r.isString(e)?[e]:e;for(l=0;l<c.length;l++)if((i=r.hasMimeType(c[l]))&&(i=i.enabledPlugin)){f=i.description||o,a=i.name||o;if(s.test(f)||s.test(a))if(!u||!u.test(f)&&!u.test(a))return i}return 0},init:function(e){var t=this,n,e,r={status:-3,plugin:0};return t.isString(e)?e.length==1?(t.getVersionDelimiter=e,r):(e=e.toLowerCase().replace(/\s/g,""),n=t.Plugins[e],!n||!n.getVersion?r:(r.plugin=n,t.isDefined(n.installed)||(n.installed=null,n.version=null,n.version0=null,n.getVersionDone=null,n.pluginName=e),t.isIE&&!t.ActiveXEnabled&&e!=="java"?(r.status=-2,r):(r.status=1,r))):r},getPluginFileVersion:function(e,t){var n=this,r,i,s,o,u=-1;if(n.OS>2||!e||!e.version||!(r=n.getNum(e.version)))return t;if(!t)return r;r=n.formatNum(r),t=n.formatNum(t),i=t.split(n.splitNumRegx),s=r.split(n.splitNumRegx);for(o=0;o<i.length;o++){if(u>-1&&o>u&&i[o]!="0")return t;if(s[o]!=i[o]){u==-1&&(u=o);if(i[o]!="0")return t}}return r},AXO:window.ActiveXObject,getAXO:function(e){var t=null,n,r=this;try{t=new r.AXO(e)}catch(n){}return t},convertFuncs:function(e){var t,n,r,i=/^[\$][\$]/,s=this;for(t in e)if(i.test(t))try{n=t.slice(2),n.length>0&&!e[n]&&(e[n]=e[t](e),delete e[t])}catch(r){}},initObj:function(e,t,n){var r,i;if(e){if(e[t[0]]==1||n)for(r=0;r<t.length;r+=2)e[t[r]]=t[r+1];for(r in e)i=e[r],i&&i[t[0]]==1&&this.initObj(i,t)}},initScript:function(){var $=this,nav=navigator,x,doc=document,userAgent=nav.userAgent||"",vendor=nav.vendor||"",platform=nav.platform||"",product=nav.product||"";$.initObj($,["$",$]);for(x in $.Plugins)$.Plugins[x]&&$.initObj($.Plugins[x],["$",$,"$$",$.Plugins[x]],1);$.convertFuncs($),$.OS=100;if(platform){var data_plat=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(x=data_plat.length-2;x>=0;x-=2)if(data_plat[x]&&(new RegExp(data_plat[x],"i")).test(platform)){$.OS=data_plat[x+1];break}}$.head=doc.getElementsByTagName("head")[0]||doc.getElementsByTagName("body")[0]||doc.body||null,$.isIE=eval("/*@cc_on!@*/!1"),$.verIE=$.isIE?/MSIE\s*(\d+\.?\d*)/i.test(userAgent)?parseFloat(RegExp.$1,10):7:null,$.ActiveXEnabled=!1;if($.isIE){var x,progid=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","ShockwaveFlash.ShockwaveFlash","TDCCtl.TDCCtl","Shell.UIHelper","Scripting.Dictionary","wmplayer.ocx"];for(x=0;x<progid.length;x++)if($.getAXO(progid[x])){$.ActiveXEnabled=!0;break}userAgent=""}$.isGecko=/Gecko/i.test(product)&&/Gecko\s*\/\s*\d/i.test(userAgent),$.verGecko=$.isGecko?$.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(userAgent)?RegExp.$1:"0.9"):null,$.isChrome=/Chrome\s*\/\s*(\d[\d\.]*)/i.test(userAgent),$.verChrome=$.isChrome?$.formatNum(RegExp.$1):null,$.isSafari=(/Apple/i.test(vendor)||!vendor&&!$.isChrome)&&/Safari\s*\/\s*(\d[\d\.]*)/i.test(userAgent),$.verSafari=$.isSafari&&/Version\s*\/\s*(\d[\d\.]*)/i.test(userAgent)?$.formatNum(RegExp.$1):null,$.isOpera=/Opera\s*[\/]?\s*(\d+\.?\d*)/i.test(userAgent),$.verOpera=$.isOpera&&(/Version\s*\/\s*(\d+\.?\d*)/i.test(userAgent)||1)?parseFloat(RegExp.$1,10):null,$.addWinEvent("load",$.handler($.runWLfuncs,$))},handler:function(e,t,n){return function(){e(t,n)}},fPush:function(e,t){var n=this;n.isArray(t)&&(n.isFunc(e)||n.isArray(e)&&e.length>0&&n.isFunc(e[0]))&&t.push(e)},callArray:function(e){var t=this,n,r;if(t.isArray(e)){r=[].concat(e);for(n=0;n<r.length;n++)t.call(r[n]),e.splice(0,1)}},call:function(e){var t=this,n=t.isArray(e)?e.length:-1;n>0&&t.isFunc(e[0])?e[0](t,n>1?e[1]:0,n>2?e[2]:0,n>3?e[3]:0):t.isFunc(e)&&e(t)},$$isMinVersion:function(e){return function(t,n,r,i){var s=e.init(t),o,u=-1;return s.status<0?s.status:(o=s.plugin,n=e.formatNum(e.isNum(n)?n.toString():e.isStrNum(n)?e.getNum(n):"0"),o.getVersionDone!=1&&(o.getVersion(n,r,i),o.getVersionDone===null&&(o.getVersionDone=1)),o.installed!==null&&(u=o.installed<=.5?o.installed:o.installed==.7?1:o.version===null?0:e.compareNums(o.version,n,o)>=0?1:-0.1),u)}},getVersionDelimiter:",",$$getVersion:function(e){return function(t,n,r){var i=e.init(t),s,o;return i.status<0?null:(s=i.plugin,s.getVersionDone!=1&&(s.getVersion(null,n,r),s.getVersionDone===null&&(s.getVersionDone=1)),o=s.version||s.version0,o=o?o.replace(e.splitNumRegx,e.getVersionDelimiter):o,o)}},addWinEvent:function(e,t){var n=this,r=window,i;n.isFunc(t)&&(r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent?r.attachEvent("on"+e,t):(i=r["on"+e],r["on"+e]=n.winHandler(t,i)))},winHandler:function(e,t){return function(){e(),typeof t=="function"&&t()}},WLfuncs0:[],WLfuncs:[],runWLfuncs:function(e){e.winLoaded=!0,e.callArray(e.WLfuncs0),e.callArray(e.WLfuncs),e.DOM&&e.DOM.onDoneEmptyDiv()},winLoaded:!1,$$onWindowLoaded:function(e){return function(t){e.winLoaded?e.call(t):e.fPush(t,e.WLfuncs)}},DOM:{$:1,div:null,divID:"plugindetect",divWidth:50,pluginSize:1,altHTML:"&nbsp;&nbsp;&nbsp;&nbsp;",emptyNode:function(e){var t=this,n=t.$,r,i;if(e&&e.childNodes){for(r=e.childNodes.length-1;r>=0;r--)try{n.isIE&&(e.childNodes[r].style.display="none")}catch(i){}try{e.innerHTML=""}catch(i){}}},LASTfuncs:[],onDoneEmptyDiv:function(){var e=this,t=e.$,n,r,i,s,o;if(!t.winLoaded||t.WLfuncs0.length||t.WLfuncs.length)return;for(n in t.Plugins){r=t.Plugins[n];if(r)if(r.OTF==3||r.funcs&&r.funcs.length)return}t.callArray(e.LASTfuncs);if(e.div&&e.div.childNodes){for(n=e.div.childNodes.length-1;n>=0;n--)i=e.div.childNodes[n],e.emptyNode(i);try{e.div.innerHTML=""}catch(o){}}e.div||(s=document.getElementById(e.divID),s&&(e.div=s));if(e.div&&e.div.parentNode){try{e.div.parentNode.removeChild(e.div)}catch(o){}e.div=null}},width:function(){var e=this,t=e.DOM,n=t.$,r=-1,i=e.span;return i?n.isNum(i.scrollWidth)?i.scrollWidth:n.isNum(i.offsetWidth)?i.offsetWidth:r:r},obj:function(e){var t=this,n=t.DOM,r=t.span,i,s=r&&r.firstChild?r.firstChild:null;try{s&&e&&n.div.focus()}catch(i){}return s},getTagStatus:function(e,t,n,r){if(!e||!t||!n)return-2;var i=this,s=i.$,o,u=e.width(),a=n.width(),f=t.width();if(!n.span||!t.span||!e.obj())return-2;if(u<0||a<0||f<0||f<=i.pluginSize||a<f)return 0;if(u>=f)return-1;try{if(u==i.pluginSize&&(!s.isIE||s.getPROP(e.obj(),"readyState")==4)){if(!e.winLoaded&&s.winLoaded)return 1;if(e.winLoaded&&s.isNum(r)){s.isNum(e.count)||(e.count=r);if(r-e.count>=10)return 1}}}catch(o){}return 0},setStyle:function(e,t){var n=this,r=n.$,i=e.style,s,o;if(i&&t)for(s=0;s<t.length;s+=2)try{i[t[s]]=t[s+1]}catch(o){}},insertDivInBody:function(e,t){var n=this,r=n.$,i,s="pd33993399",o=null,u=t?window.top.document:window.document,a=u.getElementsByTagName("body")[0]||u.body;if(!a)try{u.write('<div id="'+s+'">.'+r.openTag+"/div>"),o=u.getElementById(s)}catch(i){}a=u.getElementsByTagName("body")[0]||u.body,a&&(a.insertBefore(e,a.firstChild),o&&a.removeChild(o))},insert:function(e,t,n,r,i){var s=this,o=s.$,u,a=document,f,l,c=a.createElement("span"),h,p,d=["outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"],v="outline-style:none;border-style:none;padding:0px;margin:0px;visibility:visible;";o.isDefined(r)||(r="");if(o.isString(e)&&/[^\s]/.test(e)){e=e.toLowerCase().replace(/\s/g,""),f=o.openTag+e+' width="'+s.pluginSize+'" height="'+s.pluginSize+'" ',f+='style="'+v+'display:inline;" ';for(h=0;h<t.length;h+=2)/[^\s]/.test(t[h+1])&&(f+=t[h]+'="'+t[h+1]+'" ');f+=">";for(h=0;h<n.length;h+=2)/[^\s]/.test(n[h+1])&&(f+=o.openTag+'param name="'+n[h]+'" value="'+n[h+1]+'" />');f+=r+o.openTag+"/"+e+">"}else e="",f=r;s.div||(p=a.getElementById(s.divID),p?s.div=p:(s.div=a.createElement("div"),s.div.id=s.divID),s.setStyle(s.div,d.concat(["width",s.divWidth+"px","height",s.pluginSize+3+"px","fontSize",s.pluginSize+3+"px","lineHeight",s.pluginSize+3+"px","verticalAlign","baseline","display","block"])),p||(s.setStyle(s.div,["position","absolute","right","0px","top","0px"]),s.insertDivInBody(s.div))),l={span:null,winLoaded:o.winLoaded,tagName:e,outerHTML:f,DOM:s,width:s.width,obj:s.obj};if(s.div&&s.div.parentNode){s.setStyle(c,d.concat(["fontSize",s.pluginSize+3+"px","lineHeight",s.pluginSize+3+"px","verticalAlign","baseline","display","inline"])),s.div.appendChild(c);try{c.innerHTML=f}catch(u){}l.span=c,l.winLoaded=o.winLoaded}return l}},Plugins:{flash:{mimeType:"application/x-shockwave-flash",progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",getVersion:function(){var e=function(e){if(!e)return null;var t=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e);return t?t[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},t=this,n=t.$,r,i,s=null,o=null,u=null,a,f,l;if(!n.isIE){f=n.hasMimeType(t.mimeType);if(f){a=n.DOM.insert("object",["type",t.mimeType],[],"",t).obj();try{s=n.getNum(a.GetVariable("$version"))}catch(r){}}s||(l=f?f.enabledPlugin:null,l&&l.description&&(s=e(l.description)),s&&(s=n.getPluginFileVersion(l,s)))}else{for(i=15;i>2;i--){o=n.getAXO(t.progID+"."+i);if(o){u=i.toString();break}}o||(o=n.getAXO(t.progID));if(u=="6")try{o.AllowScriptAccess="always"}catch(r){return"6,0,21,0"}try{s=e(o.GetVariable("$version"))}catch(r){}!s&&u&&(s=u)}return t.installed=s?1:-1,t.version=n.formatNum(s),!0}},zz:0}};PluginDetect.initScript(),typeof define=="function"&&define.amd?define("util/../../external/PluginDetect/PluginDetect_Flash",[],function(){return PluginDetect}):global.PluginDetect=PluginDetect}(this),define("text!layouts/warn.html",[],function(){return'<div class="butter-warning">\n  <span id="warning-content"></span>\n</div>\n'}),define("util/warn",["util/lang","text!layouts/warn.html"],function(e,t){var n=500;return{showWarning:function(r){var i=e.domFragment(t,".butter-warning");i.querySelector("#warning-content").innerHTML=r,document.body.appendChild(i),setTimeout(function(){i.classList.add("slide-out")},n),i.getElementsByClassName("close-button")[0].onclick=function(){document.body.removeChild(i)}}}}),function(e,t,n){typeof define=="function"&&define.amd&&!t?define("localized",n):e.Localized=n()}(this,this.__LOCALIZED_IGNORE_REQUIREJS,function(){function r(){while(t.length)t.pop()()}function i(t){function n(){if(document.readyState!=="complete"){document.onreadystatechange=n;return}document.onreadystatechange=null,e=t,r()}n()}function s(){var e=document.querySelector("html");return e&&e.lang?e.lang:"en-US"}var e,t=[],n=!1;return{get:function(t){return e?e[t]||"":(console.error("[webmaker-i18n] Error: string catalog not found."),"")},langToMomentJSLang:function(e){var t=["en","ar-ma","ar","bg","br","ca","cs","cv","da","de","el","en-ca","en-gb","eo","es","et","eu","fa","fi","fr-ca","fr","gl","he","hi","hr","hu","id","is","it","ja","ka","ko","lv","ml","mr","ms-my","nb","ne","nl","nn","pl","pt-br","pt","ro","ru","sk","sl","sq","sv","th","tr","tzm-la","tzm","uk","zh-cn","zh-tw"];e=e.toLowerCase();var n=e.substr(0,2);return t.indexOf(e)!==-1?e:t.indexOf(n)!==-1?n:"en"},getCurrentLang:s,ready:function(e,o){var u;typeof e=="function"?(u=e,e={}):u=o||function(){};var a=!!e.noCache,f=e.url||"/strings";f.indexOf("http")!==0&&(f=f.replace(/^\/?/,"/").replace(/\/?$/,"/"),f+=s()),f+=a?"?bust="+Date.now():"";if(!n){n=!0,t.push(u);var l=new XMLHttpRequest;l.open("GET",f,!0),l.onreadystatechange=function(){if(this.readyState!==4)return;if(l.status!==200){console.error("Localized Error: HTTP error "+l.status);return}try{i(JSON.parse(this.responseText))}catch(e){console.error("Localized Error: "+e)}},l.send(null)}this.isReady()&&r()},isReady:function(){return!!e}}}),function(){define("util/accepted-flash",["../../external/PluginDetect/PluginDetect_Flash","util/warn","localized"],function(e,t,n){var r=11;return{warn:function(){var i=e.getVersion("Flash");(!i||+i.split(",")[0]<r)&&t.showWarning(n.get("flashWarning")+" "+n.get("Click to remove warning"))}}})}(),function(e,t){var n="",r="function",i="undefined",s="object",o="major",u="model",a="name",f="type",l="vendor",c="version",h="console",p="mobile",d="tablet",v={regex:function(){var e,o,u,a,f,l,c=arguments;for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];if(typeof e===i){e={};for(a=0;a<p.length;a++)typeof p[a]===s?e[p[a][0]]=t:e[p[a]]=t;if(this.getUA().toString()===n)return e}for(u=0;u<h.length;u++){f=h[u].exec(this.getUA());if(!!f){for(a=0;a<p.length;a++)l=f[a+1],typeof p[a]===s&&p[a].length===2?e[p[a][0]]=p[a][1]:typeof p[a]===s&&p[a].length===3?typeof p[a][1]===r&&(!p[a][1].exec||!p[a][1].test)?e[p[a][0]]=l?p[a][1].call(this,l,p[a][2]):t:e[p[a][0]]=l?l.replace(p[a][1],p[a][2]):t:e[p[a]]=l?l:t;break}}if(!!f)break}return e},string:function(e,n){for(var r in n)if(n.hasOwnProperty(r))if(typeof n[r]===s&&n[r].length>0){for(var o=0;o<n[r].length;o++)if(e.toLowerCase().indexOf(n[r][o].toLowerCase())!==-1)return r.toString()===i?t:r}else if(e.toLowerCase().indexOf(n[r].toLowerCase())!==-1)return r.toString()===i?t:r;return e}},m={browser:{oldsafari:{major:{1:["/85","/125","/312"],2:["/412","/416","/417","/419"],"undefined":"/"},version:{"1.0":"/85",1.2:"/125",1.3:"/312","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","undefined":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",RT:"ARM"}}}},g={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[a,c,o],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[a,"Opera"],c,o],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\sbrowser|iemobile|slimbrowser|baidubrowser)[\/\s]?((\d+)?[\w\.]*)/i,/ms(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt)\/((\d+)?[\w\.-]+)/i],[a,c,o],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[a,"Yandex"],c,o],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[a,/_/g," "],c,o],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[a,c,o],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[a,"Dolphin"],c,o],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[a,"Chrome"],c,o],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[c,o,[a,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[c,o,a],[/applewebkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[a,[o,v.string,m.browser.oldsafari.major],[c,v.string,m.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(applewebkit|khtml)\/((\d+)?[\w\.]+)/i],[a,c,o],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[a,"Netscape"],c,o],[/(swiftfox)/i,/(iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[a,c,o]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[u,l,[f,d]],[/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,u,[f,d]],[/\((ip[honed]+);.+(apple)/i],[u,l,[f,p]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,u,[f,p]],[/\((bb10);\s(\w+)/i],[[l,"BlackBerry"],u,[f,p]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i],[[l,"Asus"],u,[f,d]],[/(sony)\s(tablet\s[ps])/i],[l,u,[f,d]],[/(nintendo|playstation)\s([wids3portablev]+)/i],[l,u,[f,h]],[/(sprint\s(\w+))/i],[[l,v.string,m.device.sprint.vendor],[u,v.string,m.device.sprint.model],[f,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|;\ssony)[_\s-]?([\w-]+)*/i],[l,[u,/_/g," "],[f,p]],[/\s((milestone|droid[2x]?))[globa\s]*\sbuild\//i,/(mot)[\s-]?(\w+)*/i],[[l,"Motorola"],u,[f,p]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[[l,"Motorola"],u,[f,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i],[[l,"Samsung"],u,[f,d]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],u,[f,p]],[/(sie)-(\w+)*/i],[[l,"Siemens"],u,[f,p]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],u,[f,p]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[[l,"Acer"],u,[f,d]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],u,[f,d]],[/(lg)[e;\s-\/]+(\w+)*/i],[[l,"LG"],u,[f,p]],[/(mobile|tablet);.+rv\:.+gecko\//i],[f,l,u]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml)\/([\w\.]+)/i,/(tasman)\s([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(icab)[\/\s]([2-3]\.[\d\.]+)/i],[a,c],[/rv\:([\w\.]+).*(gecko)/i],[c,a]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[c,v.string,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[c,v.string,m.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[a,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],c],[/(nintendo|playstation)\s([wids3portablev]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],c],[/\s(\w*bsd|dragonfly)\s?([\w\.]+)*/i],[a,c],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[a,[c,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[a,c]]},y=function(t){var r=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:n);this.getBrowser=function(){return v.regex.apply(this,g.browser)},this.getDevice=function(){return v.regex.apply(this,g.device)},this.getEngine=function(){return v.regex.apply(this,g.engine)},this.getOS=function(){return v.regex.apply(this,g.os)},this.getResult=function(){return{browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this.setUA(r)};if(typeof exports!==i&&!/\[object\s[DOM]*Window\]/.test(e.toString()))typeof module!==i&&module.exports&&(exports=module.exports=y),exports.UAParser=y;else if(typeof define===r&&define.amd)define("util/../../external/ua-parser/ua-parser",[],function(){return y});else{e.UAParser=y;if(typeof e.jQuery!==i){var b=new y;e.jQuery.ua=b.getResult(),e.jQuery.ua.get=function(){return b.getUA()},e.jQuery.ua.set=function(t){b.setUA(t);var n=b.getResult();for(var r in n)e.jQuery.ua[r]=n[r]}}}}(this),function(){var e={Chromium:17,Chrome:17,Firefox:10,IE:9,Safari:6,Opera:12},t=["Android","iOS","BlackBerry","MeeGo","Windows Phone OS","Firefox OS","RIM Tablet OS"];define("util/accepted-ua",["../../external/ua-parser/ua-parser","util/warn","localized"],function(n,r,i){var s=(new n).getResult(),o=s.browser.name,u=s.browser.major,a=s.os.name,f=!1;for(var l in e)e.hasOwnProperty(l)&&t.indexOf(a)===-1&&o===l&&+u>=e[l]&&(f=!0);f||r.showWarning(i.get("UA_WARNING_TEXT")+" "+i.get("Click to remove warning"))})}(),function(){document.addEventListener=document.addEventListener||function(e,t){e=e==="DOMContentLoaded"?"onreadystatechange":"on"+e,document.attachEvent(e,t)},document.removeEventListener=document.removeEventListener||function(e,t){e=e==="DOMContentLoaded"?"onreadystatechange":"on"+e,document.detachEvent(e,t)},HTMLScriptElement.prototype.addEventListener=HTMLScriptElement.prototype.addEventListener||function(e,t){e=e==="load"?"onreadystatechange":"on"+e,this.attachEvent(e,t)},HTMLScriptElement.prototype.removeEventListener=HTMLScriptElement.prototype.removeEventListener||function(e,t){e=e==="load"?"onreadystatechange":"on"+e,this.detachEvent(e,t)},document.createEvent=document.createEvent||function(e){return{type:null,target:null,currentTarget:null,cancelable:!1,bubbles:!1,initEvent:function(e,t,n){this.type=e},stopPropagation:function(){},stopImmediatePropagation:function(){}}},Array.prototype.forEach=Array.prototype.forEach||function(e,t){var n=this,r=Object.prototype.hasOwnProperty;if(!n||!e)return{};t=t||this;var i,s;for(i in n)r.call(n,i)&&e.call(t,n[i],i,n);return n},Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError("this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}(),define("popcorn.ie8",function(){}),function(e,t){function y(e){m.put.call(this,e)}function b(e){this.parent=e,this.byStart=[{start:-1,end:-1}],this.byEnd=[{start:-1,end:-1}],this.animating=[],this.startIndex=0,this.endIndex=0,this.previousUpdateTime=-1,Object.defineProperty(this,"count",{get:function(){return this.byStart.length}})}function w(e,t,n){return e[t]&&e[t]===n}function E(e,t){var n={};for(var r in e)u.call(t,r)&&u.call(e,r)&&(n[r]=e[r]);return n}function S(e,t){return function(){if(g.plugin.debug)return e.apply(this,arguments);try{return e.apply(this,arguments)}catch(n){g.plugin.errors.push({plugin:t,thrown:n,source:e.toString()}),this.emit("pluginerror",g.plugin.errors)}}}if(!t.addEventListener){e.Popcorn={isSupported:!1};var n="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);while(n.length)e.Popcorn[n.shift()]=function(){};return}var r=Array.prototype,i=Object.prototype,s=r.forEach,o=r.slice,u=i.hasOwnProperty,a=i.toString,f=e.Popcorn,l=[],c=!1,h=!1,p={events:{hash:{},apis:{}}},d=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,n){e.setTimeout(t,16)}}(),v=function(e){return Object.keys?Object.keys(e):function(e){var t,n=[];for(t in e)u.call(e,t)&&n.push(t);return n}(e)},m={put:function(e){Object.getOwnPropertyNames(e).forEach(function(t){this[t]=e[t]},this)}},g=function(e,t){return new g.p.init(e,t||null)};g.version="@VERSION",g.isSupported=!0,g.instances=[],g.p=g.prototype={init:function(e,n){var r,i,s=this;if(typeof e=="function"){if(t.readyState==="complete"){e(t,g);return}l.push(e);if(!c){c=!0;var o=function(){h=!0,t.removeEventListener("DOMContentLoaded",o,!1);for(var e=0,n=l.length;e<n;e++)l[e].call(t,g);l=null};t.addEventListener("DOMContentLoaded",o,!1)}return}if(typeof e=="string")try{r=t.querySelector(e)}catch(u){throw new Error("Popcorn.js Error: Invalid media element selector: "+e)}this.media=r||e,i=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[i]=this.media,this.options=g.extend({},n)||{},this.id=this.options.id||g.guid(i);if(g.byId(this.id))throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:g.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new b(this)},g.instances.push(this);var a=function(){s.media.currentTime<0&&(s.media.currentTime=0),s.media.removeEventListener("loadedmetadata",a,!1);var e,t,n,r,i,o;e=s.media.duration,t=e!=e?Number.MAX_VALUE:e+1,g.addTrackEvent(s,{start:t,end:t}),s.isDestroyed||(s.data.durationChange=function(){var e=s.media.duration,t=e+1,n=s.data.trackEvents.byStart,r=s.data.trackEvents.byEnd;n.pop(),r.pop();for(var i=r.length-1;i>0;i--)r[i].end>e&&s.removeTrackEvent(r[i]._id);for(var o=0;o<n.length;o++)n[o].end>e&&s.removeTrackEvent(n[o]._id);s.data.trackEvents.byEnd.push({start:t,end:t}),s.data.trackEvents.byStart.push({start:t,end:t})},s.media.addEventListener("durationchange",s.data.durationChange,!1)),s.options.frameAnimation?(s.data.timeUpdate=function(){g.timeUpdate(s,{}),g.forEach(g.manifest,function(e,t){n=s.data.running[t];if(n){i=n.length;for(var u=0;u<i;u++)r=n[u],o=r._natives,o&&o.frame&&o.frame.call(s,{},r,s.currentTime())}}),s.emit("timeupdate"),!s.isDestroyed&&d(s.data.timeUpdate)},!s.isDestroyed&&d(s.data.timeUpdate)):(s.data.timeUpdate=function(e){g.timeUpdate(s,e)},s.isDestroyed||s.media.addEventListener("timeupdate",s.data.timeUpdate,!1))};return Object.defineProperty(this,"error",{get:function(){return s.media.error}}),s.media.readyState>=1?a():s.media.addEventListener("loadedmetadata",a,!1),this}},g.p.init.prototype=g.p,g.byId=function(e){var t=g.instances,n=t.length,r=0;for(;r<n;r++)if(t[r].id===e)return t[r];return null},g.forEach=function(e,t,n){if(!e||!t)return{};n=n||this;var r,i;if(s&&e.forEach===s)return e.forEach(t,n);if(a.call(e)==="[object NodeList]"){for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);return e}for(r in e)u.call(e,r)&&t.call(n,e[r],r,e);return e},g.extend=function(e){var t=e,n=o.call(arguments,1);return g.forEach(n,function(e){for(var n in e)t[n]=e[n]}),t},g.extend(g,{noConflict:function(t){return t&&(e.Popcorn=f),g},error:function(e){throw new Error(e)},guid:function(e){return g.guid.counter++,(e?e:"")+(+(new Date)+g.guid.counter)},sizeOf:function(e){var t=0;for(var n in e)t++;return t},isArray:Array.isArray||function(e){return a.call(e)==="[object Array]"},nop:function(){},position:function(n){if(!n.parentNode)return null;var r=n.getBoundingClientRect(),i={},s=n.ownerDocument,o=t.documentElement,u=t.body,a,f,l,c,h,p;a=o.clientTop||u.clientTop||0,f=o.clientLeft||u.clientLeft||0,l=e.pageYOffset&&o.scrollTop||u.scrollTop,c=e.pageXOffset&&o.scrollLeft||u.scrollLeft,h=Math.ceil(r.top+l-a),p=Math.ceil(r.left+c-f);for(var d in r)i[d]=Math.round(r[d]);return g.extend({},i,{top:h,left:p})},disable:function(e,t){if(e.data.disabled[t])return;e.data.disabled[t]=!0;if(t in g.registryByName&&e.data.running[t])for(var n=e.data.running[t].length-1,r;n>=0;n--)r=e.data.running[t][n],r._natives.end.call(e,null,r),e.emit("trackend",g.extend({},r,{plugin:r.type,type:"trackend"}));return e},enable:function(e,t){if(!e.data.disabled[t])return;e.data.disabled[t]=!1;if(t in g.registryByName&&e.data.running[t])for(var n=e.data.running[t].length-1,r;n>=0;n--)r=e.data.running[t][n],r._natives.start.call(e,null,r),e.emit("trackstart",g.extend({},r,{plugin:r.type,type:"trackstart",track:r}));return e},destroy:function(e){var t=e.data.events,n=e.data.trackEvents,r,i,s,o;for(i in t){r=t[i];for(s in r)delete r[s];t[i]=null}for(o in g.registryByName)g.removePlugin(e,o);n.byStart.length=0,n.byEnd.length=0,e.isDestroyed||(e.data.timeUpdate&&e.media.removeEventListener("timeupdate",e.data.timeUpdate,!1),e.isDestroyed=!0),g.instances.splice(g.instances.indexOf(e),1)}}),g.guid.counter=1,g.extend(g.p,function(){var e="load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended",t={};return g.forEach(e.split(/\s+/g),function(e){t[e]=function(t){var n;return typeof this.media[e]=="function"?(t!=null&&/play|pause/.test(e)&&(this.media.currentTime=g.util.toSeconds(t)),this.media[e](),this):t!=null?(n=this.media[e],this.media[e]=t,n!==t&&this.emit("attrchange",{attribute:e,previousValue:n,currentValue:t}),this):this.media[e]}}),t}()),g.forEach("enable disable".split(" "),function(e){g.p[e]=function(t){return g[e](this,t)}}),g.extend(g.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(e,t,n){var r=arguments.length,i="trackadded",s,o,u;try{o=g.util.toSeconds(e)}catch(a){}typeof o=="number"&&(e=o);if(typeof e=="number"&&r===2)n=t,t=e,e=g.guid("cue");else if(r===1)t=-1;else{s=this.getTrackEvent(e);if(s)this.data.trackEvents.remove(e),y.end(this,s),g.removeTrackEvent.ref(this,e),i="cuechange",typeof e=="string"&&r===2&&(typeof t=="number"&&(n=s._natives.start),typeof t=="function"&&(n=t,t=s.start));else if(r>=2){if(typeof t=="string"){try{o=g.util.toSeconds(t)}catch(a){}t=o}typeof t=="number"&&(n=n||g.nop()),typeof t=="function"&&(n=t,t=-1)}}return u={id:e,start:t,end:t+1,_running:!1,_natives:{start:n||g.nop,end:g.nop,type:"cue"}},s&&(u=g.extend(s,u)),i==="cuechange"?(u._id=u.id||u._id||g.guid(u._natives.type),this.data.trackEvents.add(u),y.start(this,u),this.timeUpdate(this,null,!0),g.addTrackEvent.ref(this,u),this.emit(i,g.extend({},u,{id:e,type:i,previousValue:{time:s.start,fn:s._natives.start},currentValue:{time:t,fn:n||g.nop},track:s}))):g.addTrackEvent(this,u),this},mute:function(e){var t=e==null||e===!0?"muted":"unmuted";return t==="unmuted"&&(this.media.muted=!1,this.media.volume=this.data.state.volume),t==="muted"&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(t),this},unmute:function(e){return this.mute(e==null?!1:!e)},position:function(){return g.position(this.media)},toggle:function(e){return g[this.data.disabled[e]?"enable":"disable"](this,e)},defaults:function(e,t){return g.isArray(e)?(g.forEach(e,function(e){for(var t in e)this.defaults(t,e[t])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[e]||(this.options.defaults[e]={}),g.extend(this.options.defaults[e],t),this)}}),g.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},g.Events.Natives=g.Events.UIEvents+" "+g.Events.MouseEvents+" "+g.Events.Events,p.events.apiTypes=["UIEvents","MouseEvents","Events"],function(e,t){var n=p.events.apiTypes,r=e.Natives.split(/\s+/g),i=0,s=r.length,o;for(;i<s;i++)t.hash[r[i]]=!0;n.forEach(function(n,r){t.apis[n]={};var i=e[n].split(/\s+/g),s=i.length,o=0;for(;o<s;o++)t.apis[n][i[o]]=!0})}(g.Events,p.events),g.events={isNative:function(e){return!!p.events.hash[e]},getInterface:function(e){if(!g.events.isNative(e))return!1;var t=p.events,n=t.apiTypes,r=t.apis,i=0,s=n.length,o,u;for(;i<s;i++){u=n[i];if(r[u][e]){o=u;break}}return o},all:g.Events.Natives.split(/\s+/g),fn:{trigger:function(n,r){var i,s,o,u=this.data.events[n];if(u){i=g.events.getInterface(n);if(i)return s=t.createEvent(i),s.initEvent(n,!0,!0,e,1),this.media.dispatchEvent(s),this;o=u.slice();while(o.length)o.shift().call(this,r)}return this},listen:function(e,t){var n=this,r=!0,i=g.events.hooks[e],s=e,o,u;if(typeof t!="function")throw new Error("Popcorn.js Error: Listener is not a function");return this.data.events[e]||(this.data.events[e]=[],r=!1),i&&(i.add&&i.add.call(this,{},t),i.bind&&(e=i.bind),i.handler&&(u=t,t=function(t){i.handler.call(n,t,u)}),r=!0,this.data.events[e]||(this.data.events[e]=[],r=!1)),this.data.events[e].push(t),!r&&g.events.all.indexOf(e)>-1&&this.media.addEventListener(e,function(t){if(n.data.events[e]){o=n.data.events[e].slice();while(o.length)o.shift().call(n,t)}},!1),this},unlisten:function(e,t){var n,r=this.data.events[e];if(!r)return;if(typeof t=="string"){for(var i=0;i<r.length;i++)r[i].name===t&&r.splice(i--,1);return this}if(typeof t=="function"){while(n!==-1)n=r.indexOf(t),n!==-1&&r.splice(n,1);return this}return this.data.events[e]=null,this}},hooks:{canplayall:{bind:"canplaythrough",add:function(e,t){var n=!1;this.media.readyState&&(setTimeout(function(){t.call(this,e)}.bind(this),0),n=!0),this.data.hooks.canplayall={fired:n}},handler:function(t,n){this.data.hooks.canplayall.fired||(n.call(this,t),this.data.hooks.canplayall.fired=!0)}}}},g.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(e){g.p[e[0]]=g.p[e[1]]=g.events.fn[e[0]]}),y.start=function(e,t){t.end>e.media.currentTime&&t.start<=e.media.currentTime&&!t._running&&(t._running=!0,e.data.running[t._natives.type].push(t),e.data.disabled[t._natives.type]||(t._natives.start.call(e,null,t),e.emit("trackstart",g.extend({},t,{plugin:t._natives.type,type:"trackstart",track:t}))))},y.end=function(e,t){var n;(t.end<=e.media.currentTime||t.start>e.media.currentTime)&&t._running&&(n=e.data.running[t._natives.type],t._running=!1,n.splice(n.indexOf(t),1),e.data.disabled[t._natives.type]||(t._natives.end.call(e,null,t),e.emit("trackend",g.extend({},t,{plugin:t._natives.type,type:"trackend",track:t}))))},b.prototype.where=function(e){return(this.parent.getTrackEvents()||[]).filter(function(t){var n,r;if(!e)return!0;for(n in e){r=e[n];if(w(t,n,r)||w(t._natives,n,r))return!0}return!1})},b.prototype.add=function(e){var t=this.byStart,n=this.byEnd,r,i;e&&e._id&&this.parent.data.history.push(e._id),e.start=g.util.toSeconds(e.start,this.parent.options.framerate),e.end=g.util.toSeconds(e.end,this.parent.options.framerate);for(r=t.length-1;r>=0;r--)if(e.start>=t[r].start){t.splice(r+1,0,e);break}for(i=n.length-1;i>=0;i--)if(e.end>n[i].end){n.splice(i+1,0,e);break}r<=this.parent.data.trackEvents.startIndex&&e.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++,i<=this.parent.data.trackEvents.endIndex&&e.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++},b.prototype.remove=function(e,t){e instanceof y&&(e=e.id);if(typeof e=="object")return this.where(e).forEach(function(e){this.removeTrackEvent(e._id)},this.parent),this;var n,r,i,s,o,u=this.byStart.length,a=0,f=0,l=[],c=[],h=[],p=[],d={};t=t||{};while(--u>-1)n=this.byStart[a],r=this.byEnd[a],n._id||(l.push(n),c.push(r)),n._id&&(n._id!==e&&l.push(n),r._id!==e&&c.push(r),n._id===e&&(f=a,o=n)),a++;u=this.animating.length,a=0;if(u)while(--u>-1)i=this.animating[a],i._id||h.push(i),i._id&&i._id!==e&&h.push(i),a++;f<=this.startIndex&&this.startIndex--,f<=this.endIndex&&this.endIndex--,this.byStart=l,this.byEnd=c,this.animating=h,s=this.parent.data.history.length;for(var v=0;v<s;v++)this.parent.data.history[v]!==e&&p.push(this.parent.data.history[v]);this.parent.data.history=p},g.addTrackEvent=function(e,t){var n;if(t instanceof y)return;t=new y(t),t&&t._natives&&t._natives.type&&e.options.defaults&&e.options.defaults[t._natives.type]&&(n=g.extend({},t),g.extend(t,e.options.defaults[t._natives.type],n)),t._natives&&(t._id=t.id||t._id||g.guid(t._natives.type),t._natives._setup&&(t._natives._setup.call(e,t),e.emit("tracksetup",g.extend({},t,{plugin:t._natives.type,type:"tracksetup",track:t})))),e.data.trackEvents.add(t),y.start(e,t),this.timeUpdate(e,null,!0),t._id&&g.addTrackEvent.ref(e,t),e.emit("trackadded",g.extend({},t,t._natives?{plugin:t._natives.type}:{},{type:"trackadded",track:t}))},g.addTrackEvent.ref=function(e,t){return e.data.trackRefs[t._id]=t,e},g.removeTrackEvent=function(e,t){var n=e.getTrackEvent(t);if(!n)return;n._natives._teardown&&n._natives._teardown.call(e,n),e.data.trackEvents.remove(t),g.removeTrackEvent.ref(e,t),n._natives&&e.emit("trackremoved",g.extend({},n,{plugin:n._natives.type,type:"trackremoved",track:n}))},g.removeTrackEvent.ref=function(e,t){return delete e.data.trackRefs[t],e},g.getTrackEvents=function(e){var t=[],n=e.data.trackEvents.byStart,r=n.length,i=0,s;for(;i<r;i++)s=n[i],s._id&&t.push(s);return t},g.getTrackEvents.ref=function(e){return e.data.trackRefs},g.getTrackEvent=function(e,t){return e.data.trackRefs[t]},g.getTrackEvent.ref=function(e,t){return e.data.trackRefs[t]},g.getLastTrackEventId=function(e){return e.data.history[e.data.history.length-1]},g.timeUpdate=function(e,t){var n=e.media.currentTime,r=e.data.trackEvents.previousUpdateTime,i=e.data.trackEvents,s=i.endIndex,o=i.startIndex,u=i.byStart.length,a=i.byEnd.length,f=g.registryByName,l="trackstart",c="trackend",h,p,d,v,m,y;if(r<=n){while(i.byEnd[s]&&i.byEnd[s].end<=n){h=i.byEnd[s],v=h._natives,m=v&&v.type;if(!!v&&!f[m]&&!e[m]){g.removeTrackEvent(e,h._id);return}h._running===!0&&(h._running=!1,y=e.data.running[m],y.splice(y.indexOf(h),1),e.data.disabled[m]||(v.end.call(e,t,h),e.emit(c,g.extend({},h,{plugin:m,type:c,track:h})))),s++}while(i.byStart[o]&&i.byStart[o].start<=n){p=i.byStart[o],v=p._natives,m=v&&v.type;if(!!v&&!f[m]&&!e[m]){g.removeTrackEvent(e,p._id);return}p.end>n&&p._running===!1&&(p._running=!0,e.data.running[m].push(p),e.data.disabled[m]||(v.start.call(e,t,p),e.emit(l,g.extend({},p,{plugin:m,type:l,track:p})))),o++}}else if(r>n){while(i.byStart[o]&&i.byStart[o].start>n){p=i.byStart[o],v=p._natives,m=v&&v.type;if(!!v&&!f[m]&&!e[m]){g.removeTrackEvent(e,p._id);return}p._running===!0&&(p._running=!1,y=e.data.running[m],y.splice(y.indexOf(p),1),e.data.disabled[m]||(v.end.call(e,t,p),e.emit(c,g.extend({},p,{plugin:m,type:c,track:p})))),o--}while(i.byEnd[s]&&i.byEnd[s].end>n){h=i.byEnd[s],v=h._natives,m=v&&v.type;if(!!v&&!f[m]&&!e[m]){g.removeTrackEvent(e,h._id);return}h.start<=n&&h._running===!1&&(h._running=!0,e.data.running[m].push(h),e.data.disabled[m]||(v.start.call(e,t,h),e.emit(l,g.extend({},h,{plugin:m,type:l,track:h})))),s--}}i.endIndex=s,i.startIndex=o,i.previousUpdateTime=n,i.byStart.length<u&&i.startIndex--,i.byEnd.length<a&&i.endIndex--},g.extend(g.p,{getTrackEvents:function(){return g.getTrackEvents.call(null,this)},getTrackEvent:function(e){return g.getTrackEvent.call(null,this,e)},getLastTrackEventId:function(){return g.getLastTrackEventId.call(null,this)},removeTrackEvent:function(e){return g.removeTrackEvent.call(null,this,e),this},removePlugin:function(e){return g.removePlugin.call(null,this,e),this},timeUpdate:function(e){return g.timeUpdate.call(null,this,e),this},destroy:function(){return g.destroy.call(null,this),this}}),g.manifest={},g.registry=[],g.registryByName={},g.plugin=function(e,t,n){if(g.protect.natives.indexOf(e.toLowerCase())>=0){g.error("'"+e+"' is a protected function name");return}var r=typeof t=="function",i=["start","end","type","manifest"],s=["_setup","_teardown","start","end","frame"],a={},f,l=function(e,t){return e=e||g.nop,t=t||g.nop,function(){e.apply(this,arguments),t.apply(this,arguments)}};g.manifest[e]=n=n||t.manifest||{},s.forEach(function(n){t[n]=S(t[n]||g.nop,e)});var c=function(t,r){if(!r)return this;if(r.ranges&&g.isArray(r.ranges))return g.forEach(r.ranges,function(t){var n=g.extend({},r,t);delete n.ranges,this[e](n)},this),this;var a=r._natives={},f="",c,h;return g.extend(a,t),r._natives.type=r._natives.plugin=e,r._running=!1,a.start=a.start||a["in"],a.end=a.end||a.out,r.once&&(a.end=l(a.end,function(){this.removeTrackEvent(r._id)})),a._teardown=l(function(){var e=o.call(arguments),t=this.data.running[a.type];e.unshift(null),e[1]._running&&t.splice(t.indexOf(r),1)&&a.end.apply(this,e),e[1]._running=!1,this.emit("trackend",g.extend({},r,{plugin:a.type,type:"trackend",track:g.getTrackEvent(this,r.id||r._id)}))},a._teardown),a._teardown=l(a._teardown,function(){this.emit("trackteardown",g.extend({},r,{plugin:e,type:"trackteardown",track:g.getTrackEvent(this,r.id||r._id)}))}),r.compose=r.compose||[],typeof r.compose=="string"&&(r.compose=r.compose.split(" ")),r.effect=r.effect||[],typeof r.effect=="string"&&(r.effect=r.effect.split(" ")),r.compose=r.compose.concat(r.effect),r.compose.forEach(function(e){f=g.compositions[e]||{},s.forEach(function(e){a[e]=l(a[e],f[e])})}),r._natives.manifest=n,"start"in r||(r.start=r["in"]||0),!r.end&&r.end!==0&&(r.end=r.out||Number.MAX_VALUE),u.call(r,"toString")||(r.toString=function(){var t=["start: "+r.start,"end: "+r.end,"id: "+(r.id||r._id)];return r.target!=null&&t.push("target: "+r.target),e+" ( "+t.join(", ")+" )"}),r.target||(h="options"in n&&n.options,r.target=h&&"target"in h&&h.target),!r._id&&r._natives&&(r._id=g.guid(r._natives.type)),r instanceof y?(r._natives&&(r._id=r.id||r._id||g.guid(r._natives.type),r._natives._setup&&(r._natives._setup.call(this,r),this.emit("tracksetup",g.extend({},r,{plugin:r._natives.type,type:"tracksetup",track:r})))),this.data.trackEvents.add(r),y.start(this,r),this.timeUpdate(this,null,!0),r._id&&g.addTrackEvent.ref(this,r)):g.addTrackEvent(this,r),g.forEach(t,function(e,t){i.indexOf(t)===-1&&this.on(t,e)},this),this};g.p[e]=a[e]=function(n,i){var s=arguments.length,o,a,f,l,h;if(n&&!i)i=n,n=null;else{o=this.getTrackEvent(n);if(!!o)return h=i,l=E(o,h),o._natives._update?(this.data.trackEvents.remove(o),u.call(i,"start")&&(o.start=i.start),u.call(i,"end")&&(o.end=i.end),y.end(this,o),r&&t.call(this,o),o._natives._update.call(this,o,i),this.data.trackEvents.add(o),y.start(this,o),o._natives.type!=="cue"&&this.emit("trackchange",{id:o.id,type:"trackchange",previousValue:l,currentValue:h,track:o}),this):(g.extend(o,i),this.data.trackEvents.remove(n),o._natives._teardown&&o._natives._teardown.call(this,o),g.removeTrackEvent.ref(this,n),r?c.call(this,t.call(this,o),o):(o._id=o.id||o._id||g.guid(o._natives.type),o._natives&&o._natives._setup&&(o._natives._setup.call(this,o),this.emit("tracksetup",g.extend({},o,{plugin:o._natives.type,type:"tracksetup",track:o}))),this.data.trackEvents.add(o),y.start(this,o),this.timeUpdate(this,null,!0),g.addTrackEvent.ref(this,o)),this.emit("trackchange",{id:o.id,type:"trackchange",previousValue:l,currentValue:o,track:o}),this);i.id=n}return this.data.running[e]=this.data.running[e]||[],a=this.options.defaults&&this.options.defaults[e]||{},f=g.extend({},a,i),c.call(this,r?t.call(this,f):t,f),this},n&&g.extend(t,{manifest:n});var h={fn:a[e],definition:t,base:t,parents:[],name:e};return g.registry.push(g.extend(a,h,{type:e})),g.registryByName[e]=h,a},g.plugin.errors=[],g.plugin.debug=g.version==="@VERSION",g.removePlugin=function(e,t){if(!t){t=e,e=g.p;if(g.protect.natives.indexOf(t.toLowerCase())>=0){g.error("'"+t+"' is a protected function name");return}var n=g.registry.length,r;for(r=0;r<n;r++)if(g.registry[r].name===t){g.registry.splice(r,1),delete g.registryByName[t],delete g.manifest[t],delete e[t];return}}var i=e.data.trackEvents.byStart,s=e.data.trackEvents.byEnd,o=e.data.trackEvents.animating,u,a;for(u=0,a=i.length;u<a;u++)i[u]&&i[u]._natives&&i[u]._natives.type===t&&(i[u]._natives._teardown&&i[u]._natives._teardown.call(e,i[u]),i.splice(u,1),u--,a--,e.data.trackEvents.startIndex<=u&&(e.data.trackEvents.startIndex--,e.data.trackEvents.endIndex--)),s[u]&&s[u]._natives&&s[u]._natives.type===t&&s.splice(u,1);for(u=0,a=o.length;u<a;u++)o[u]&&o[u]._natives&&o[u]._natives.type===t&&(o.splice(u,1),u--,a--)},g.compositions={},g.compose=function(e,t,n){g.manifest[e]=n=n||t.manifest||{},g.compositions[e]=t},g.plugin.effect=g.effect=g.compose;var x=/^(?:\.|#|\[)/;g.dom={debug:!1,find:function(e,n){var r=null;n=n||t;if(e){if(!x.test(e)){r=t.getElementById(e);if(r!==null)return r}try{r=n.querySelector(e)}catch(i){if(g.dom.debug)throw new Error(i)}}return r}};var T=/\?/,N={ajax:null,url:"",data:"",dataType:"",success:g.nop,type:"GET",async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};g.xhr=function(e){var t;e.dataType=e.dataType&&e.dataType.toLowerCase()||null;if(!(!e.dataType||e.dataType!=="jsonp"&&e.dataType!=="script")){g.xhr.getJSONP(e.url,e.success,e.dataType==="script");return}t=g.extend({},N,e),t.ajax=new XMLHttpRequest;if(t.ajax)return t.type==="GET"&&t.data&&(t.url+=(T.test(t.url)?"&":"?")+t.data,t.data=null),t.ajax.open(t.type,t.url,t.async),t.type==="POST"&&t.ajax.setRequestHeader("Content-Type",t.contentType),t.ajax.send(t.data||null),g.xhr.httpData(t)},g.xhr.httpData=function(e){var t,n=null,r,i=null;return e.ajax.onreadystatechange=function(){if(e.ajax.readyState===4){try{n=JSON.parse(e.ajax.responseText)}catch(s){}t={xml:e.ajax.responseXML,text:e.ajax.responseText,json:n};if(!t.xml||!t.xml.documentElement){t.xml=null;try{r=new DOMParser,i=r.parseFromString(e.ajax.responseText,"text/xml"),i.getElementsByTagName("parsererror").length||(t.xml=i)}catch(s){}}e.dataType&&(t=t[e.dataType]),e.success.call(e.ajax,t)}},t},g.xhr.getJSONP=function(e,n,r){var i=t.head||t.getElementsByTagName("head")[0]||t.documentElement,s=t.createElement("script"),o=!1,u=[],a=/(=)\?(?=&|$)|\?\?/,f,l,c,h,p;r||(p=e.match(/(callback=[^&]*)/),p!==null&&p.length?(l=p[1].split("=")[1],l==="?"&&(l="jsonp"),h=g.guid(l),e=e.replace(/(callback=[^&]*)/,"callback="+h)):(h=g.guid("jsonp"),a.test(e)&&(e=e.replace(a,"$1"+h)),u=e.split(/\?(.+)?/),e=u[0]+"?",u[1]&&(e+=u[1]+"&"),e+="callback="+h),window[h]=function(e){n&&n(e),o=!0}),s.addEventListener("load",function(){r&&n&&n(),o&&delete window[h],i.removeChild(s)},!1),s.addEventListener("error",function(e){n&&n({error:e}),r||delete window[h],i.removeChild(s)},!1),s.src=e,i.insertBefore(s,i.firstChild);return},g.getJSONP=g.xhr.getJSONP,g.getScript=g.xhr.getScript=function(e,t){return g.xhr.getJSONP(e,t,!0)},g.util={toSeconds:function(e,t){var n=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,r="Invalid time format",i,s,o,u,a,f;return typeof e=="number"?e:(typeof e=="string"&&!n.test(e)&&g.error(r),i=e.split(":"),s=i.length-1,o=i[s],o.indexOf(";")>-1&&(a=o.split(";"),f=0,t&&typeof t=="number"&&(f=parseFloat(a[1],10)/t),i[s]=parseInt(a[0],10)+f),u=i[0],{1:parseFloat(u,10),2:parseInt(u,10)*60+parseFloat(i[1],10),3:parseInt(u,10)*3600+parseInt(i[1],10)*60+parseFloat(i[2],10)}[i.length||1])}},g.p.cue=g.p.exec,g.protect={natives:v(g.p).map(function(e){return e.toLowerCase()})},g.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(e,t){var n=g.p[t];g.p[t]=function(){return typeof console!="undefined"&&console.warn&&(console.warn("Deprecated method '"+t+"', "+(e==null?"do not use.":"use '"+e+"' instead.")),g.p[t]=n),g.p[e].apply(this,[].slice.call(arguments))}}),e.Popcorn=g}(window,window.document),define("popcorn.core",function(){}),function(e){var t=function(t,n){return t=t||e.nop,n=n||e.nop,function(){t.apply(this,arguments),n.apply(this,arguments)}},n=/^(#([\w\-\_\.]+))$/;e.player=function(n,r){if(e[n])return;r=r||{};var i=function(n,i,s){s=s||{};var o=new Date/1e3,u=o,a=0,f=0,l=1,c=!1,h={},p=typeof n=="string"?e.dom.find(n):n,d={},v,m;Object.prototype.__defineGetter__||(d=p||document.createElement("div"));for(var g in p){if(g in d)continue;typeof p[g]=="object"?d[g]=p[g]:typeof p[g]=="function"?d[g]=function(e){return"length"in p[e]&&!p[e].call?p[e]:function(){return p[e].apply(p,arguments)}}(g):e.player.defineProperty(d,g,{get:function(e){return function(){return p[e]}}(g),set:e.nop,configurable:!0})}var y=function(){o=new Date/1e3,d.paused||(d.currentTime=d.currentTime+(o-u),d.dispatchEvent("timeupdate"),v=setTimeout(y,10)),u=o};return d.play=function(){this.paused=!1,d.readyState>=4&&(u=new Date/1e3,d.dispatchEvent("play"),y())},d.pause=function(){this.paused=!0,d.dispatchEvent("pause")},e.player.defineProperty(d,"currentTime",{get:function(){return a},set:function(e){return a=+e,d.dispatchEvent("timeupdate"),a},configurable:!0}),e.player.defineProperty(d,"volume",{get:function(){return l},set:function(e){return l=+e,d.dispatchEvent("volumechange"),l},configurable:!0}),e.player.defineProperty(d,"muted",{get:function(){return c},set:function(e){return c=+e,d.dispatchEvent("volumechange"),c},configurable:!0}),e.player.defineProperty(d,"readyState",{get:function(){return f},set:function(e){return f=e,f},configurable:!0}),d.addEventListener=function(e,t){return h[e]||(h[e]=[]),h[e].push(t),t},d.removeEventListener=function(e,t){var n,r=h[e];if(!r)return;for(n=h[e].length-1;n>=0;n--)t===r[n]&&r.splice(n,1);return t},d.dispatchEvent=function(t){var n,r=this,i,s=t.type;s||(s=t,i=e.events.getInterface(s),i&&(n=document.createEvent(i),n.initEvent(s,!0,!0,window,1)));if(h[s])for(var o=h[s].length-1;o>=0;o--)h[s][o].call(r,n,r)},d.src=i||"",d.duration=0,d.paused=!0,d.ended=0,s&&s.events&&e.forEach(s.events,function(e,t){d.addEventListener(t,e,!1)}),r._canPlayType(p.nodeName,i)!==!1?r._setup?r._setup.call(d,s):(d.readyState=4,d.dispatchEvent("loadedmetadata"),d.dispatchEvent("loadeddata"),d.dispatchEvent("canplaythrough")):setTimeout(function(){d.dispatchEvent("error")},0),m=new e.p.init(d,s),r._teardown&&(m.destroy=t(m.destroy,function(){r._teardown.call(d,s)})),m};i.canPlayType=r._canPlayType=r._canPlayType||e.nop,e[n]=e.player.registry[n]=i},e.player.registry={},e.player.defineProperty=Object.defineProperty||function(t,n,r){t.__defineGetter__(n,r.get||e.nop),t.__defineSetter__(n,r.set||e.nop)},e.player.playerQueue=function(){var e=[],t=!1;return{next:function(){t=!1,e.shift(),e[0]&&e[0]()},add:function(n){e.push(function(){t=!0,n&&n()}),!t&&e[0]()}}},e.smart=function(t,n,r){var i=typeof t=="string"?e.dom.find(t):t,s,o,u,a,f,l,c,h="HTMLYouTubeVideoElement HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(!i){e.error("Specified target `"+t+"` was not found.");return}n=typeof n=="string"?[n]:n;for(s=0,c=n.length;s<c;s++){o=n[s];for(u=0;u<h.length;u++){f=e[h[u]];if(f&&f._canPlaySrc(o)==="probably")return a=f(i),l=e(a,r),setTimeout(function(){a.src=o},0),l}for(var p in e.player.registry)if(e.player.registry.hasOwnProperty(p)&&e.player.registry[p].canPlayType(i.nodeName,o))return e[p](i,o,r)}var d,v,m=e.guid("popcorn-video-"),g=document.createElement("div");g.style.width="100%",g.style.height="100%";if(n.length===1)return v=document.createElement("video"),v.id=m,i.appendChild(v),setTimeout(function(){var e=document.createElement("div");e.innerHTML=n[0],v.src=e.firstChild.nodeValue},0),e("#"+m,r);i.appendChild(g),d='<video id="'+m+'" preload=auto autobuffer>';for(s=0,c=n.length;s<c;s++)d+='<source src="'+n[s]+'">';return d+="</video>",g.innerHTML=d,r&&r.events&&r.events.error&&i.addEventListener("error",r.events.error,!1),e("#"+m,r)}}(Popcorn),define("popcorn.player",function(){}),function(e,t){function n(e){var t=n.options,r=t.parser[t.strictMode?"strict":"loose"].exec(e),i={},s=14;while(s--)i[t.key[s]]=r[s]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(i[t.q.name][n]=r)}),i}function i(){}n.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var r={length:0,start:e.nop,end:e.nop};MediaError=MediaError||function(){function e(e,t){this.code=e||null,this.message=t||""}return e.MEDIA_ERR_NONE_ACTIVE=0,e.MEDIA_ERR_ABORTED=1,e.MEDIA_ERR_NETWORK=2,e.MEDIA_ERR_DECODE=3,e.MEDIA_ERR_NONE_SUPPORTED=4,e}(),i.prototype={_util:{type:"HTML5",TIMEUPDATE_MS:250,MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(e){return typeof e=="string"||e===!0},parseUri:n},addEventListener:function(e,n,r){t.addEventListener(this._eventNamespace+e,n,r)},removeEventListener:function(e,n,r){t.removeEventListener(this._eventNamespace+e,n,r)},dispatchEvent:function(e){var n=t.createEvent("CustomEvent"),r={type:e,target:this.parentNode,data:null};n.initCustomEvent(this._eventNamespace+e,!1,!1,r),t.dispatchEvent(n)},load:e.nop,canPlayType:function(e){return""},getBoundingClientRect:function(){return this.parentNode.getBoundingClientRect()},NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},i.prototype.constructor=i,Object.defineProperties(i.prototype,{currentSrc:{get:function(){return this.src!==undefined?this.src:""}},preload:{get:function(){return"auto"},set:e.nop},controls:{get:function(){return!0},set:e.nop},poster:{get:function(){return""},set:e.nop},crossorigin:{get:function(){return""}},played:{get:function(){return r}},seekable:{get:function(){return r}},buffered:{get:function(){return r}},defaultMuted:{get:function(){return!1}},defaultPlaybackRate:{get:function(){return 1}},style:{get:function(){return this.parentNode.style}},id:{get:function(){return this.parentNode.id}}}),e._MediaElementProto=i}(Popcorn,window.document),define("popcorn._MediaElementProto",function(){}),function(e,t,n){function a(){return o||(e.getScript("https://w.soundcloud.com/player/api.js",function(){e.getScript("https://connect.soundcloud.com/sdk.js",function(){s=!0,SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});var e=u.length;while(e--)u[e](),delete u[e]})}),o=!0),s}function f(e){u.unshift(e)}function l(s){function b(e){v.unshift(e)}function w(){d.bind(SC.Widget.Events.LOAD_PROGRESS,function(e){D({type:"loadProgress",data:e.currentPosition/1e3})}),d.bind(SC.Widget.Events.PLAY_PROGRESS,function(e){D({type:"playProgress",data:e.currentPosition/1e3})}),d.bind(SC.Widget.Events.PLAY,function(e){D({type:"play"})}),d.bind(SC.Widget.Events.PAUSE,function(e){D({type:"pause"})}),d.bind(SC.Widget.Events.SEEK,function(e){d.getPosition(function(e){var t=e/1e3;if(c.seeking){Math.floor(t)!==Math.floor(c.currentTime)?d.seekTo(c.currentTime*1e3):k();return}D({type:"seek",data:t})})}),d.bind(SC.Widget.Events.FINISH,function(){D({type:"finish"})}),h=!0,d.getDuration(S)}function E(e){d.bind(SC.Widget.Events.PLAY_PROGRESS,function(e){d.setVolume(0),e.currentPosition>0&&(d.unbind(SC.Widget.Events.PLAY_PROGRESS),d.bind(SC.Widget.Events.PAUSE,function(){d.unbind(SC.Widget.Events.PAUSE),d.setVolume(100),d.bind(SC.Widget.Events.SEEK,function(){d.unbind(SC.Widget.Events.SEEK),w()}),d.seekTo(0)}),d.pause())}),d.play()}function S(e){e/=1e3;var t=c.duration;if(t!==e){c.duration=e,o.dispatchEvent("durationchange");if(isNaN(t)){c.networkState=o.NETWORK_IDLE,c.readyState=o.HAVE_METADATA,o.dispatchEvent("loadedmetadata"),o.dispatchEvent("loadeddata"),c.readyState=o.HAVE_FUTURE_DATA,o.dispatchEvent("canplay"),c.readyState=o.HAVE_ENOUGH_DATA,o.dispatchEvent("canplaythrough");var n=v.length;while(n--)v[n](),delete v[n];c.paused&&c.autoplay&&o.play()}}}function x(){h||b(function(){x()}),d.getDuration(S)}function T(){if(!h||!d)return;clearInterval(g),d.pause(),d.unbind(SC.Widget.Events.READY),d.unbind(SC.Widget.Events.LOAD_PROGRESS),d.unbind(SC.Widget.Events.PLAY_PROGRESS),d.unbind(SC.Widget.Events.PLAY),d.unbind(SC.Widget.Events.PAUSE),d.unbind(SC.Widget.Events.SEEK),d.unbind(SC.Widget.Events.FINISH),u.removeChild(l),l=n.createElement("iframe")}function N(e){function t(){C(),d.seekTo(e)}c.currentTime=e,e*=1e3;if(!h){addMediaReadyCallback(t);return}t()}function C(){c.seeking=!0,o.dispatchEvent("seeking")}function k(){c.ended=!1,c.seeking=!1,o.dispatchEvent("timeupdate"),o.dispatchEvent("seeked"),o.dispatchEvent("canplay"),o.dispatchEvent("canplaythrough")}function L(){c.paused=!0,p||(p=!0,clearInterval(m),o.dispatchEvent("pause"))}function A(){o.dispatchEvent("timeupdate")}function O(){g||(g=setInterval(P,r),c.loop&&o.dispatchEvent("play")),m=setInterval(A,o._util.TIMEUPDATE_MS),c.paused=!1,p&&(p=!1,c.loop||o.dispatchEvent("play"),o.dispatchEvent("playing"))}function M(){c.loop?(N(0),o.play()):(c.ended=!0,o.pause(),L(),o.dispatchEvent("timeupdate"),o.dispatchEvent("ended"))}function _(e){c.currentTime=e,e!==y&&o.dispatchEvent("timeupdate"),y=e}function D(e){switch(e.type){case"loadProgress":o.dispatchEvent("progress");break;case"playProgress":_(e.data);break;case"play":O();break;case"pause":L();break;case"finish":M();break;case"seek":_(e.data)}}function P(){if(c.ended)return;d.getPosition(function(e){_(e/1e3)})}function H(t){if(!o._canPlaySrc(t)){c.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},o.dispatchEvent("error");return}c.src=t,h&&T();if(!a()){f(function(){H(t)});return}h=!1,SC.get("/resolve",{url:t},function(t){l.id=e.guid("soundcloud-"),l.width=c.width,l.height=c.height,l.frameBorder=0,l.webkitAllowFullScreen=!0,l.mozAllowFullScreen=!0,l.allowFullScreen=!0,q(c.controls),u.appendChild(l),l.onload=function(){l.onload=null,d=SC.Widget(l),d.bind(SC.Widget.Events.READY,E),c.networkState=o.NETWORK_LOADING,o.dispatchEvent("loadstart"),o.dispatchEvent("progress")},l.src="https://w.soundcloud.com/player/?url="+t.uri+"&show_artwork=false"+"&buying=false"+"&liking=false"+"&sharing=false"+"&download=false"+"&show_comments=false"+"&show_user=false"+"&single_active=false"})}function B(e){c.volume=e;if(!h){b(function(){B(e)});return}d.setVolume(e),o.dispatchEvent("volumechange")}function j(){return c.muted>0?c.muted:c.volume}function F(e){if(!h){c.muted=e?1:0,b(function(){F(e)});return}e?(c.muted=c.volume,B(0)):(c.muted=0,B(c.muted))}function I(){return c.muted>0}function q(e){h?(l.style.position="absolute",l.style.visibility=e?"visible":"hidden"):(l.style.opacity=e?"1":"0",l.style.pointerEvents=e?"auto":"none"),c.controls=e}if(!t.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";var o=this,u=typeof s=="string"?e.dom.find(s):s,l=n.createElement("iframe"),c={src:i,networkState:o.NETWORK_EMPTY,readyState:o.HAVE_NOTHING,seeking:!1,autoplay:i,preload:i,controls:!1,loop:!1,poster:i,volume:100,muted:0,currentTime:0,duration:NaN,ended:!1,paused:!0,width:u.width|0?u.width:o._util.MIN_WIDTH,height:u.height|0?u.height:o._util.MIN_HEIGHT,error:null},h=!1,p=!0,d,v=[],m,g,y=0;o._eventNamespace=e.guid("HTMLSoundCloudAudioElement::"),o.parentNode=u,o._util.type="SoundCloud",o.play=function(){c.paused=!1;if(!h){b(function(){o.play()});return}c.ended&&N(0),d.play()},o.pause=function(){c.paused=!0;if(!h){b(function(){o.pause()});return}d.pause()},Object.defineProperties(o,{src:{get:function(){return c.src},set:function(e){e&&e!==c.src&&H(e)}},autoplay:{get:function(){return c.autoplay},set:function(e){c.autoplay=o._util.isAttributeSet(e)}},loop:{get:function(){return c.loop},set:function(e){c.loop=o._util.isAttributeSet(e)}},width:{get:function(){return l.width},set:function(e){l.width=e,c.width=l.width}},height:{get:function(){return l.height},set:function(e){l.height=e,c.height=l.height}},currentTime:{get:function(){return c.currentTime},set:function(e){N(e)}},duration:{get:function(){return c.duration}},ended:{get:function(){return c.ended}},paused:{get:function(){return c.paused}},seeking:{get:function(){return c.seeking}},readyState:{get:function(){return c.readyState}},networkState:{get:function(){return c.networkState}},volume:{get:function(){var e=j();return e/100},set:function(e){if(e<0||e>1)throw"Volume value must be between 0.0 and 1.0";e*=100,B(e)}},muted:{get:function(){return I()},set:function(e){F(o._util.isAttributeSet(e))}},error:{get:function(){return c.error}},controls:{get:function(){return c.controls},set:function(e){q(!!e)}}})}var r=16,i="",s=!1,o=!1,u=[];l.prototype=new e._MediaElementProto,l.prototype._canPlaySrc=function(e){return/(?:https?:\/\/www\.|https?:\/\/|www\.|\.|^)(soundcloud)/.test(e)?"probably":i},l.prototype.canPlayType=function(e){return e==="audio/x-soundcloud"?"probably":i},e.HTMLSoundCloudAudioElement=function(e){return new l(e)},e.HTMLSoundCloudAudioElement._canPlaySrc=l.prototype._canPlaySrc}(Popcorn,window,document),define("popcorn.HTMLSoundCloudAudioElement",function(){}),function(e,t){t.player("soundcloud",{_canPlayType:function(e,n){return typeof n=="string"&&t.HTMLSoundCloudAudioElement._canPlaySrc(n)&&e.toLowerCase()!=="audio"}}),t.soundcloud=function(e,n,r){typeof console!="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var i=t.HTMLSoundCloudAudioElement(e),s=t(i,r);return setTimeout(function(){i.src=n},0),s}}(window,Popcorn),define("popcorn.soundcloud",function(){}),function(e,t,n){function o(e){function s(t,n){var i=JSON.stringify({method:t,value:n});if(!e.contentWindow)return;e.contentWindow.postMessage(i,r)}var n=this,r=e.src.split("?")[0],i=0;r.substr(0,2)==="//"&&(r=t.location.protocol+r);var o="play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ");o.forEach(function(e){n[e]=function(t){s(e,t)}})}function u(u){function b(e){v.unshift(e)}function w(e){d.addEventListener("loadProgress"),d.addEventListener("playProgress"),d.addEventListener("play"),d.addEventListener("pause"),d.addEventListener("finish"),d.addEventListener("seek"),d.getDuration(),c.networkState=a.NETWORK_LOADING,a.dispatchEvent("loadstart"),a.dispatchEvent("progress")}function E(e){var t=c.duration;if(t!==e){c.duration=e,a.dispatchEvent("durationchange");if(isNaN(t)){c.networkState=a.NETWORK_IDLE,c.readyState=a.HAVE_METADATA,a.dispatchEvent("loadedmetadata"),a.dispatchEvent("loadeddata"),c.readyState=a.HAVE_FUTURE_DATA,a.dispatchEvent("canplay"),c.readyState=a.HAVE_ENOUGH_DATA,a.dispatchEvent("canplaythrough"),c.autoplay&&a.play();var n=v.length;while(n--)v[n](),delete v[n]}}}function S(){h||b(function(){S()}),d.getDuration()}function x(){if(!h||!d)return;clearInterval(g),d.pause(),t.removeEventListener("message",D,!1),f.removeChild(l),l=n.createElement("iframe")}function T(e){if(!h){b(function(){T(e)});return}N(),d.seekTo(e)}function N(){c.seeking=!0,a.dispatchEvent("seeking")}function C(){c.seeking=!1,a.dispatchEvent("timeupdate"),a.dispatchEvent("seeked"),a.dispatchEvent("canplay"),a.dispatchEvent("canplaythrough")}function k(){c.paused=!0,clearInterval(m),a.dispatchEvent("pause")}function L(){a.dispatchEvent("timeupdate")}function A(){c.ended&&T(0),g||(g=setInterval(P,r),c.loop&&a.dispatchEvent("play")),m=setInterval(L,a._util.TIMEUPDATE_MS),c.paused&&(c.paused=!1,c.loop||a.dispatchEvent("play"),a.dispatchEvent("playing"))}function O(){c.loop?(T(0),a.play()):(c.ended=!0,a.dispatchEvent("ended"))}function M(e){var t=c.currentTime=e;t!==y&&a.dispatchEvent("timeupdate"),y=c.currentTime}function _(e){if(e.origin!==s)return;var n;try{n=JSON.parse(e.data)}catch(r){console.warn(r)}if(n.player_id!=p)return;switch(n.event){case"ready":d=new o(l),d.addEventListener("loadProgress"),d.addEventListener("pause"),d.setVolume(0),d.play();break;case"loadProgress":var i=parseFloat(n.data.duration);i>0&&!h&&(h=!0,d.pause());break;case"pause":d.setVolume(1),t.removeEventListener("message",_,!1),t.addEventListener("message",D,!1),w()}}function D(e){if(e.origin!==s)return;var t;try{t=JSON.parse(e.data)}catch(n){console.warn(n)}if(t.player_id!=p)return;switch(t.method){case"getCurrentTime":M(parseFloat(t.value));break;case"getDuration":E(parseFloat(t.value));break;case"getVolume":B(parseFloat(t.value))}switch(t.event){case"loadProgress":a.dispatchEvent("progress"),E(parseFloat(t.data.duration));break;case"playProgress":M(parseFloat(t.data.seconds));break;case"play":A();break;case"pause":k();break;case"finish":O();break;case"seek":M(parseFloat(t.data.seconds)),C(),c.paused&&a.pause()}}function P(){d.getCurrentTime()}function H(e){if(!a._canPlaySrc(e)){c.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},a.dispatchEvent("error");return}c.src=e,h&&x(),h=!1;var n=a._util.parseUri(e),r=n.queryKey,i,o=["api=1","player_id="+p,"title=0","byline=0","portrait=0"];c.loop=r.loop==="1"||c.loop,delete r.loop,c.autoplay=r.autoplay==="1"||c.autoplay,delete r.autoplay,n=s+"/video/"+/\d+$/.exec(n.path)+"?";for(i in r)r.hasOwnProperty(i)&&o.push(encodeURIComponent(i)+"="+encodeURIComponent(r[i]));n+=o.join("&"),l.id=p,l.style.width="100%",l.style.height="100%",l.frameBorder=0,l.webkitAllowFullScreen=!0,l.mozAllowFullScreen=!0,l.allowFullScreen=!0,f.appendChild(l),l.src=n,t.addEventListener("message",_,!1)}function B(e){c.volume!==e&&(c.volume=e,a.dispatchEvent("volumechange"))}function j(e){c.volume=e;if(!h){b(function(){j(e)});return}d.setVolume(e),a.dispatchEvent("volumechange")}function F(){return c.muted>0?c.muted:c.volume}function I(e){if(!h){c.muted=e?1:0,b(function(){I(e)});return}e?(c.muted=c.volume,j(0)):(c.muted=0,j(c.muted))}function q(){return c.muted>0}if(!t.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var a=this,f=typeof u=="string"?e.dom.find(u):u,l=n.createElement("iframe"),c={src:i,networkState:a.NETWORK_EMPTY,readyState:a.HAVE_NOTHING,seeking:!1,autoplay:i,preload:i,controls:!1,loop:!1,poster:i,volume:1,muted:0,currentTime:0,duration:NaN,ended:!1,paused:!0,error:null},h=!1,p=e.guid(),d,v=[],m,g,y=0;a._eventNamespace=e.guid("HTMLVimeoVideoElement::"),a.parentNode=f,a._util.type="Vimeo",a.play=function(){if(!h){b(function(){a.play()});return}d.play()},a.pause=function(){if(!h){b(function(){a.pause()});return}d.pause()},Object.defineProperties(a,{src:{get:function(){return c.src},set:function(e){e&&e!==c.src&&H(e)}},autoplay:{get:function(){return c.autoplay},set:function(e){c.autoplay=a._util.isAttributeSet(e)}},loop:{get:function(){return c.loop},set:function(e){c.loop=a._util.isAttributeSet(e)}},width:{get:function(){return a.parentNode.offsetWidth}},height:{get:function(){return a.parentNode.offsetHeight}},currentTime:{get:function(){return c.currentTime},set:function(e){T(e)}},duration:{get:function(){return c.duration}},ended:{get:function(){return c.ended}},paused:{get:function(){return c.paused}},seeking:{get:function(){return c.seeking}},readyState:{get:function(){return c.readyState}},networkState:{get:function(){return c.networkState}},volume:{get:function(){return F()},set:function(e){if(e<0||e>1)throw"Volume value must be between 0.0 and 1.0";j(e)}},muted:{get:function(){return q()},set:function(e){I(a._util.isAttributeSet(e))}},error:{get:function(){return c.error}}})}var r=16,i="",s="https://player.vimeo.com";u.prototype=new e._MediaElementProto,u.prototype.constructor=u,u.prototype._canPlaySrc=function(e){return/player.vimeo.com\/video\/\d+/.test(e)||/vimeo.com\/\d+/.test(e)?"probably":i},u.prototype.canPlayType=function(e){return e==="video/x-vimeo"?"probably":i},e.HTMLVimeoVideoElement=function(e){return new u(e)},e.HTMLVimeoVideoElement._canPlaySrc=u.prototype._canPlaySrc}(Popcorn,window,document),define("popcorn.HTMLVimeoVideoElement",function(){}),function(e,t){t.player("vimeo",{_canPlayType:function(e,n){return typeof n=="string"&&t.HTMLVimeoVideoElement._canPlaySrc(n)}}),t.vimeo=function(e,n,r){typeof console!="undefined"&&console.warn&&console.warn("Deprecated player 'vimeo'. Please use Popcorn.HTMLVimeoVideoElement directly.");var i=t.HTMLVimeoVideoElement(e),s=t(i,r);return setTimeout(function(){i.src=n},0),s}}(window,Popcorn),define("popcorn.vimeo",function(){}),function(e,t,n){function l(){var e;if(YT.loaded){u=!0;while(f.length)e=f.shift(),e()}else setTimeout(l,250)}function c(){var e;return a||(t.YT?l():(e=n.createElement("script"),e.addEventListener("load",l,!1),e.src="https://www.youtube.com/iframe_api",n.head.appendChild(e)),a=!0),u}function h(e){f.push(e)}function p(u){function N(e){b.push(e)}function C(){g.pauseVideo(),P("play",C),D("play",$)}function k(){D("pause",K),P("pause",k)}function L(e){var t=function(){g.isMuted()?(D("play",_),g.playVideo()):setTimeout(t,0)};d=!0,g.mute(),t()}function A(e){var t={name:"MediaError"};switch(e.data){case 2:t.message="Invalid video parameter.",t.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:t.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",t.code=MediaError.MEDIA_ERR_DECODE;case 100:t.message="Video not found.",t.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:t.message="Video not usable.",t.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:t.message="Unknown error.",t.code=5}p.error=t,a.dispatchEvent("error")}function O(){D("play",$),D("pause",K);if(p.autoplay||!p.paused)P("play",O),p.paused=!1,N(function(){p.paused||$()});p.muted||g.unMute(),p.readyState=a.HAVE_METADATA,a.dispatchEvent("loadedmetadata"),x=setInterval(q,r),a.dispatchEvent("loadeddata"),p.readyState=a.HAVE_FUTURE_DATA,a.dispatchEvent("canplay"),v=!0,E=setInterval(R,50);while(b.length)b[0](),b.shift();p.readyState=a.HAVE_ENOUGH_DATA,a.dispatchEvent("canplaythrough")}function M(){P("pause",M);if(g.getCurrentTime()>0){setTimeout(M,0);return}p.autoplay||!p.paused?(D("play",O),g.playVideo()):O()}function _(){P("play",_);if(g.getCurrentTime()===0){setTimeout(_,0);return}D("pause",M),g.seekTo(0),g.pauseVideo()}function D(e,t){a.addEventListener("youtube-"+e,t,!1)}function P(e,t){a.removeEventListener("youtube-"+e,t,!1)}function H(e){a.dispatchEvent("youtube-"+e)}function B(){p.networkState=a.NETWORK_LOADING,a.dispatchEvent("waiting")}function j(e){switch(e.data){case YT.PlayerState.ENDED:H("ended");break;case YT.PlayerState.PLAYING:H("play");break;case YT.PlayerState.PAUSED:g.getDuration()!==g.getCurrentTime()&&H("pause");break;case YT.PlayerState.BUFFERING:H("buffering");break;case YT.PlayerState.CUED:}e.data!==YT.PlayerState.BUFFERING&&w===YT.PlayerState.BUFFERING&&J(),w=e.data}function F(){if(!d||!g)return;P("buffering",B),P("ended",Q),P("play",$),P("pause",K),K(),v=!1,m=!1,p.currentTime=0,b=[],clearInterval(x),clearInterval(E),g.stopVideo(),g.clearVideo(),g.destroy(),l=n.createElement("div")}function I(n){if(!a._canPlaySrc(n)){p.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},a.dispatchEvent("error");return}p.src=n;if(!c()){h(function(){I(n)});return}if(d){if(!v){N(function(){I(n)});return}F()}f.appendChild(l);var r=a._util.parseUri(n).queryKey;delete r.v,p.autoplay=r.autoplay==="1"||p.autoplay,delete r.autoplay,p.loop=r.loop==="1"||p.loop,delete r.loop,r.rel=r.rel||0,r.modestbranding=r.modestbranding||1,r.iv_load_policy=r.iv_load_policy||3,r.showinfo=r.showinfo||0;var i=t.location.protocol==="file:"?"*":t.location.protocol+"//"+t.location.host;r.origin=r.origin||i,r.controls=r.controls||p.controls?2:0,p.controls=r.controls,r.wmode=r.wmode||"opaque",n=s.exec(n)[1];var o="https://gdata.youtube.com/feeds/api/videos/"+n+"?v=2&alt=jsonc&callback=?";e.getJSONP(o,function(e){var t="failed to retreive duration data, reason: ";if(e.error){console.warn(t+e.error.message);return}if(!e.data){console.warn(t+"no response data");return}p.duration=e.data.duration,a.dispatchEvent("durationchange"),g=new YT.Player(l,{width:"100%",height:"100%",wmode:r.wmode,videoId:n,playerVars:r,events:{onReady:L,onError:A,onStateChange:j}}),p.networkState=a.NETWORK_LOADING,a.dispatchEvent("loadstart"),a.dispatchEvent("progress")})}function q(){var e=g.getCurrentTime();p.seeking?o(e-p.currentTime)<1&&V():(o(p.currentTime-e)>r&&(X(),V()),p.currentTime=e)}function R(){var e=g.getVideoLoadedFraction();e&&S!==e&&(S=e,J())}function U(){return p.currentTime}function z(e){p.currentTime=e;if(!v){N(function(){X(),g.seekTo(e)});return}X(),g.seekTo(e)}function W(){a.dispatchEvent("timeupdate")}function X(){D("pause",k),P("pause",K),p.seeking=!0,a.dispatchEvent("seeking")}function V(){p.ended=!1,p.seeking=!1,a.dispatchEvent("timeupdate"),a.dispatchEvent("seeked"),a.dispatchEvent("canplay"),a.dispatchEvent("canplaythrough")}function $(){p.ended&&(z(0),p.ended=!1),T=setInterval(W,a._util.TIMEUPDATE_MS),p.paused=!1;if(y){y=!1;if(p.loop&&!m||!p.loop)m=!0,a.dispatchEvent("play");a.dispatchEvent("playing")}}function J(){a.dispatchEvent("progress")}function K(){p.paused=!0,y||(y=!0,clearInterval(T),a.dispatchEvent("pause"))}function Q(){p.loop?(z(0),a.play()):(p.ended=!0,K(),D("play",C),P("play",$),a.dispatchEvent("timeupdate"),a.dispatchEvent("ended"))}function G(e){p.muted=e;if(!v){N(function(){G(p.muted)});return}g[e?"mute":"unMute"](),a.dispatchEvent("volumechange")}function Y(){return p.muted}if(!t.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";var a=this,f=typeof u=="string"?n.querySelector(u):u,l=n.createElement("div"),p={src:i,networkState:a.NETWORK_EMPTY,readyState:a.HAVE_NOTHING,seeking:!1,autoplay:i,preload:i,controls:!1,loop:!1,poster:i,volume:1,muted:!1,currentTime:0,duration:NaN,ended:!1,paused:!0,error:null},d=!1,v=!1,m=!1,g,y=!0,b=[],w=-1,E,S=0,x,T;a._eventNamespace=e.guid("HTMLYouTubeVideoElement::"),a.parentNode=f,a._util.type="YouTube",D("buffering",B),D("ended",Q),a.play=function(){p.paused=!1;if(!v){N(function(){a.play()});return}g.playVideo()},a.pause=function(){p.paused=!0;if(!v){N(function(){a.pause()});return}k(),g.pauseVideo()},Object.defineProperties(a,{src:{get:function(){return p.src},set:function(e){e&&e!==p.src&&I(e)}},autoplay:{get:function(){return p.autoplay},set:function(e){p.autoplay=a._util.isAttributeSet(e)}},loop:{get:function(){return p.loop},set:function(e){p.loop=a._util.isAttributeSet(e)}},width:{get:function(){return a.parentNode.offsetWidth}},height:{get:function(){return a.parentNode.offsetHeight}},currentTime:{get:function(){return U()},set:function(e){z(e)}},duration:{get:function(){return p.duration}},ended:{get:function(){return p.ended}},paused:{get:function(){return p.paused}},seeking:{get:function(){return p.seeking}},readyState:{get:function(){return p.readyState}},networkState:{get:function(){return p.networkState}},volume:{get:function(){return p.volume},set:function(e){if(e<0||e>1)throw"Volume value must be between 0.0 and 1.0";p.volume=e;if(!v){N(function(){a.volume=e});return}g.setVolume(p.volume*100),a.dispatchEvent("volumechange")}},muted:{get:function(){return Y()},set:function(e){G(a._util.isAttributeSet(e))}},error:{get:function(){return p.error}},buffered:{get:function(){var e={start:function(e){if(e===0)return 0;throw"INDEX_SIZE_ERR: DOM Exception 1"},end:function(e){if(e===0)return p.duration?p.duration*S:0;throw"INDEX_SIZE_ERR: DOM Exception 1"}};return Object.defineProperties(e,{length:{get:function(){return 1}}}),e}}})}var r=10,i="",s=/^.*(?:\/|v=)(.{11})/,o=Math.abs,u=!1,a=!1,f=[];p.prototype=new e._MediaElementProto,p.prototype.constructor=p,p.prototype._canPlaySrc=function(e){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu).*(?:\/|v=)(.{11})/.test(e)?"probably":i},p.prototype.canPlayType=function(e){return e==="video/x-youtube"?"probably":i},e.HTMLYouTubeVideoElement=function(e){return new p(e)},e.HTMLYouTubeVideoElement._canPlaySrc=p.prototype._canPlaySrc}(Popcorn,window,document),define("popcorn.HTMLYouTubeVideoElement",function(){}),function(e,t){var n=function(e,n){return typeof n=="string"&&t.HTMLYouTubeVideoElement._canPlaySrc(n)};t.player("youtube",{_canPlayType:n}),t.youtube=function(e,n,r){typeof console!="undefined"&&console.warn&&console.warn("Deprecated player 'youtube'. Please use Popcorn.HTMLYouTubeVideoElement directly.");var i=t.HTMLYouTubeVideoElement(e),s=t(i,r);return setTimeout(function(){i.src=n},0),s},t.youtube.canPlayType=n}(window,Popcorn),define("popcorn.youtube",function(){});var googleCallback;(function(e){function u(){document.body?(n=!0,e.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){u()},10)}function a(e,t,n){var r=e.type?e.type.toUpperCase():"ROADMAP",i;if(r==="STAMEN-WATERCOLOR"||r==="STAMEN-TERRAIN"||r==="STAMEN-TONER")i=r.replace("STAMEN-","").toLowerCase();var s=new google.maps.Map(t,{mapTypeId:i?i:google.maps.MapTypeId[r],mapTypeControlOptions:{mapTypeIds:[]},streetViewControl:!1,panControl:!1});return google.maps.event.addListenerOnce(s,"idle",function(){n.emit("googlemaps-loaded")}),i&&s.mapTypes.set(i,new google.maps.StamenMapType(i)),s}var t="/external/stamen/tile.stamen-1.2.0.js",n=!1,r=!1,i={},s=100,o;window.googleCallback=function(n){typeof google!="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng?(o=new google.maps.Geocoder,e.getScript(t,function(){r=!0})):setTimeout(function(){googleCallback(n)},10)},e.plugin("googlemap",function(t){function m(e,n){if(!l)return;n===google.maps.GeocoderStatus.OK?(t.lat=e[0].geometry.location.lat(),t.lng=e[0].geometry.location.lng(),i[t.location]=h=e[0].geometry.location,c=a(t,l,d)):n===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?setTimeout(function(){o.geocode({address:t.location},m)},s):console.warn("Google maps geocoder returned status: "+n)}if(t._map)return;var f,l,c,h,p=e.dom.find(t.target),d=this,v=!1,g=function(){r?l&&(t.location?(h=i[t.location],h?c=a(t,l,d):o.geocode({address:t.location},m)):(h=new google.maps.LatLng(t.lat,t.lng),c=c=a(t,l,d))):setTimeout(function(){g()},5)};return{_setup:function(t){p||(p=d.media.parentNode),t._target=p,t.type=t.type||"ROADMAP",t.lat=t.lat||0,t.lng=t.lng||0,n||u(),l=document.createElement("div"),l.style.width="100%",l.style.height="100%",f=document.createElement("div"),f.id=e.guid("googlemap"),f.style.width=t.width+"%",f.style.height=t.height+"%",f.style.left=t.left+"%",f.style.top=t.top+"%",f.style.zIndex=+t.zindex,f.style.position="absolute",f.classList.add(t.transition),f.classList.add("off"),f.appendChild(l),t._container=f,p&&p.appendChild(f),g(),t.toString=function(){return t.type==="STREETVIEW"?"Streeview":t.location||(t.lat&&t.lng?t.lat+", "+t.lng:t._natives.manifest.options.location["default"])}},start:function(e,t){var n=this,r,i,s=22,o=t._natives.manifest.options.zoom["default"],u=12,a=t._natives.manifest.options.pitch["default"],p=12,d=t._natives.manifest.options.heading["default"],m=function(){function e(r,i){var s=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var i=n.media.currentTime;if(typeof t.tween=="object"){for(var o=0,u=r.length;o<u;o++){var a=r[o];i>=a.interval*(o+1)/1e3&&(i<=a.interval*(o+2)/1e3||i>=a.interval*u/1e3)&&(x.setPosition(new google.maps.LatLng(a.position.lat,a.position.lng)),x.setPov({heading:a.pov.heading||s(a,r[o+1])||0,zoom:a.pov.zoom||0,pitch:a.pov.pitch||0}))}e(r,r[0].interval)}else{for(var f=0,l=r.length;f<l;f++){var c=t.interval;i>=c*(f+1)/1e3&&(i<=c*(f+2)/1e3||i>=c*l/1e3)&&(g.setPov({heading:s(r[f],r[f+1])||0,zoom:t.zoom,pitch:t.pitch||0}),g.setPosition(y[f]))}e(y,t.interval)}},i)}if(c&&!v){t._map=c,v=!0,f.classList.remove("off"),f.classList.add("on"),google.maps.event.trigger(c,"resize"),c.setCenter(h),t.zoom&&typeof t.zoom!="number"&&(t.zoom=+t.zoom>=0&&+t.zoom<=s?+t.zoom:o),c.setZoom(t.zoom),t.heading&&typeof t.heading!="number"&&(t.heading=+t.heading>=0&&+t.heading<=p?+t.heading:d),t.pitch&&typeof t.pitch!="number"&&(t.pitch=+t.pitch>=0&&+t.pitch<=u?+t.pitch:a);if(t.type==="STREETVIEW"){c.setStreetView(r=new google.maps.StreetViewPanorama(l,{position:h,pov:{heading:t.heading,pitch:t.pitch,zoom:t.zoom},enableCloseButton:!1}));if(t.location&&typeof t.tween=="string"){var g=r,y=[],b=new google.maps.DirectionsService,w=new google.maps.DirectionsRenderer(g),E={origin:t.location,destination:t.tween,travelMode:google.maps.TravelMode.DRIVING};b.route(E,function(e,t){t===google.maps.DirectionsStatus.OK&&(w.setDirections(e),S(e,n))});var S=function(n){var r=n.routes[0].overview_path;for(var i=0,s=r.length;i<s;i++)y.push(new google.maps.LatLng(r[i].lat(),r[i].lng()));t.interval=t.interval||1e3,e(y,10)}}else if(typeof t.tween=="object"){var x=r;for(var T=0,N=t.tween.length;T<N;T++)t.tween[T].interval=t.tween[T].interval||1e3,e(t.tween,10)}}t.onmaploaded&&c&&t.onmaploaded(t,c)}else v?(f.classList.remove("off"),f.classList.add("on"),f.style.display="none",i=f.offsetHeight,f.style.display=""):setTimeout(function(){m()},50)};m()},end:function(){c&&(f.classList.remove("on"),f.classList.add("off"))},_teardown:function(e){e._target.removeChild(f),l=c=h=null,e._map=null},_update:function(e,t){function p(e,t,n,r,i){var s=new google.maps.StreetViewService;s.getPanoramaByLocation(e,t,function(e,t){t===google.maps.StreetViewStatus.OK?i(e.location.latLng):d.emit("googlemaps-zero-results",{error:n,toggleMaps:r})})}var n=!1,r=e._map,s=!1,u=!1,a=!1,l,c,h;t.type&&t.type!==e.type&&(h=e.type,t.type!=="STREETVIEW"?(e.type=t.type,h==="STREETVIEW"&&r.streetView.setVisible(!1),/STAMEN/.test(e.type)&&(c=e.type.toLowerCase()),r.setMapTypeId(c?c:google.maps.MapTypeId[e.type]),c&&r.mapTypes.set(c,new google.maps.StamenMapType(c.replace("stamen-","")))):(u=!0,e.location="",p(r.getCenter(),5e3,"There is no Street View data available within 5 kilometres of your map's centre. Try moving the map and selecting Street View again.",!0,function(n){e.type=t.type,e.heading=0,e.pitch=0,e.zoom=t.zoom,r.streetView.setVisible(!0),r.streetView.setPosition(n),r.streetView.setPov({heading:e.heading,pitch:e.pitch,zoom:e.zoom})}))),!u&&t.zoom&&t.zoom!==e.zoom&&(e.zoom=t.zoom,e.type!=="STREETVIEW"?r.setZoom(+e.zoom):r.streetView.setPov({heading:e.heading,pitch:e.pitch,zoom:+e.zoom})),!u&&t.location&&t.location!==e.location&&(n=!0,l=i[t.location],e.location=t.location,l?e.type==="STREETVIEW"?p(l,250,!1,"There is no Street View data available within 250 metres of the searched location. Try another location",function(e){r.streetView.setPosition(e)}):r.panTo(l):o.geocode({address:e.location},function(t,n){n===google.maps.GeocoderStatus.OK&&(i[e.location]=l=t[0].geometry.location,e.type==="STREETVIEW"?p(l,250,"There is no Street View data available within 250 metres of the searched location. Try another location",!1,function(e){r.streetView.setPosition(e)}):r.panTo(l))})),!u&&!n&&t.lat&&t.lat!==e.lat&&(e.lat=t.lat,a=!0),!u&&!n&&t.lng&&t.lng!==e.lng&&(e.lng=t.lng,a=!0),a&&(e.location=""),!u&&e.type==="STREETVIEW"&&t.heading&&t.heading!==e.heading&&(e.heading=t.heading,r.getStreetView().setPov({heading:+e.heading,pitch:+e.pitch||0,zoom:+e.zoom||0})),!u&&e.type==="STREETVIEW"&&t.pitch&&t.pitch!==e.pitch&&(e.pitch=t.pitch,r.getStreetView().setPov({heading:+e.heading||0,pitch:+e.pitch,zoom:+e.zoom||0})),(t.left||t.left===0)&&t.left!==e.left&&(e.left=t.left,e._container.style.left=e.left+"%"),(t.top||t.top===0)&&t.top!==e.top&&(e.top=t.top,e._container.style.top=e.top+"%"),t.fullscreen?e.fullscreen=!0:e.fullscreen=!1,(t.height||t.height===0)&&t.height!==e.height&&(e.height=t.height,e._container.style.height=e.height+"%",s=!0),(t.width||t.width===0)&&t.width!==e.width&&(e.width=t.width,e._container.style.width=e.width+"%",s=!0),s&&google.maps.event.trigger(r,"resize"),t.transition&&t.transition!==e.transition&&(f.classList.remove(e.transition),e.transition=t.transition,f.classList.add(e.transition))}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob, Matthew Schranz @mjschranz",website:"annasob.wordpress.com, http://github.com/mjschranz",attribution:'Map tiles by <a target="_blank" href="http://stamen.com">Stamen Design</a>,under <a target="_blank" href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a target="_blank" href="http://openstreetmap.org">OpenStreetMap</a>, under <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'},options:{start:{elem:"input",type:"text",label:"Start",units:"seconds"},end:{elem:"input",type:"text",label:"End",units:"seconds"},type:{elem:"select",options:["Road Map","Satellite","Street View","Hybrid","Terrain","Stamen - Water Color","Stamen - Terrain","Stamen - Toner"],values:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type","default":"ROADMAP",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},fullscreen:{elem:"input",type:"checkbox",label:"Fullscreen","default":!1,optional:!0},heading:{elem:"input",type:"number",label:"Heading","default":0,optional:!0},pitch:{elem:"input",type:"number",label:"Pitch","default":1,optional:!0},zoom:{elem:"input",type:"number",step:"1",label:"Zoom","default":10,optional:!0},transition:{elem:"select",options:["None","Pop","Fade","Slide Up","Slide Down"],values:["popcorn-none","popcorn-pop","popcorn-fade","popcorn-slide-up","popcorn-slide-down"],label:"Transition","default":"popcorn-fade"},left:{elem:"input",type:"number",label:"Left",units:"%","default":15,hidden:!0},top:{elem:"input",type:"number",label:"Top",units:"%","default":15,hidden:!0},width:{elem:"input",type:"number",label:"Width",units:"%","default":70,hidden:!0},height:{elem:"input",type:"number",label:"height",units:"%","default":70,hidden:!0},lat:{elem:"input",type:"number",label:"Lat",optional:!0,hidden:!0},lng:{elem:"input",type:"number",label:"Lng",optional:!0,hidden:!0},zindex:{hidden:!0}}})})(Popcorn),define("popcorn.googlemap",function(){}),function(e){function l(n,i,s,u){var f=r+t+"&page=1&per_page="+a;s&&typeof s!="function"&&(f+="&user_id="+s),n&&(f+="&tags="+window.encodeURIComponent(n)),f+=o,e.getJSONP(f,function(e){var t=u||s;t(e,f)})}function c(n,r,s){var u,f,l,c,h;if(isNaN(n)){if(n.indexOf("flickr.com")===-1){s.emit("invalid-flickr-image");return}u=n.split("/");for(h=0,f=u.length;h<f;h++){l=u[h];if(!isNaN(l)&&l!==""){n=l;break}}}c=i+"&photoset_id="+n+"&per_page="+a+t+o,e.getJSONP(c,function(e){r(e,c)})}function h(e,t,n){var r=[],i=0,s=e,o=t/n;while(i<n)r.push({"in":s=Math.round((e+o*i++)*100)/100,out:i<n?Math.round((s+o)*100)/100:e+t});return r}function p(e,t){return typeof e=="number"?e:t}function d(e,t,n){var r=document.createElement("div"),i=document.createElement("a");return r.style.backgroundImage='url( "'+e+'" )',r.classList.add("image-plugin-img"),t&&t.match(f)&&(i.setAttribute("href",t),i.onclick=function(){n.media.pause()}),i.setAttribute("target","_blank"),i.classList.add("image-plugin-link"),i.appendChild(r),i}var t="&api_key=b939e5bd8aa696db965888a31b2f1964",n=window.location.protocol==="https:"?"https://secure.flickr.com/services/":"http://api.flickr.com/services/",r=n+"rest/?method=flickr.photos.search&extras=url_m&media=photos&safe_search=1",i=n+"rest/?method=flickr.photosets.getPhotos&extras=url_m&media=photos",s=n+"rest/?method=flickr.photos.getSizes",o="&format=json&jsoncallback=flickr",u="flickr.com/photos/",a=100,f=/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/;e.plugin("image",{_setup:function(n){function y(){i.appendChild(v),m=v.querySelector(".image-plugin-img"),m.style.left=p(n.innerLeft,"0")+"%",m.style.top=p(n.innerTop,"0")+"%",n.innerHeight&&(m.style.height=p(n.innerHeight,"0")+"%"),n.innerWidth&&(m.style.width=p(n.innerWidth,"0")+"%"),n.link=v,n.image=m}var r,i,f,v,m,g=this;n._target=r=e.dom.find(n.target),n._container=i=document.createElement("div"),i.classList.add("image-plugin-container"),i.style.width=p(n.width,"100")+"%",i.style.height=p(n.height,"100")+"%",i.style.top=p(n.top,"0")+"%",i.style.left=p(n.left,"0")+"%",i.style.zIndex=+n.zindex,i.classList.add(n.transition),i.classList.add("off");if(r){r.appendChild(i);if(n.src)if(n.src.indexOf(u)>-1){var b=n.src,w,E,S,x,T,N;w=b.split("/");for(N=0,S=w.length;N<S;N++){b=w[N];if(!isNaN(b)&&b!==""){T=b;break}}E=s+t+"&photo_id="+T+o,x=function(e){e.stat==="ok"&&(v=d(e.sizes.size[e.sizes.size.length-2].source,n.linkSrc,g),y())},e.getJSONP(E,x)}else v=d(n.src,n.linkSrc,g),y();else{var C=[],k,L=[];n._updateImage=function(){var e,t,n=g.currentTime(),r=L.length-1;for(;r>=0;r--){e=C[r],t=L[r];if(e&&n>=e["in"]&&n<e.out&&t.classList.contains("image-plugin-hidden")){k&&k.classList.add("image-plugin-hidden"),t.classList.remove("image-plugin-hidden"),k=t;break}}},f=function(t,r){var s=t.photos||t.photoset,o,u,l,c;if(!s)return;l=s.total,o=s.photo;if(!o)return;for(var p=0;p<o.length;p++){if(!(n.count>L.length))break;c=o[p],u=c.media&&c.media.m||window.unescape(c.url_m),v=d(u,u,g),v.classList.add("image-plugin-hidden"),i.insertBefore(v,i.children[p]),L.push(v)}if(L.length<n.count&&s.page!==s.pages&&o.length===a)r=r.replace(/\&per\_page\=[0-9]+/,""),r+="&per_page="+s.page+1,e.getJSONP(r,function(e){f(e,r)});else{C=h(n.start,n.end-n.start,L.length);if(!L.length){g.emit("popcorn-image-failed-retrieve");return}n.count!==L.length&&(n.count=L.length,g.emit("popcorn-image-count-update",n.count)),n._updateImage(),g.currentTime()>=n.start&&g.currentTime()<=n.end&&g.on("timeupdate",n._updateImage)}},n.tags?l(n.tags,n.count||10,f):n.photosetId&&c(n.photosetId,f,g)}n.toString=function(){var e=[];return n.title?n.title:/^data:/.test(n.src)?n.src.substring(0,30)+"...":n.src?(e=n.src.split("/"),e[e.length-1]):n.tags?n.tags:n.photosetId?n.photosetId:"Image Plugin"}}},start:function(e,t){var n=t._container,r;n&&(t._updateImage&&this.on("timeupdate",t._updateImage),n.classList.add("on"),n.classList.remove("off"),n.style.display="none",r=n.offsetHeight,n.style.display="")},end:function(e,t){t._container&&(t._updateImage&&this.off("timeupdate",t._updateImage),t._container.classList.add("off"),t._container.classList.remove("on"))},_teardown:function(e){e._updateImage&&this.off(e._updateImage),e._container.parentNode.removeChild(e._container),delete e._container},manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"cadecairos",website:"https://chrisdecairos.ca/"},options:{target:"video-overlay",src:{elem:"input",type:"url",label:"Source URL","default":"https://popcorn.webmaker.org/resources/popcorn-logo.svg",FLICKR_SINGLE_CHECK:u},linkSrc:{elem:"input",type:"url",label:"Link URL",validation:f},tags:{elem:"input",type:"text",label:"Flickr: Tags",optional:!0,"default":"Mozilla"},photosetId:{elem:"input",type:"text",label:"Flickr: Photoset Id",optional:!0,"default":"http://www.flickr.com/photos/etherworks/sets/72157630563520740/"},count:{elem:"input",type:"number",label:"Flickr: Count",optional:!0,"default":3,MAX_COUNT:20},width:{elem:"input",type:"number",label:"Width","default":100,units:"%",hidden:!0},height:{elem:"input",type:"number",label:"Height","default":100,units:"%",hidden:!0},top:{elem:"input",type:"number",label:"Top","default":0,units:"%",hidden:!0},left:{elem:"input",type:"number",label:"Left","default":0,units:"%",hidden:!0},innerTop:{elem:"input",type:"number","default":0,units:"%",hidden:!0},innerLeft:{elem:"input",type:"number","default":0,units:"%",hidden:!0},innerWidth:{elem:"input",type:"number","default":0,units:"%",hidden:!0},innerHeight:{elem:"input",type:"number","default":0,units:"%",hidden:!0},title:{elem:"input",type:"text",label:"Image Title","default":""},transition:{elem:"select",options:["None","Pop","Slide Up","Slide Down","Fade"],values:["popcorn-none","popcorn-pop","popcorn-slide-up","popcorn-slide-down","popcorn-fade"],label:"Transition","default":"popcorn-fade"},start:{elem:"input",type:"text",label:"Start",units:"seconds"},end:{elem:"input",type:"text",label:"End",units:"seconds"},zindex:{hidden:!0}}}})}(window.Popcorn),define("popcorn.image",function(){}),function(e){e.plugin("loopPlugin",function(){return{_setup:function(e){e.loop=e.loop||0,e.count=+e.loop,e.toString=function(){return"Loop: "+(e.loop>0?e.count:"forever")}},start:function(){},end:function(e,t){if(this.currentTime()>t.end+1||this.currentTime()<t.end-1||this.seeking()||this.paused()&&!this.ended()){t.count=+t.loop;return}t.count>0||+t.loop===0?(this.play(t.start),t.loop&&t.count--):t.count=+t.loop}}},{displayName:"loop",options:{start:{elem:"input",type:"text",label:"In",units:"seconds"},end:{elem:"input",type:"text",label:"Out",units:"seconds"},target:{hidden:!0},loop:{label:"Number of loops (0 = forever)",elem:"input",type:"number","default":0}}})}(Popcorn),define("popcorn.loopPlugin",function(){}),function(e){e.plugin("pausePlugin",function(){var e=this,t,n=function(){t&&clearTimeout(t),this.off("seeked",n)};return{_setup:function(e){e.toString=function(){return"Pause "+(e.duration>0?e.duration:"forever")}},start:function(r,i){this.on("seeked",n),this.pause(),+i.duration>0&&(t=setTimeout(function(){e.play(),e.off("seeked",n)},i.duration*1e3))},end:function(){this.on("seeked",n)}}},{displayName:"Pause",options:{start:{elem:"input",type:"text",label:"In",units:"seconds"},end:{elem:"input",type:"text",label:"Out",units:"seconds"},duration:{elem:"input",type:"number",label:"Pause Duration (0 = forever)",units:"seconds","default":"0"},target:{hidden:!0}}})}(Popcorn),define("popcorn.pausePlugin",function(){}),function(e){function f(e,t){var n=e.getContext("2d");n.save(),n.beginPath(),n.moveTo(.4,.3),n.bezierCurveTo(.4,.3,17.8,26.3,15.1,41.9),n.bezierCurveTo(15.1,41.9,26.2,26.3,23.4,.3),n.fillStyle=o,n.fill(),n.lineWidth=t,n.stroke(),n.restore()}function l(e,t){var n=e.getContext("2d");n.save(),n.beginPath(),n.moveTo(13.5,7),n.bezierCurveTo(13.5,10.6,10.6,13.5,7,13.5),n.bezierCurveTo(3.4,13.5,.5,10.6,.5,7),n.bezierCurveTo(.5,3.4,3.4,.5,7,.5),n.bezierCurveTo(10.6,.5,13.5,3.4,13.5,7),n.closePath(),n.fillStyle=o,n.fill(),n.lineWidth=t,n.stroke(),n.beginPath(),n.moveTo(17.5,23.8),n.bezierCurveTo(17.5,26.1,15.6,28,13.2,28),n.bezierCurveTo(10.9,28,9,26.1,9,23.8),n.bezierCurveTo(9,21.4,10.9,19.5,13.2,19.5),n.bezierCurveTo(15.6,19.5,17.5,21.4,17.5,23.8),n.closePath(),n.fill(),n.lineWidth=t,n.stroke(),n.beginPath(),n.moveTo(27.5,31.8),n.bezierCurveTo(27.5,33.5,26,35,24.2,35),n.bezierCurveTo(22.5,35,21,33.5,21,31.8),n.bezierCurveTo(21,30,22.5,28.5,24.2,28.5),n.bezierCurveTo(26,28.5,27.5,30,27.5,31.8),n.closePath(),n.fill(),n.lineWidth=t,n.stroke(),n.restore()}var t={},n=[],r=0,i=2,s="/templates/assets/plugins/popup/",o="rgb(255, 255, 255)",u={},a="Tangerine";u.speech=document.createElement("canvas"),u.thought=document.createElement("canvas"),f(u.speech,2),l(u.thought,2),e.plugin("popup",{manifest:{about:{name:"Popcorn Maker Popup Plugin",version:"0.1",author:"Kate Hudson @k88hudson, Matthew Schranz @mjschranz, Brian Chirls @bchirls",website:"http://github.com/k88hudson, http://github.com/mjschranz, https://github.com/brianchirls/"},options:{start:{elem:"input",type:"text",label:"In",units:"seconds"},end:{elem:"input",type:"text",label:"Out",units:"seconds"},text:{elem:"textarea",label:"Text","default":"Pop!"},linkUrl:{elem:"input",type:"text",label:"Link URL"},linkTarget:{elem:"select",options:["New Tab","Current Tab"],values:["_blank","_parent"],label:"Open Link In","default":"_blank"},type:{elem:"select",options:["Popup","Speech","Thought Bubble"],values:["popup","speech","thought"],label:"Type","default":"popup"},triangle:{elem:"select",options:["Top Left","Top Right","Bottom Left","Bottom Right"],values:["top left","top right","bottom left","bottom right"],label:"Tail Position","default":"bottom left",optional:!0},sound:{elem:"input",type:"checkbox",label:"Sound","default":!1,optional:!0},icon:{elem:"select",options:["Error","Audio","Broken Heart","Cone","Earth","Eye","Heart","Info","Man","Money","Music","Net","Skull","Star","Thumbs Down","Thumbs Up","Time","Trophy","Tv","User","Virus","Women","None"],values:["error","audio","brokenheart","cone","earth","eye","heart","info","man","money","music","net","skull","star","thumbsdown","thumbsup","time","trophy","tv","user","virus","women","none"],label:"Pop Icon","default":"info",optional:!0},flip:{elem:"input",type:"checkbox",label:"Flip Tail?","default":!1,optional:!0},top:{elem:"input",type:"number",label:"Top",units:"%","default":5,hidden:!0},left:{elem:"input",type:"number",label:"Left",units:"%","default":20,hidden:!0},width:{elem:"input",type:"number",units:"%",label:"Width","default":30,hidden:!0},transition:{elem:"select",options:["None","Pop","Fade","Slide Up","Slide Down"],values:["popcorn-none","popcorn-pop","popcorn-fade","popcorn-slide-up","popcorn-slide-down"],label:"Transition","default":"popcorn-fade"},fontFamily:{elem:"select",label:"Font",styleClass:"",googleFonts:!0,"default":"Merriweather",group:"advanced"},fontSize:{elem:"input",type:"number",label:"Font Size",units:"px",group:"advanced"},fontPercentage:{elem:"input",type:"number",label:"Font Size","default":7,units:"%",group:"advanced"},fontColor:{elem:"input",type:"color",label:"Font colour","default":"#000000",group:"advanced"},fontDecorations:{elem:"checkbox-group",labels:{bold:"Bold",italics:"Italics",underline:"Underline"},"default":{bold:!1,italics:!1,underline:!1},group:"advanced"},zindex:{hidden:!0}}},_setup:function(e){function L(o,u){function v(){this.currentTime=0,this.pause()}var a,f,l,c,h,p,d;if(!t[o]){p=document.createElement("audio");for(a=0;a<u.length;a++)d=document.createElement("source"),d.src=s+u[a],p.appendChild(d);return p.id="popcorn-pop-sound-"+r,r++,p.preload=!0,p.style.display="none",p.addEventListener("ended",v,!1),document.body.appendChild(p),t[o]=[p],p}p=t[o][0],p.duration?c=Math.min(p.duration,i):c=i,h=t[o].slice(0);for(a=0;a<n.length;a++)l=n[a],l.sound===e.sound&&l.start<=e.start+c&&l.start+c>=e.start&&(f=h.indexOf(l.audio),f>=0&&h.splice(f,1));return h.length?p=h[0]:(p=t[o][0].cloneNode(!0),p.id="popcorn-pop-sound-"+r,r++,p.removeEventListener("ended",v,!1),p.addEventListener("ended",v,!1),document.body.appendChild(p),t[o].push(p)),p}function A(t){var n,r;t.className="speechBubble "+e.type+" "+e.triangle+" "+g,n=document.createElement("canvas"),r=n.getContext("2d"),n.width=S,n.height=x,n.className="canvas",t.appendChild(n),e.type==="speech"&&n.getContext("2d").drawImage(u.speech,0,0),e.type==="thought"&&n.getContext("2d").drawImage(u.thought,0,0)}var o=document.getElementById(e.target),f=document.createElement("div"),l=this,c,h=e.width+"%",p=e.top+"%",d=e.left+"%",v,m=e.fontFamily,g=e.flip?" flip":"",y=document.createElement("div"),b=document.createElement("div"),w=document.createElement("a"),E,S=40,x=60,T=e.text.replace(/\r?\n/gm,"<br>"),N=document.createElement("span"),C=e.linkUrl,k=e.linkTarget;o||(o=l.media.parentNode),e._target=o,f.style.position="absolute",f.style.top=p,f.style.left=d,f.style.width=h,f.style.zIndex=+e.zindex,y=document.createElement("div"),b=document.createElement("div"),b.style.fontStyle=e.fontDecorations.italics?"italic":"normal",b.style.color=e.fontColor?e.fontColor:"#668B8B",b.style.textDecoration=e.fontDecorations.underline?"underline":"none",e.fontSize?b.style.fontSize=e.fontSize+"px":b.style.fontSize=e.fontPercentage+"%",b.style.fontWeight=e.fontDecorations.bold?"bold":"normal",C?(C.match(/^http(|s):\/\//)||(C="//"+C),w=document.createElement("a"),w.href=C,w.target=k,w.innerHTML=T,w.addEventListener("click",function(){l.media.pause()},!1),w.style.color=b.style.color,N.appendChild(w)):N.innerHTML=T,b.appendChild(N),y.appendChild(b),f.appendChild(y),e.type!=="speech"&&e.type!=="thought"?(y.classList.add("popup-inner-div"),f.classList.add("popcorn-popup"),e.icon&&e.icon!=="none"&&(E=document.createElement("img"),E.setAttribute("class","popup-icon"),E.addEventListener("load",function(){var t=E.width||E.naturalWidth,n=E.height||E.naturalHeight;e.fontSize?(n>60&&(t=60*t/n,n=60,E.style.width=t+"px"),E.style.left=-(t-16)+"px",f&&f.offsetHeight&&(E.style.top=(f.offsetHeight-n)/2-4+"px")):E.classList.add("popcorn-responsive-image-position"),f&&f.insertBefore(E,f.firstChild)},!1),E.src=s+"images/"+e.icon+".png"),e.sound&&(c||(c=L("popup",["sounds/mouthpop.ogg","sounds/mouthpop.wav"]),e.audio=c))):A(y),f.classList.add(e.transition),f.classList.add("off"),o.appendChild(f),e._container=f,v=document.createElement("link"),v.rel="stylesheet",v.type="text/css",e.fontFamily=e.fontFamily?e.fontFamily:e._natives.manifest.options.fontFamily["default"],e._fontSheet=v,document.head.appendChild(v),v.onload=function(){b.style.fontFamily=e.fontFamily?m:a},v.href="//fonts.googleapis.com/css?family="+e.fontFamily.replace(/\s/g,"+"),e.toString=function(){return e.text||e._natives.manifest.options.text["default"]}},start:function(e,t){var n=t.audio,r=this.media,s=t._container,o;s&&(s.classList.add("on"),s.classList.remove("off"),s.style.display="none",o=s.offsetHeight,s.style.display=""),n&&n.duration&&!r.paused&&r.currentTime-1<t.start&&(n.volume=r.volume,n.muted=r.muted,n.play(),(!n.duration||isNaN(n.duration)||n.duration>i)&&setTimeout(function(){n.currentTime=0,n.pause()},i))},end:function(e,t){t._container&&(t._container.classList.add("off"),t._container.classList.remove("on"))},_teardown:function(e){e._container&&e._target&&e._target.removeChild(e._container),e._fontSheet&&document.head.removeChild(e._fontSheet)}})}(Popcorn),define("popcorn.popup",function(){}),function(e){function t(){if(t.instance)return t.instance;var e=document.createElement("div");return e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",e.style.visibility="hidden",document.body.appendChild(e),t.instance=e,e}var n=0,r={loading:[],compare:function(e,t){return e.start-t.start},add:function(e,t){var n=this;this.loading.push({start:e.start,end:e.end,beginLoad:t}),this.loading.sort(this.compare),this.loading.length===1&&setTimeout(function(){n.next()},0)},next:function(e){var t=0;for(var n=0;n<this.loading.length;n++)if(this.loading[n].start<=e&&this.loading[n].end>=e){t=n;break}this.loading[t]&&this.loading[t].beginLoad(),this.loading.splice(t,1)}};e.plugin("sequencer",{_setup:function(i){var s=this;i.setupContainer=function(){var t=document.createElement("div"),n=e.dom.find(i.target);n||(n=s.media.parentNode),i._target=n,i._container=t,t.style.zIndex=0,t.className="popcorn-sequencer",t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.top=0,t.style.left=0,n.appendChild(t)},i.displayLoading=function(){i.waiting||(i.waiting=!0,n++,document.querySelector(".embed").setAttribute("data-state-waiting",!0),document.querySelector(".embed").classList.add("show-loading"))},i.hideLoading=function(){i.waiting&&(i.waiting=!1,--n,n===0&&(s.emit("sequencesReady"),document.querySelector(".embed").removeAttribute("data-state-waiting"),document.querySelector(".embed").classList.remove("show-loading")))},i.setZIndex=function(){!i.hidden&&i.active?i._container.style.zIndex=+i.zindex:i._container.style.zIndex=0};if(!i.from||i.from>i.duration)i.from=0;i._volumeEvent=function(){s.muted()?i._clip.mute():i.mute?i._clip.mute():(i._clip.unmute(),i._clip.volume(i.volume/100*s.volume()))},i.readyEvent=function(){i._clip.media.style.width="100%",i._clip.media.style.height="100%",i._container.style.width="100%",i._container.style.height="100%",i._cancelLoad&&(i.playIfReady(),i._cancelLoad=!1,i.tearDown()),i.failed=!1,i._clip.off("error",i.fail),i._clip.off("loadedmetadata",i.readyEvent),i.ready=!0,i._container.style.width=(i.width||"100")+"%",i._container.style.height=(i.height||"100")+"%",i._container.style.top=(i.top||"0")+"%",i._container.style.left=(i.left||"0")+"%",s.on("volumechange",i._volumeEvent),i.active?i._startEvent():i._setClipCurrentTime(+i.from)},i.clearLoading=function(){r.next(s.currentTime()),i._clip.off("loadedmetadata",i.clearLoading)},i.sourceToArray=function(e,t){e[t]=typeof e[t]=="string"?[e[t]]:e[t]},i.fail=function(){i.clearLoading(),i.failed=!0,i.setZIndex(),i.hideLoading(),i.playIfReady()},i.attemptJWPlayer=function(){i._clip.off("error",i.attemptJWPlayer);if(!i._clip.error)return;var t=document.createElement("div");i._container.removeChild(document.getElementById(i._clip.media.id)),i._container.appendChild(t),t.id=e.guid("popcorn-jwplayer-");var n=e.HTMLJWPlayerVideoElement(t),r=i._clip.media.src;i._clip=new e(n,{frameAnimation:!0}),i._clip.on("error",i.fail),i._clip.on("loadedmetadata",i.readyEvent),i._clip.on("loadedmetadata",i.clearLoading),n.src=r},i.tearDown=function(){s.off("volumechange",i._volumeEvent);if(i._clip){var e=i._clip.media.parentNode,n=e.querySelector("iframe")||e.querySelector("video")||e.querySelector("audio");n&&t().appendChild(n),i._clip.destroy()}i._container&&i._container.parentNode&&i._container.parentNode.removeChild(i._container)},i.clearEvents=function(){s.off("play",i._playEvent),s.off("pause",i._pauseEvent),s.off("seeked",i._onSeeked),s.off("timeupdate",i._onTimeUpdate)},i.addSource=function(){i.denied&&i.fail();for(var t=0;t<i.source.length;t++){var n=i.source[t],r=n.split("?"),s=r[1];n=r[0].trim(),i.source[t]=s?n+"?"+s:n}i._clip=e.smart(i._container,i.source,{frameAnimation:!0}),i._clip.on("error",i.attemptJWPlayer);if(i._clip.error){i.attemptJWPlayer();return}i._clip.media.readyState>=1?(i.readyEvent(),i.clearLoading()):(i._clip.on("loadedmetadata",i.readyEvent),i._clip.on("loadedmetadata",i.clearLoading))},i._onProgress=function(){if(i._clip.ended())return;if(!i._isBuffering()){i.hideLoading(),i.playIfReady()&&i._clip.play();return}},i._isBuffering=function(){var e,t,n=i._clip.media.buffered,r=s.currentTime()-i.start+ +i.from;for(e=0,t=n.length;e<t;e++)if(n.start(e)<=r&&n.end(e)>r)return!1;return!0},i._onTimeUpdate=function(){if(i._clip.ended())return;i._isBuffering()&&!s.paused()&&(i.playWhenReady=!0,s.pause(),i._clip.pause(),i.displayLoading())},i._setClipCurrentTime=function(e){!e&&e!==0&&(e=s.currentTime()-i.start+ +i.from),e!==i._clip.currentTime()&&e>=+i.from&&e<=i.duration&&i._clip.currentTime(e)},i.playIfReady=function(){return i.playWhenReady&&!n?(i.playWhenReady=!1,s.play(),!0):!1},i.setupContainer(),i.source&&(i.sourceToArray(i,"source"),i.fallback&&i.sourceToArray(i,"fallback"),i.fallback&&(i.source=i.source.concat(i.fallback)),r.add(i,i.addSource)),i._startEvent=function(){i._setClipCurrentTime(),s.on("seeked",i._onSeeked),i._clip.media.buffered.length&&(s.on("timeupdate",i._onTimeUpdate),i._clip.on("progress",i._onProgress)),i.playIfReady()&&i._clip.play(),s.on("play",i._playEvent),s.on("pause",i._pauseEvent),i.hideLoading(),i.setZIndex(),i.active&&i._volumeEvent()},i._endEvent=function(){i._clip.paused()||i._clip.pause(),i._setClipCurrentTime(+i.from),i._clip.mute(),i._container.style.zIndex=0},i._playEvent=function(){i._clip.paused()&&!n&&!i._clip.ended()&&i._clip.play()},i._pauseEvent=function(){i._clip.paused()||i._clip.pause()},i._onSeeked=function(){i._setClipCurrentTime()},i.toString=function(){return i.title||i.source||""},i.duration>0&&i.end-(i.start- +i.from)>i.duration&&(i.end=i.duration+(i.start- +i.from))},_update:function(e,t){t.hasOwnProperty("duration")&&(e.duration=t.duration),t.hasOwnProperty("from")&&t.from<e.duration&&(e.from=t.from),e.end-(e.start- +e.from)>e.duration&&(e.end=e.duration+(e.start- +e.from)),t.hasOwnProperty("zindex")&&(e.zindex=t.zindex,e.setZIndex()),t.title&&(e.title=t.title),t.denied&&(e.denied=t.denied),t.hasOwnProperty("hidden")&&(e.hidden=t.hidden,e.setZIndex()),t.fallback&&(e.sourceToArray(t,"fallback"),e.fallback=t.fallback),t.source&&(e.sourceToArray(t,"source"),e.fallback&&(t.source=t.source.concat(e.fallback)),t.source.toString()!==e.source.toString()&&(e.ready=!1,e.playWhenReady=!1,e.active&&e.displayLoading(),t.fallback&&(t.source=t.source.concat(t.fallback)),e.source=t.source,e.clearEvents(),e.tearDown(),e.setupContainer(),this.paused()||(e.playWhenReady=!0,this.pause(),e._clip&&!e._clip.paused()&&e._clip.pause()),r.add(e,e.addSource))),t.hasOwnProperty("top")&&(e.top=t.top,e._container.style.top=(e.top||"0")+"%"),t.hasOwnProperty("left")&&(e.left=t.left,e._container.style.left=(e.left||"0")+"%"),t.hasOwnProperty("height")&&(e.height=t.height,e._container.style.height=(e.height||"100")+"%"),t.hasOwnProperty("width")&&(e.width=t.width,e._container.style.width=(e.width||"100")+"%"),e.ready&&(t.hasOwnProperty("mute")&&(e.mute=t.mute,e._volumeEvent()),t.hasOwnProperty("volume")&&(e.volume=t.volume,e._volumeEvent()),e._setClipCurrentTime())},_teardown:function(e){e.ready||!e.source?e.tearDown():e._cancelLoad=!0},start:function(e,t){t.active=!0;if(t.source){if(!t.hidden&&t.failed){t._container.style.zIndex=+t.zindex;return}this.paused()||(t.playWhenReady=!0),t.ready?t._startEvent():(this.pause(),t.displayLoading())}},end:function(e,t){t.active=!1,t.playWhenReady=!1,t.clearEvents(),t.hideLoading(),t.ready?(t._clip.off("progress",t._onProgress),t._endEvent()):t._container.style.zIndex=0},manifest:{about:{},options:{start:{elem:"input",type:"text",label:"In",units:"seconds"},end:{elem:"input",type:"text",label:"Out",units:"seconds"},source:{elem:"input",type:"url",label:"Source URL","default":""},fallback:{elem:"input",type:"url",label:"Fallback URL (only applies to exported projects)","default":""},title:{elem:"input",type:"text",label:"Clip title","default":""},width:{elem:"input",type:"number",label:"Width","default":100,units:"%",hidden:!0},height:{elem:"input",type:"number",label:"Height","default":100,units:"%",hidden:!0},top:{elem:"input",type:"number",label:"Top","default":0,units:"%",hidden:!0},left:{elem:"input",type:"number",label:"Left","default":0,units:"%",hidden:!0},from:{elem:"input",type:"seconds",units:"seconds",label:"Start at","default":0},volume:{elem:"input",type:"range",units:"%",label:"Volume",slider_unit:"%",min:0,max:100,"default":100},hidden:{elem:"input",type:"checkbox",label:"Sound only","default":!1},mute:{elem:"input",type:"checkbox",label:"Mute","default":!1},zindex:{hidden:!0,"default":0},denied:{hidden:!0,"default":!1},duration:{hidden:!0,"default":0},linkback:{hidden:!0,"default":""},contentType:{hidden:!0,"default":""}}}})}(Popcorn),define("popcorn.sequencer",function(){}),function(e,t){typeof define=="function"&&define.amd?define("sketchfab-iframe",[],t):e["sketchfab-iframe"]=t()}(this,function(){var e,t,n;return function(r){function c(e,t){var n=t&&t.split("/"),r=o.map,i=r&&r["*"]||{},s,u,a,f,l,c,h,p,d,v;if(e&&e.charAt(0)==="."&&t){n=n.slice(0,n.length-1),e=n.concat(e.split("/"));for(p=0;v=e[p];p++)if(v===".")e.splice(p,1),p-=1;else if(v===".."){if(p===1&&(e[2]===".."||e[0]===".."))return!0;p>0&&(e.splice(p-1,2),p-=2)}e=e.join("/")}if((n||i)&&r){s=e.split("/");for(p=s.length;p>0;p-=1){u=s.slice(0,p).join("/");if(n)for(d=n.length;d>0;d-=1){a=r[n.slice(0,d).join("/")];if(a){a=a[u];if(a){f=a,l=p;break}}}if(f)break;!c&&i&&i[u]&&(c=i[u],h=p)}!f&&c&&(f=c,l=h),f&&(s.splice(0,l,f),e=s.join("/"))}return e}function h(e,t){return function(){return l.apply(r,a.call(arguments,0).concat([e,t]))}}function p(e){return function(t){return c(t,e)}}function d(e){return function(t){i[e]=t}}function v(e){if(s.hasOwnProperty(e)){var t=s[e];delete s[e],u[e]=!0,f.apply(r,t)}if(!i.hasOwnProperty(e))throw new Error("No "+e);return i[e]}function m(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=c(e.slice(0,i),t),e=e.slice(i+1),r=v(n),r&&r.normalize?e=r.normalize(e,p(t)):e=c(e,t)):e=c(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function g(e){return function(){return o&&o.config&&o.config[e]||{}}}var i={},s={},o={},u={},a=[].slice,f,l;f=function(e,t,n,o){var a=[],f,l,c,p,y,b;o=o||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(b=0;b<t.length;b++){y=m(t[b],o),c=y.f;if(c==="require")a[b]=h(e);else if(c==="exports")a[b]=i[e]={},f=!0;else if(c==="module")l=a[b]={id:e,uri:"",exports:i[e],config:g(e)};else if(i.hasOwnProperty(c)||s.hasOwnProperty(c))a[b]=v(c);else if(y.p)y.p.load(y.n,h(o,!0),d(c),{}),a[b]=i[c];else if(!u[c])throw new Error(e+" missing "+c)}p=n.apply(i[e],a);if(e)if(l&&l.exports!==r&&l.exports!==i[e])i[e]=l.exports;else if(p!==r||!f)i[e]=p}else e&&(i[e]=n)},e=t=l=function(e,t,n,i){return typeof e=="string"?v(m(e,t).f):(e.splice||(o=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},i?f(r,e,t,n):setTimeout(function(){f(r,e,t,n)},15),l)},l.config=function(e){return o=e,l},n=function(e,t,n){t.splice||(n=t,t=[]),s[e]=[e,t,n]},n.amd={jQuery:!0}}(),n("tools/almond",function(){}),function(e){"function"==typeof bootstrap?bootstrap("promise",e):"object"==typeof exports?e(void 0,exports):"function"==typeof n?n("vendors/q/q.min",e):"undefined"!=typeof ses?ses.ok()&&(ses.makeQ=function(){return e(void 0,{})}):e(void 0,Q={})}(function(e,t){function n(e,t){t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(I)&&(e.stack=r(e.stack)+"\n"+I+"\n"+r(t.stack))}function r(e){for(var e=e.split("\n"),t=[],n=0;n<e.length;++n){var r=e[n],i;if(i=/at .+ \((.*):(\d+):\d+\)/.exec(r)){var s=i[2];i=i[1]===x&&s>=S&&s<=X}else i=!1;!i&&-1===r.indexOf("(module.js:")&&-1===r.indexOf("(node.js:")&&t.push(r)}return t.join("\n")}function i(){if(Error.captureStackTrace){var e,t,n=Error.prepareStackTrace;return Error.prepareStackTrace=function(n,r){e=r[1].getFileName(),t=r[1].getLineNumber()},Error().stack,Error.prepareStackTrace=n,x=e,t}}function s(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",Error("").stack),e.apply(e,arguments)}}function o(){function e(e){t&&(r=p(e),_(t,function(e,t){C(function(){r.promiseDispatch.apply(r,t)})},void 0),n=t=void 0)}var t=[],n=[],r,i=H(o.prototype),s=H(u.prototype);return s.promiseDispatch=function(e,i,s){var o=M(arguments);t?(t.push(o),"when"===i&&s[1]&&n.push(s[1])):C(function(){r.promiseDispatch.apply(r,o)})},s.valueOf=function(){return t?s:r.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(s,o),s.stack=s.stack.substring(s.stack.indexOf("\n")+1)),N(s),i.promise=s,i.resolve=e,i.reject=function(t){e(h(t))},i.notify=function(e){t&&_(n,function(t,n){C(function(){n(e)})},void 0)},i}function u(e,t,n,r){void 0===t&&(t=function(e){return h(Error("Promise does not support operation: "+e))});var i=H(u.prototype);return i.promiseDispatch=function(n,r,s){var o;try{o=e[r]?e[r].apply(i,s):t.call(i,r,s)}catch(u){o=h(u)}n&&n(o)},n&&(i.valueOf=n),r&&(i.exception=r),N(i),i}function a(e){return f(e)?e.valueOf():e}function f(e){return e&&"function"==typeof e.promiseDispatch}function l(e){return!f(a(e))}function c(e){return e=a(e),f(e)&&"exception"in e}function h(e){var e=e||Error(),t=u({when:function(t){if(t){var n=D(q,this);-1!==n&&(R.splice(n,1),q.splice(n,1))}return t?t(e):h(e)}},function(){return h(e)},function(){return this},e);return!U&&"undefined"!=typeof window&&!window.Touch&&window.console&&console.log("Should be empty:",R),U=!0,q.push(t),R.push(e),t}function p(e){if(f(e))return e;if((e=a(e))&&"function"==typeof e.then){var t=o();return e.then(t.resolve,t.reject,t.notify),t.promise}return u({when:function(){return e},get:function(t){return e[t]},put:function(t,n){return e[t]=n,e},del:function(t){return delete e[t],e},post:function(t,n){return e[t].apply(e,n)},apply:function(t){return e.apply(void 0,t)},keys:function(){return B(e)}},void 0,function(){return e})}function d(e,t,r,i){function s(e){try{return t?t(e):e}catch(n){return h(n)}}function u(e){if(r){n(e,l);try{return r(e)}catch(t){return h(t)}}return h(e)}var a=o(),f=!1,l=p(e);return C(function(){l.promiseDispatch(function(e){f||(f=!0,a.resolve(s(e)))},"when",[function(e){f||(f=!0,a.resolve(u(e)))}])}),l.promiseDispatch(void 0,"when",[void 0,function(e){a.notify(i?i(e):e)}]),a.promise}function v(e,t,n){return d(e,function(e){return b(e).then(function(e){return t.apply(void 0,e)},n)},n)}function m(e,t,n){var r=o();return C(function(){p(e).promiseDispatch(r.resolve,t,n)}),r.promise}function g(e){return function(t){var n=M(arguments,1);return m(t,e,n)}}function y(e){var t=M(arguments,1);return W(e,t)}function b(e){return d(e,function(e){var t=e.length;if(0===t)return p(e);var n=o();return _(e,function(r,i,s){l(i)?(e[s]=a(i),0===--t&&n.resolve(e)):d(i,function(r){e[s]=r,0===--t&&n.resolve(e)}).fail(n.reject)},void 0),n.promise})}function w(e,t){return d(e,void 0,t)}function E(e,t){var n=M(arguments,2),r=o();return n.push(r.makeNodeResolver()),z(e,t,n).fail(r.reject),r.promise}var S=i(),x,T=function(){},N=Object.freeze||T;"undefined"!=typeof cajaVM&&(N=cajaVM.def);var C;if("undefined"!=typeof process)C=process.nextTick;else if("function"==typeof setImmediate)C=setImmediate;else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,L={},A=L;k.port1.onmessage=function(){L=L.next;var e=L.task;delete L.task,e()},C=function(e){A=A.next={task:e},k.port2.postMessage(0)}}else C=function(e){setTimeout(e,0)};var O;Function.prototype.bind?(O=Function.prototype.bind,O=O.bind(O.call)):O=function(e){return function(){return e.call.apply(e,arguments)}};var M=O(Array.prototype.slice),_=O(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),D=O(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),P=O(Array.prototype.map||function(e,t){var n=this,r=[];return _(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),H=Object.create||function(e){function t(){}return t.prototype=e,new t},B=Object.keys||function(e){var t=[],n;for(n in e)t.push(n);return t},j=Object.prototype.toString,F;F="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var I="From previous event:";t.nextTick=C,t.defer=o,o.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(M(arguments,1)):e.resolve(n)}},t.promise=function(e){var t=o();return y(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise},t.makePromise=u,u.prototype.then=function(e,t,n){return d(this,e,t,n)},u.prototype.thenResolve=function(e){return d(this,function(){return e})},_("isResolved isFulfilled isRejected dispatch when spread get put del post send invoke keys fapply fcall fbind all allResolved timeout delay catch finally fail fin progress end done nfcall nfapply nfbind ncall napply nbind npost nsend ninvoke nend nodeify".split(" "),function(e,n){u.prototype[n]=function(){return t[n].apply(t,[this].concat(M(arguments)))}},void 0),u.prototype.toSource=function(){return this.toString()},u.prototype.toString=function(){return"[object Promise]"},N(u.prototype),t.nearer=a,t.isPromise=f,t.isResolved=function(e){return l(e)||c(e)},t.isFulfilled=l,t.isRejected=c;var q=[],R=[],U;t.reject=h,t.resolve=p,t.master=function(e){return u({isDef:function(){}},function(t,n){return m(e,t,n)},function(){return a(e)})},t.when=d,t.spread=v,t.async=function(e){return function(){function t(e,t){var s;try{s=n[e](t)}catch(o){return j(o)==="[object StopIteration]"||o instanceof F?o.value:h(o)}return d(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}},t["return"]=function(e){throw new F(e)},t.promised=function(e){return function(){return v([this,b(arguments)],function(t,n){return e.apply(t,n)})}},t.dispatch=m,t.dispatcher=g,t.get=g("get"),t.put=g("put"),t["delete"]=t.del=g("del");var z=t.post=g("post");t.send=function(e,t){var n=M(arguments,2);return z(e,t,n)},t.invoke=s(t.send,"invoke","send");var W=t.fapply=g("apply");t["try"]=y,t.fcall=y,t.fbind=function(e){var t=M(arguments,1);return function(){var n=t.concat(M(arguments));return W(e,n)}},t.keys=g("keys"),t.all=b,t.allResolved=function(e){return d(e,function(e){return d(b(P(e,function(e){return d(e,T,T)})),function(){return P(e,p)})})},t["catch"]=t.fail=w,t.progress=function(e,t){return d(e,void 0,void 0,t)},t["finally"]=t.fin=function(e,t){return d(e,function(e){return d(t(),function(){return e})},function(e){return d(t(),function(){return h(e)})})},t.done=function(e,r,i,s){r=r||i||s?d(e,r,i,s):e,w(r,function(r){C(function(){n(r,e);if(!t.onerror)throw r;t.onerror(r)})})},t.timeout=function(e,t){var n=o(),r=setTimeout(function(){n.reject(Error("Timed out after "+t+" ms"))},t);return d(e,function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)}),n.promise},t.delay=function(e,t){t===void 0&&(t=e,e=void 0);var n=o();return setTimeout(function(){n.resolve(e)},t),n.promise},t.nfapply=function(e,t){var n=M(t),r=o();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise},t.nfcall=function(e){var t=M(arguments,1),n=o();return t.push(n.makeNodeResolver()),W(e,t).fail(n.reject),n.promise},t.nfbind=function(e){var t=M(arguments,1);return function(){var n=t.concat(M(arguments)),r=o();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise}},t.npost=function(e,t,n){var n=M(n),r=o();return n.push(r.makeNodeResolver()),z(e,t,n).fail(r.reject),r.promise},t.nsend=E,t.ninvoke=s(E,"ninvoke","nsend"),t.nodeify=function(e,t){if(!t)return e;e.then(function(e){C(function(){t(null,e)})},function(e){C(function(){t(e)})})};var X=i()}),n("api/sketchfab-iframe",["vendors/q/q.min"],function(e){var t=function(e){this._iframe=e,e.src="about:blank",this._uid=undefined,window.location.href.search("sketchfab")===-1?this._domain=window.location.protocol+"//sketchfab.com":this._domain="///"+window.location.hostname,this._callback=undefined,this._events={};var t=this,n=function(e){if(e.data===undefined||e.data.source===undefined)return;t.message(e.data)};window.addEventListener("message",n,!1),this._messageFunction=n},n=function(e,t){if(e.error!==undefined){if(e.status==="lookat"&&e.error==="camera animation not finished")return;this._events[e.status].reject(e.error),t&&(this._events[e.status]=undefined)}else this._events[e.status]?this._events[e.status].resolve!==undefined&&(this._events[e.status].resolve(e),t&&(this._events[e.status]=undefined)):console.warn('Unexpected event not handled: "'+e.status+'"')};return t.prototype={setMessageCallback:function(e){this._callback=e},message:function(e){if(e.source!==this._uid)return;e.status!==undefined&&(e.status==="load"?n.call(this,e,!1):n.call(this,e,!0)),this._callback&&this._callback.call(this,e)},load:function(t,n){if(this._events.load!==undefined)return this._events.load.promise;var r=this,i=function(e){var t="?preload=1";return n&&Object.keys(n).forEach(function(e,r,i){var s;n[e]!==undefined&&(s=n[e].toString()),t+="&"+e+"="+s}),r._domain+"/embed/"+e+t};this._uid=t,this._events.load=e.defer();var s=i(t);return this._iframe.src=s,this._events.load.promise},start:function(){return this._events.start!==undefined?this._events.start.promise:(this._events.start=e.defer(),this._iframe.contentWindow.postMessage({command:"start"},"*"),this._events.start.promise)},lookat:function(t,n,r){var i="lookat";return this._events[i]!==undefined&&!this._events[i].promise.isResolved()&&this._events[i].reject("new animation ran"),this._events[i]=e.defer(),this._iframe.contentWindow.postMessage({command:i,eye:t,target:n,duration:r},"*"),this._events[i].promise},stop:function(t){return this._events.stop!==undefined?this._events.stop.promise:(this._events.stop=e.defer(),this._iframe.contentWindow.postMessage({command:"stop"},"*"),this._events.stop.promise)},finish:function(){window.removeEventListener("message",this._messageFunction)}},t.Q=e,t}),n("sketchfab-iframe",["require","api/sketchfab-iframe"],function(e){var t=e("api/sketchfab-iframe"),n=t.Q;return{version:"0.0.1",Sketchfab:t,Q:n}}),t("sketchfab-iframe")}),function(e){function r(e,t){return typeof e=="number"?e:t}function i(e){var r,i;e._sketchfabAPI&&(e._sketchfabAPI._preventStartFlag=!0,e._iframe&&e._iframe.contentWindow&&e._sketchfabAPI.finish(),e._sketchfabAPI.stop(),e._sketchfabAPI=null),e._container&&e._iframe&&(e._container.removeChild(e._iframe),e._iframe=null);if(e.src){i=e.src.match(/(https?:\/\/sketchfab\.com\/show\/)?(\w+)/);if(!i)throw"Invalid Sketchfab URL. See below for instructions on finding a model to show.";i=i[i.length-1],e._iframe=r=document.createElement("iframe"),r.classList.add("sketchfab-iframe");var s=e._sketchfabAPI=new t(r),o={nocamera:0,autostart:1,autospin:e.autospin?"1":"0",transparent:e.background?"0":"1",controls:0,watermark:0,desc_button:0,stop_button:0};n.when(s.load(i,o)).then(function(){s._preventStartFlag||s.start()}).fail(function(e){console.error("Sketchfab error: ",e)}),r.setAttribute("height",e.height),r.setAttribute("width",e.width),r.setAttribute("frameborder",0),r.setAttribute("allowFullScreen",!0),r.setAttribute("webkitallowfullscreen",!0),r.setAttribute("mozallowfullscreen",!0),e._container.appendChild(r),e._target.appendChild(e._container)}}var t,n;e.plugin("sketchfab",{_setup:function(t){var n;t._target=e.dom.find(t.target),t.src=t.src||t._natives.manifest.options.src["default"];if(!t._target)return;t._container=n=document.createElement("div"),n.classList.add("sketchfab-outer-container"),n.classList.add(t.transition),n.classList.add("off"),n.style.width=r(t.width,"100")+"%",n.style.height=r(t.height,"100")+"%",n.style.top=r(t.top,"0")+"%",n.style.left=r(t.left,"0")+"%",n.style.zIndex=+t.zindex,i(t),t.toString=function(){return t.src}},start:function(e,t){var n=t._container,r;n&&(n.classList.add("on"),n.classList.remove("off"),n.style.display="none",r=n.offsetHeight,n.style.display="")},end:function(e,t){t._container&&(t._container.classList.add("off"),t._container.classList.remove("on"))},_teardown:function(e){e._sketchfabAPI&&(e._sketchfabAPI._preventStartFlag=!0,e._iframe&&e._iframe.contentWindow&&e._sketchfabAPI.finish(),e._sketchfabAPI.stop(),e._sketchfabAPI=null),e._target&&e._container&&e._target.removeChild(e._container)},_update:function(e,t){var n=!1;t.transition&&t.transition!==e.transition&&(e._container.classList.remove(e.transition),e.transition=t.transition,e._container.classList.add(e.transition)),t.src&&t.src!==e.src&&(e.src=t.src,n=!0),[!0,!1].indexOf(t.background)>-1&&t.background!==e.background&&(e.background=t.background,n=!0),[!0,!1].indexOf(t.autospin)>-1&&t.autospin!==e.autospin&&(e.autospin=t.autospin,n=!0),n&&i(e),t.top&&t.top!==e.top&&(e.top=t.top,e._container.style.top=e.top+"%"),t.left&&t.left!==e.left&&(e.left=t.left,e._container.style.left=e.left+"%"),t.width&&t.width!==e.width&&(e.width=t.width,e._container.style.width=e.width+"%"),t.height&&t.height!==e.height&&(e.height=t.height,e._container.style.height=e.height+"%")}},{about:{name:"Popcorn Sketchfab Plugin",version:"0.1",author:"@secretrobotron",website:"http://secretrobotron.tumblr.com/"},displayName:"3D Model",options:{start:{elem:"input",type:"text",label:"Start",units:"seconds"},end:{elem:"input",type:"text",label:"End",units:"seconds"},src:{elem:"input",type:"text",label:"Sketchfab.com URL","default":"http://sketchfab.com/show/7IwpVxaeVk2DFnt512j6XROoyRG"},background:{elem:"input",type:"checkbox",label:"Background (Transparency)","default":!1},autospin:{elem:"input",type:"checkbox",label:"Automatically Spin Model","default":!1},width:{elem:"input",type:"number",label:"Width","default":40,units:"%",hidden:!0},height:{elem:"input",type:"number",label:"Height","default":50,units:"%",hidden:!0},top:{elem:"input",type:"number",label:"Top","default":25,units:"%",hidden:!0},left:{elem:"input",type:"number",label:"Left","default":30,units:"%",hidden:!0},target:{hidden:!0},transition:{elem:"select",options:["None","Pop","Fade","Slide Up","Slide Down"],values:["popcorn-none","popcorn-pop","popcorn-fade","popcorn-slide-up","popcorn-slide-down"],label:"Transition","default":"popcorn-fade"},zindex:{hidden:!0}}}),require(["sketchfab-iframe"],function(e){t=e.Sketchfab,n=e.Q})}(Popcorn),define("popcorn.sketchfab",function(){}),function(e){e.plugin("skip",function(){return{_setup:function(e){var t=e.end;e.skipRange=function(){var n=this.currentTime();!this.paused()&&n>e.start&&n<e.end&&this.currentTime(t)},e.toString=function(){return"Skip"},this.on("timeupdate",e.skipRange)},start:function(){},end:function(){},_teardown:function(e){this.off("timeupdate",e.skipRange)}}},{options:{start:{elem:"input",type:"text",label:"In",units:"seconds"},end:{elem:"input",type:"text",label:"Out",units:"seconds"},target:{hidden:!0}}})}(Popcorn),define("popcorn.skip",function(){}),function(e){function i(e){return e.replace(/\r?\n/gm,"<br>")}var t="#000000",n="#444444",r="#888888";e.plugin("text",{manifest:{about:{name:"Popcorn text Plugin",version:"0.1",author:"@k88hudson, @mjschranz"},options:{text:{elem:"textarea",label:"Text","default":"Popcorn Maker"},linkUrl:{elem:"input",type:"text",label:"Link URL"},linkTarget:{elem:"select",options:["New Tab","Current Tab"],values:["_blank","_parent"],label:"Open Link In","default":"_blank"},position:{elem:"select",options:["Custom","Middle","Bottom","Top"],values:["custom","middle","bottom","top"],label:"Text Position","default":"custom"},alignment:{elem:"select",options:["Center","Left","Right"],values:["center","left","right"],label:"Text Alignment","default":"left"},start:{elem:"input",type:"text",label:"In",group:"advanced",units:"seconds"},end:{elem:"input",type:"text",label:"Out",group:"advanced",units:"seconds"},transition:{elem:"select",options:["None","Pop","Fade","Slide Up","Slide Down"],values:["popcorn-none","popcorn-pop","popcorn-fade","popcorn-slide-up","popcorn-slide-down"],label:"Transition","default":"popcorn-fade"},fontFamily:{elem:"select",label:"Font",styleClass:"",googleFonts:!0,group:"advanced","default":"Merriweather"},fontSize:{elem:"input",type:"number",label:"Font Size","default":10,units:"%",group:"advanced"},fontColor:{elem:"input",type:"color",label:"Font colour","default":t,group:"advanced"},shadow:{elem:"input",type:"checkbox",label:"Shadow","default":!1,group:"advanced"},shadowColor:{elem:"input",type:"color",label:"Shadow colour","default":n,group:"advanced"},background:{elem:"input",type:"checkbox",label:"Background","default":!1,group:"advanced"},backgroundColor:{elem:"input",type:"color",label:"Background color","default":r,group:"advanced"},fontDecorations:{elem:"checkbox-group",labels:{bold:"Bold",italics:"Italics"},"default":{bold:!1,italics:!1},group:"advanced"},left:{elem:"input",type:"number",label:"Left",units:"%","default":25,hidden:!0},top:{elem:"input",type:"number",label:"Top",units:"%","default":0,hidden:!0},width:{elem:"input",type:"number",units:"%",label:"Width","default":50,hidden:!0},zindex:{hidden:!0}}},_setup:function(s){var o=e.dom.find(s.target),u=i(s.text),a=s._container=document.createElement("div"),f=document.createElement("div"),l=document.createElement("span"),c=document.createElement("div"),h,p=s.fontDecorations||s._natives.manifest.options.fontDecorations["default"],d=s.position||s._natives.manifest.options.position["default"],v=s.alignment,m=s.transition||s._natives.manifest.options.transition["default"],g,y=s.linkUrl,b=s.linkTarget,w=s.shadowColor||n,E=s.backgroundColor||r,S=this;o||(o=this.media.parentNode),s._target=o,a.style.position="absolute",a.classList.add("popcorn-text"),"center left right".match(d)&&(v=d,d="middle"),l.appendChild(c),f.appendChild(l),a.appendChild(f),o.appendChild(a),s._transitionContainer=a,s._transitionContainer.classList.add(m),s._transitionContainer.classList.add("off"),s.fontColor=s.fontColor||t,f.classList.add("text-inner-div"),f.style.color=s.fontColor,f.style.fontStyle=p.italics?"italic":"normal",f.style.fontWeight=p.bold?"bold":"normal",s.background&&(c.style.backgroundColor=E),s.shadow&&(c.style.textShadow="0 1px 5px "+w+", 0 1px 10px "+w),h=document.createElement("link"),h.rel="stylesheet",h.type="text/css",s.fontFamily=s.fontFamily?s.fontFamily:s._natives.manifest.options.fontFamily["default"],s._fontSheet=h,document.head.appendChild(h),h.onload=function(){var e="3",t=100-e*2;f.style.fontFamily=s.fontFamily,f.style.fontSize=s.fontSize+"%",a.classList.add("text-custom"),f.classList.add(v),d==="top"?(a.style.left=e+"%",a.style.width=t+"%",a.style.top=e+"%"):d==="bottom"?(a.style.left=e+"%",a.style.width=t+"%",a.style.top=100-e-s.fontSize+"%"):d==="middle"?(a.style.left=e+"%",a.style.width=t+"%",a.style.top=50-s.fontSize/2+"%"):d==="custom"&&(a.style.left=s.left+"%",a.style.top=s.top+"%",s.width&&(a.style.width=s.width+"%")),a.style.zIndex=+s.zindex,y?(y.match(/^http(|s):\/\//)||(y="//"+y),g=document.createElement("a"),g.href=y,g.target=b,g.innerHTML=u,g.addEventListener("click",function(){S.media.pause()},!1),g.style.color=f.style.color,c.appendChild(g)):c.innerHTML=u},h.href="//fonts.googleapis.com/css?family="+s.fontFamily.replace(/\s/g,"+")+":400,700",s.toString=function(){return s.text||s._natives.manifest.options.text["default"]}},start:function(e,t){var n=t._transitionContainer,r;n&&(n.classList.add("on"),n.classList.remove("off"),n.style.display="none",r=n.offsetHeight,n.style.display="")},end:function(e,t){t._transitionContainer&&(t._transitionContainer.classList.remove("on"),t._transitionContainer.classList.add("off"))},_teardown:function(e){e._target&&e._target.removeChild(e._container),e._fontSheet&&document.head.removeChild(e._fontSheet)}})}(window.Popcorn),define("popcorn.text",function(){}),function(e){function i(e){return e.replace(/\r?\n/gm,"<br>")}var t="#000000",n="#444444",r="#888888";e.plugin("toc",{manifest:{about:{name:"Popcorn toc Plugin",version:"0.1",author:"@k88hudson, @mjschranz"},options:{text:{elem:"input",label:"Text","default":"Table of contents"},jsonml:{hidden:!0},start:{elem:"input",type:"text",label:"In",group:"advanced",units:"seconds"},end:{elem:"input",type:"text",label:"Out",group:"advanced",units:"seconds"}}},_setup:function(e){e.toString=function(){return e.text||e._natives.manifest.options.text["default"]}},start:function(e,t){var n=t._transitionContainer,r;n&&(n.classList.add("on"),n.classList.remove("off"),n.style.display="none",r=n.offsetHeight,n.style.display="")},end:function(e,t){t._transitionContainer&&(t._transitionContainer.classList.remove("on"),t._transitionContainer.classList.add("off"))},_teardown:function(e){e._target&&e._target.removeChild(e._container),e._fontSheet&&document.head.removeChild(e._fontSheet)}})}(window.Popcorn),define("popcorn.toc",function(){}),function(e){function i(e){return e.replace(/\r?\n/gm,"<br>")}var t="#000000",n="#444444",r="#888888";e.plugin("chapter",{manifest:{about:{name:"Popcorn chapter Plugin",version:"0.1",author:"@k88hudson, @mjschranz"},options:{text:{elem:"textarea",label:"Text","default":"Popcorn Maker"},level:{elem:"input",type:"number",label:"Level","default":1,hidden:!0},start:{elem:"input",type:"text",label:"In",group:"advanced",units:"seconds"},end:{elem:"input",type:"text",label:"Out",group:"advanced",units:"seconds"}}},_setup:function(e){e.toString=function(){return e.text||e._natives.manifest.options.text["default"]}},start:function(e,t){var n=t._transitionContainer,r;n&&(n.classList.add("on"),n.classList.remove("off"),n.style.display="none",r=n.offsetHeight,n.style.display="")},end:function(e,t){t._transitionContainer&&(t._transitionContainer.classList.remove("on"),t._transitionContainer.classList.add("off"))},_teardown:function(e){e._target&&e._target.removeChild(e._container),e._fontSheet&&document.head.removeChild(e._fontSheet)}})}(window.Popcorn),define("popcorn.chapter",function(){}),function(e){function i(e){return document.createElement(e)}function s(e){var t=document.createRange(),n=document.body||document.head,r;t.selectNode(n),r=t.createContextualFragment(e);if(r.childNodes.length===1){var i=r.firstChild;return r.removeChild(i),i}return r}function o(e,t){return typeof e=="number"?e:t}function u(e){return e.replace(/\(/g,"&lpar;").replace(/\)/g,"&rpar;").replace(/-/g,"&hyphen;").replace(/\s/g,"&nbsp;").replace(/,/g,"&comma;").replace(/'/g,"&apos")}function a(e){while(e&&!e.textContent){e=e.nextElementSibling;if(!e||e.nodeName!=="P")return!1}return!0}function f(t,n){function b(e){var n=1,r=s("<div>"+e.parse.text+"</div>"),i=r.querySelector("div > p:nth-of-type("+n+")"),o="";l.appendChild(s('<a href="'+t._link+'" target="_blank">'+u(e.parse.title)+"</a>")),p.href=t._link,p.onclick=function(){y.media.pause()},p.setAttribute("target","_blank");while(!a(i))i=r.querySelector("div > p:nth-of-type("+ ++n+")");while(i&&i.nodeName==="P")o+=i.textContent+"<br />",i=i.nextElementSibling;h.innerHTML=o}var o,f,l,c,h,p,d,v,m,g=e.guid("wikiCallback"),y=n;t._container&&t._inner&&t._container.removeChild(t._inner),t._inner=d=i("div"),d.classList.add("wikipedia-inner-container"),f=i("div"),f.classList.add("wikipedia-title"),l=i("div"),l.classList.add("wikipedia-title-text"),l.classList.add("wikipedia-ellipsis"),f.appendChild(l),c=i("div"),c.classList.add("wikipedia-main-content"),h=i("div"),h.classList.add("wikipedia-content"),c.appendChild(h),p=i("a"),p.classList.add("wikipedia-to-wiki"),d.appendChild(f),d.appendChild(c),d.appendChild(p),t._container.appendChild(d),t._target.appendChild(t._container),t.lang||(t.lang="en"),window[g]=function(e){r[m]=e;if(e.error){l.innerHTML="Article Not Found",h.innerHTML=e.error.info;return}b(e)},t.src&&(m=t.src+t.lang,v="//"+encodeURIComponent(t.lang)+".wikipedia.org/w/",o=t.src.slice(t.src.lastIndexOf("/")+1),t._link="//"+encodeURIComponent(t.lang+".wikipedia.org/wiki/"+o),r[m]?b(r[m]):e.getScript(v+"api.php?action=parse&prop=text&redirects&page="+encodeURIComponent(o)+"&noimages=1&mobileformat=html&format=json&callback="+g))}var t,n,r=[],l={_setup:function(t){var n;t._target=e.dom.find(t.target);if(!t._target)return;t._container=n=i("div"),n.classList.add("wikipedia-outer-container"),n.classList.add(t.transition),n.classList.add("off"),n.style.width=o(t.width,"100")+"%",n.style.height=o(t.height,"100")+"%",n.style.top=o(t.top,"0")+"%",n.style.left=o(t.left,"0")+"%",n.style.zIndex=+t.zindex,f(t,this),t.toString=function(){return t.src||t._natives.manifest.options.src["default"]}},start:function(e,t){var n=t._container,r;n&&(n.classList.add("on"),n.classList.remove("off"),n.style.display="none",r=n.offsetHeight,n.style.display="")},end:function(e,t){t._container&&(t._container.classList.add("off"),t._container.classList.remove("on"))},_teardown:function(e){e._target&&e._container&&e._target.removeChild(e._container)},_update:function(e,t){t.transition&&t.transition!==e.transition&&(e._container.classList.remove(e.transition),e.transition=t.transition,e._container.classList.add(e.transition)),t.src&&t.src!==e.src&&(e.src=t.src,f(e,this)),t.lang&&t.lang!==e.lang&&(e.lang=t.lang,f(e,this)),t.top&&t.top!==e.top&&(e.top=t.top,e._container.style.top=e.top+"%"),t.left&&t.left!==e.left&&(e.left=t.left,e._container.style.left=e.left+"%"),t.width&&t.width!==e.width&&(e.width=t.width,e._container.style.width=e.width+"%"),t.height&&t.height!==e.height&&(e.height=t.height,e._container.style.height=e.height+"%"),t.hasOwnProperty("zindex")&&(e._container.style.zIndex=e.zindex=+t.zindex)}};t="en,ja,es,de,ru,fr,it,pt,pl,zh,nl,tr,ar,sv,id,cs,fi,ko,th,fa,hu,he,no,vi,uk,da,ro,bg,hr,ca,el,sk,ms,sr,lt,sl,simple,eo,tl,et,hi,kk,sh,nn,ta,az,bs,af,eu,ka,lv,gl,zh_yue,tpi,mk,mr,la,ml,sq,be,cy,br,is,an,bn,war,oc,hy,arz,te,jv,ceb,sw,lb,als,ur,vo,fy,kn,gan,mg,ang,vec,gd,gu,ast,io,uz,qu,wuu,su,ku,yo,ga,tt,scn,bar,nds,se,ht,ne,ia,sco,lmo,mn,cv,ckb,diq,my,pnb,new,pms,zh-min-nan,yi,am,bpy,li,si,os,mt,nah,ps,fo,hsb,ilo,nap,wa,gv,ky,pam,sah,co,tg,ba,bcl,hif,km,sa,vls,or,mzn,ig,so,bo,kl,ksh,as,mi,szl,mwl,nrm,dsb,fiu-vro,dv,stq,tk,roa-rup,bug,mhr,kw,fur,sc,lad,csb,pa,rue,frr,gn,rm,ace,nv,bjn,arc,krc,ext,ug,nov,frp,crh,ab,lij,jbo,kv,ay,ce,ln,pdc,udm,eml,ie,mrj,xal,bh,hak,lo,wo,glk,myv,sn,chr,pag,rw,pcd,pap,zea,lbe,vep,koi,na,haw,cu,to,pi,av,zu,lez,kab,mdf,tet,kaa,za,bm,rmy,kbd,iu,bi,kg,pih,ss,chy,ee,om,cr,cdo,srn,got,ha,bxr,ch,ty,sm,ltg,pnt,ak,dz,st,sd,ik,ts,nso,y,tn,ki,ff,rn,xh,sg,ve,tw,ks,tum,fj,ti,lg".split(","),n="English,Japanese,Spanish,German,Russian,French,Italian,Portuguese,Polish,Chinese,Dutch,Turkish,Arabic,Swedish,Indonesian,Czech,Finnish,Korean,Thai,Persian,Hungarian,Hebrew,Norwegian,Vietnamese,Ukrainian,Danish,Romanian,Bulgarian,Croatian,Catalan,Greek,Slovak,Malay,Serbian,Lithuanian,Slovene,Simple English,Esperanto,Tagalog,Estonian,Hindi,Kazakh,Serbo-Croatian,Nynorsk,Tamil,Azeri,Bosnian,Afrikaans,Basque,Georgian,Latvian,Galician,Cantonese,Tok Pisin,Macedonian,Marathi,Latin,Malayalam,Albanian,Welsh,Breton,Icelandic,Aragonese,Bengali,Waray-Waray,Occitan,Armenian,Egyptian Arabic,Belarusian,Telugu,Javanese,Cebuano,Swahili,Luxembourgish,Alemannic,Urdu,Volapuk,Frisian,Kannada,Gan,Malagasy,Anglo Saxon,Venetian,Scots Gaelic,Gujarati,Asturian,Ido,Uzbek,Quechua,Wu,Sundanese,Kurdish,Yoruba,Irish,Tatar,Sicilian,Bavarian,Low Saxon,Northern Sami,Haitian,Nepali,Interlingua,Scots,Lombard,Mongolian,Chuvash,Sorani,Zazaki,Burmese,Western Panjabi,Nepal Bhasa,Piedmontese,Min Nan,Yiddish,Amharic,Bishnupriya Manipuri,Limburgish,Sinhala,Ossetic,Maltese,Nahuatl,Pashto,Faroese,Upper Sorbian,Ilokano,Neapolitan,Walloon,Manx,Kirghiz,Kapampangan,Sakha,Corsican,Tajik,Bashkir,Central Bicolano,Fiji Hindi,Khmer,Sanskrit,West Flemish,Oriya,Mazandarani,Igbo,Somali,Tibetan,Greenlandic,Ripuarian,Assamese,Maori,Silesian,Mirandese,Norman,Lower Sorbian,Voro,Divehi,Saterland Frisian,Turkmen,Aromanian,Buginese,Eastern Mari,Cornish,Friulian,Sardinian,Ladino,Cassubian,Punjabi,Rusyn,North Frisian,Guarani,Romansh,Acehnese,Navajo,Banjar,Aramaic,Karachay-Balkar,Extremaduran,Uyghur,Novial,Arpitan,Crimean Tatar,Abkhazian,Ligurian,Lojban,Komi,Aymara,Chechen,Lingala,Pennsylvania German,Udmurt,Emilian-Romagnol,Interlingue,Western Mari,Kalmyk,Bihari,Hakka,Laotian,Wolof,Gilaki,Erzya,Shona,Cherokee,Pangasinan,Kinyarwanda,Picard,Papiamentu,Zealandic,Lak,Vepsian,Komi Permyak,Nauruan,Hawai'ian,Old Church Slavonic,Tongan,Pali,Avar,Zulu,Lezgian,Kabyle,Moksha,Tetum,Karakalpak,Zhuang,Bambara,Romani,Karbadian,Inuktitut,Bislama,Kongo,Norfolk,Siswati,Cheyenne,Ewe,Oromo,Cree,Min Dong,Sranan,Gothic,Hausa,Buryat,Chamorro,Tahitian,Samoan,Latgalian,Pontic,Akan,Dzongkha,Sesotho,Sindhi,Inupiak,Tsonga,Northern Sotho,Chichewa,Setswana,Kikuyu,Fulfulde,Kirundi,Xhosa,Sangro,Venda,Twi,Kashmiri,Tumbuka,Fijian,Tigrinya,Ganda".split(","),e.plugin("wikipedia",l,{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@ChrisDeCairos",website:"https://chrisdecairos.ca/"},options:{start:{elem:"input",type:"text",label:"Start",units:"seconds"},end:{elem:"input",type:"text",label:"End",units:"seconds"},lang:{elem:"select",options:n,values:t,label:"Language","default":"en"},src:{elem:"input",type:"text",label:"Article Link/Title","default":"Popcorn"},width:{elem:"input",type:"number",label:"Width","default":40,units:"%",hidden:!0},height:{elem:"input",type:"number",label:"Height","default":50,units:"%",hidden:!0},top:{elem:"input",type:"number",label:"Top","default":25,units:"%",hidden:!0},left:{elem:"input",type:"number",label:"Left","default":30,units:"%",hidden:!0},target:{hidden:!0},transition:{elem:"select",options:["None","Pop","Fade","Slide Up","Slide Down"],values:["popcorn-none","popcorn-pop","popcorn-fade","popcorn-slide-up","popcorn-slide-down"],label:"Transition","default":"popcorn-fade"},zindex:{hidden:!0}}})}(Popcorn),define("popcorn.wikipedia",function(){}),function(){var e=["twitter"];for(var t=0;t<e.length;t++)Popcorn.plugin(e[t],{manifest:{deprecated:!0}});return}(),define("popcorn.deprecated",function(){}),function(e,t){function n(e){return"maybe"}function r(e,r){var i=typeof e=="string"?t.querySelector(e):e,s=t.createElement(r);return i.appendChild(s),s._canPlaySrc=n,s}e.HTMLVideoElement=function(e){return r(e,"video")},e.HTMLVideoElement._canPlaySrc=n,e.HTMLAudioElement=function(e){return r(e,"audio")},e.HTMLAudioElement._canPlaySrc=n}(Popcorn,window.document),define("popcorn.HTMLMediaElement",function(){}),function(e,t){function o(t){this.startTime=0,this.currentTime=t.currentTime||0,this.duration=t.duration||NaN,this.playInterval=null,this.paused=!0,this.defaultPlaybackRate=1,this.playbackRate=1,this.ended=t.endedCallback||e.nop}function u(e){e.currentTime+=(Date.now()-e.startTime)/(1e3/e.playbackRate),e.startTime=Date.now(),e.currentTime>=e.duration&&(e.pause(e.duration),e.ended()),e.currentTime<0&&e.pause(0)}function a(n){function d(e){h.push(e)}function v(){var e;f=!0,c.networkState=r.NETWORK_IDLE,c.readyState=r.HAVE_METADATA,r.dispatchEvent("loadedmetadata"),r.dispatchEvent("loadeddata"),c.readyState=r.HAVE_FUTURE_DATA,r.dispatchEvent("canplay"),c.readyState=r.HAVE_ENOUGH_DATA,r.dispatchEvent("canplaythrough");while(h.length)e=h.shift(),e();c.autoplay&&r.play()}function m(){return l?l.duration:NaN}function g(){if(!f||!l)return;l.pause(),l=null,u.removeChild(a),a=t.createElement("div")}function y(e){if(!r._canPlaySrc(e)){c.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},r.dispatchEvent("error");return}c.src=e,f&&g(),a.width=c.width,a.height=c.height,u.appendChild(a);var t=s.exec(e),n=+t[1],i=+t[2];l=new o({currentTime:n,duration:i,endedCallback:C}),r.dispatchEvent("loadstart"),r.dispatchEvent("progress"),r.dispatchEvent("durationchange"),v()}function b(){return f?l.currentTime:0}function w(e){if(!f){d(function(){w(e)});return}S(),l.seekTo(e),x()}function E(){r.dispatchEvent("timeupdate")}function S(e){c.seeking=!0,r.dispatchEvent("seeking")}function x(){c.ended=!1,c.seeking=!1,r.dispatchEvent("timeupdate"),r.dispatchEvent("seeked"),r.dispatchEvent("canplay"),r.dispatchEvent("canplaythrough")}function T(){c.paused===1?(c.paused=!1,r.dispatchEvent("play"),r.dispatchEvent("playing")):(c.ended&&(w(0),c.ended=!1),c.paused&&(c.paused=!1,c.loop||r.dispatchEvent("play"),r.dispatchEvent("playing"))),p=setInterval(E,r._util.TIMEUPDATE_MS)}function N(){c.paused=!0,clearInterval(p),r.dispatchEvent("pause")}function C(){c.loop?(w(0),r.play()):(c.ended=!0,N(),r.dispatchEvent("timeupdate"),r.dispatchEvent("ended"))}function k(e){c.volume=e,r.dispatchEvent("volumechange")}function L(){return c.volume}function A(e){c.muted=e,r.dispatchEvent("volumechange")}function O(){return c.muted}var r=this,u=typeof n=="string"?t.querySelector(n):n,a=t.createElement("div"),f=!1,l,c={src:i,networkState:r.NETWORK_EMPTY,readyState:r.HAVE_NOTHING,autoplay:i,preload:i,controls:i,loop:!1,poster:i,volume:1,muted:!1,width:u.width|0?u.width:r._util.MIN_WIDTH,height:u.height|0?u.height:r._util.MIN_HEIGHT,seeking:!1,ended:!1,paused:1,error:null},h=[],p;r._eventNamespace=e.guid("HTMLNullVideoElement::"),r.parentNode=u,r._util.type="NullVideo",r.play=function(){if(!f){d(function(){r.play()});return}l.play(),c.paused&&T()},r.pause=function(){if(!f){d(function(){r.pause()});return}l.pause(),c.paused||N()},Object.defineProperties(r,{src:{get:function(){return c.src},set:function(e){e&&e!==c.src&&y(e)}},autoplay:{get:function(){return c.autoplay},set:function(e){c.autoplay=r._util.isAttributeSet(e)}},loop:{get:function(){return c.loop},set:function(e){c.loop=r._util.isAttributeSet(e)}},width:{get:function(){return a.width},set:function(e){a.width=e,c.width=a.width}},height:{get:function(){return a.height},set:function(e){a.height=e,c.height=a.height}},currentTime:{get:function(){return b()},set:function(e){w(e)}},duration:{get:function(){return m()}},ended:{get:function(){return c.ended}},paused:{get:function(){return c.paused}},seeking:{get:function(){return c.seeking}},readyState:{get:function(){return c.readyState}},networkState:{get:function(){return c.networkState}},volume:{get:function(){return L()},set:function(e){if(e<0||e>1)throw"Volume value must be between 0.0 and 1.0";k(e)}},muted:{get:function(){return O()},set:function(e){A(r._util.isAttributeSet(e))}},playbackRate:{get:function(){return l.playbackRate},set:function(e){l.playbackRate=e,r.dispatchEvent("ratechange")}},error:{get:function(){return c.error}}})}var n=16,r=n/1e3,i="",s=/#t=(\d+\.?\d*)?,?(\d+\.?\d*)/;o.prototype={play:function(){var e=this;this.paused&&(this.paused=!1,this.startTime=Date.now(),this.playInterval=setInterval(function(){u(e)},n))},pause:function(){this.paused||(this.paused=!0,clearInterval(this.playInterval))},seekTo:function(e){e=e<0?0:e,e=e>this.duration?this.duration:e,this.currentTime=e}},a.prototype=new e._MediaElementProto,a.prototype.constructor=a,a.prototype._canPlaySrc=function(e){return s.test(e)?"probably":i},a.prototype.canPlayType=function(e){return e==="video/x-nullvideo"?"probably":i},e.HTMLNullVideoElement=function(e){return new a(e)},e.HTMLNullVideoElement._canPlaySrc=a.prototype._canPlaySrc}(Popcorn,document),define("popcorn.HTMLNullVideoElement",function(){}),function(e,t,n){function u(){i=!0;var e=o.length;while(e--)o[e](),delete o[e]}function a(){t.jwplayer?u():setTimeout(a,100)}function f(){if(!s){if(!t.jwplayer){var e=n.createElement("script"),r=t.location.protocol==="file:"?"http:":"";e.src=r+"//jwpsrv.com/library/zaIF4JI9EeK2FSIACpYGxA.js";var o=n.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}s=!0,a()}return i}function l(e){o.unshift(e)}function c(i){function S(e){g.unshift(e)}function x(){setTimeout(function(){u.duration=v.getDuration(),s.dispatchEvent("durationchange"),u.readyState=s.HAVE_METADATA,s.dispatchEvent("loadedmetadata"),s.dispatchEvent("loadeddata"),u.readyState=s.HAVE_FUTURE_DATA,s.dispatchEvent("canplay"),p=!0;var e=0;while(g.length)g[e](),g.shift();u.readyState=s.HAVE_ENOUGH_DATA,s.dispatchEvent("canplaythrough")},0)}function T(){c?c=!1:E?(E=!1,x()):F()}function N(){w?(w=!1,u.autoplay||!u.paused?(u.paused=!1,S(B),x()):(E=!0,h=!0,v.pause(!0))):h?(h=!1,c=!0,v.pause(!0)):B()}function C(){u.seeking&&H()}function k(){v.onPause(T),v.onTime(function(){!u.ended&&!u.seeking&&(u.currentTime=v.getPosition(),s.dispatchEvent("timeupdate"))}),v.onSeek(C),v.onPlay(function(){u.ended||N()}),v.onBufferChange(j),v.onComplete(I),v.play(!0)}function L(){return v.getDuration()}function A(e){var t={name:"MediaError"};t.message=e.message,t.code=e.code||5,u.error=t,s.dispatchEvent("error")}function O(){if(!a||!v)return;v.destroy()}function M(e){if(!s._canPlaySrc(e)){u.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED},s.dispatchEvent("error");return}var t=s._util.parseUri(e).queryKey;u.controls=t.controls=t.controls||u.controls,u.src=e;if(!f()){l(function(){M(e)});return}a&&O(),jwplayer(o.id).setup({file:e,width:"100%",height:"100%",controls:u.controls}),v=jwplayer(o.id),v.onReady(k),v.onError(A),jwplayer.utils.log=function(e,t){typeof console!="undefined"&&typeof console.log!="undefined"&&(t?console.log(e,t):console.log(e)),e==="No suitable players found and fallback enabled"&&A({message:e,code:4})},u.networkState=s.NETWORK_LOADING,s.dispatchEvent("loadstart"),s.dispatchEvent("progress")}function _(){return u.currentTime}function D(e){u.currentTime=e;if(!p){S(function(){P(),v.seek(e)});return}P(),v.seek(e)}function P(){u.seeking=!0,u.paused&&(h=!0),s.dispatchEvent("seeking")}function H(){u.ended=!1,u.seeking=!1,s.dispatchEvent("timeupdate"),s.dispatchEvent("seeked"),s.dispatchEvent("canplay"),s.dispatchEvent("canplaythrough")}function B(){u.paused=!1;if(m){m=!1;if(u.loop&&!d||!u.loop)d=!0,s.dispatchEvent("play");s.dispatchEvent("playing")}}function j(){s.dispatchEvent("progress")}function F(){u.paused=!0,m||(m=!0,s.dispatchEvent("pause"))}function I(){u.loop?D(0):(u.ended=!0,F(),s.dispatchEvent("timeupdate"),s.dispatchEvent("ended"))}function q(e){u.volume=e;if(!p){S(function(){q(u.volume)});return}v.setVolume(u.volume*100),s.dispatchEvent("volumechange")}function R(e){u.muted=e;if(!p){S(function(){R(u.muted)});return}v.setMute(e),s.dispatchEvent("volumechange")}function U(){return u.muted}if(!t.postMessage)throw"ERROR: HTMLJWPlayerVideoElement requires window.postMessage";var s=this,o=typeof i=="string"?n.querySelector(i):i,u={src:r,networkState:s.NETWORK_EMPTY,readyState:s.HAVE_NOTHING,seeking:!1,autoplay:r,preload:r,controls:!1,loop:!1,poster:r,volume:1,muted:!1,currentTime:0,duration:NaN,ended:!1,paused:!0,error:null},a=!1,c=!1,h=!1,p=!1,d=!1,v,m=!0,g=[],y=-1,b=0,w=!0,E=!1;s._eventNamespace=e.guid("HTMLJWPlayerVideoElement::"),s.parentNode=o,s._util.type="JWPlayer",s.play=function(){s.dispatchEvent("play"),u.paused=!1;if(!p){S(function(){s.play()});return}u.ended&&(D(0),u.ended=!1),v.play(!0)},s.pause=function(){u.paused=!0;if(!p){S(function(){s.pause()});return}v.pause(!0)},Object.defineProperties(s,{src:{get:function(){return u.src},set:function(e){e&&e!==u.src&&M(e)}},autoplay:{get:function(){return u.autoplay},set:function(e){u.autoplay=s._util.isAttributeSet(e)}},loop:{get:function(){return u.loop},set:function(e){u.loop=s._util.isAttributeSet(e)}},width:{get:function(){return s.parentNode.offsetWidth}},height:{get:function(){return s.parentNode.offsetHeight}},currentTime:{get:function(){return _()},set:function(e){D(e)}},duration:{get:function(){return L()}},ended:{get:function(){return u.ended}},paused:{get:function(){return u.paused}},seeking:{get:function(){return u.seeking}},readyState:{get:function(){return u.readyState}},networkState:{get:function(){return u.networkState}},volume:{get:function(){return u.volume},set:function(e){if(e<0||e>1)throw"Volume value must be between 0.0 and 1.0";q(e)}},muted:{get:function(){return u.muted},set:function(e){R(s._util.isAttributeSet(e))}},error:{get:function(){return u.error}},buffered:{get:function(){var e={start:function(e){if(e===0)return 0;throw"INDEX_SIZE_ERR: DOM Exception 1"},end:function(e){var t;if(e===0)return t=L(),t?t*(v.getBuffer()/100):0;throw"INDEX_SIZE_ERR: DOM Exception 1"}};return Object.defineProperties(e,{length:{get:function(){return 1}}}),e}}})}var r="",i=!1,s=!1,o=[];c.prototype=new e._MediaElementProto,c.prototype.constructor=c,c.prototype._canPlaySrc=function(e){return"probably"},c.prototype.canPlayType=function(e){return"probably"},e.HTMLJWPlayerVideoElement=function(e){return new c(e)},e.HTMLJWPlayerVideoElement._canPlaySrc=c.prototype._canPlaySrc}(Popcorn,window,document),define("popcorn.HTMLJWPlayerVideoElement",function(){}),requirejs.config({paths:{"popcorn.core":"../external/popcorn-js/popcorn","popcorn.ie8":"../external/popcorn-js/ie8/popcorn.ie8","popcorn._MediaElementProto":"../external/popcorn-js/wrappers/common/popcorn._MediaElementProto","popcorn.HTMLMediaElement":"../external/popcorn-js/wrappers/html5/popcorn.HTMLMediaElement","popcorn.HTMLNullVideoElement":"../external/popcorn-js/wrappers/null/popcorn.HTMLNullVideoElement","popcorn.HTMLSoundCloudAudioElement":"../external/popcorn-js/wrappers/soundcloud/popcorn.HTMLSoundCloudAudioElement","popcorn.HTMLVimeoVideoElement":"../external/popcorn-js/wrappers/vimeo/popcorn.HTMLVimeoVideoElement","popcorn.HTMLYouTubeVideoElement":"../external/popcorn-js/wrappers/youtube/popcorn.HTMLYouTubeVideoElement","popcorn.HTMLJWPlayerVideoElement":"../external/popcorn-js/wrappers/jwplayer/popcorn.HTMLJWPlayerVideoElement","popcorn.player":"../external/popcorn-js/modules/player/popcorn.player","popcorn.youtube":"../external/popcorn-js/players/youtube/popcorn.youtube","popcorn.vimeo":"../external/popcorn-js/players/vimeo/popcorn.vimeo","popcorn.soundcloud":"../external/popcorn-js/players/soundcloud/popcorn.soundcloud","popcorn.googlemap":"../templates/assets/plugins/googlemap/popcorn.googlemap","popcorn.image":"../templates/assets/plugins/image/popcorn.image","popcorn.loopPlugin":"../templates/assets/plugins/loopPlugin/popcorn.loopPlugin","popcorn.pausePlugin":"../templates/assets/plugins/pausePlugin/popcorn.pausePlugin","popcorn.popup":"../templates/assets/plugins/popup/popcorn.popup","popcorn.sequencer":"../templates/assets/plugins/sequencer/popcorn.sequencer","popcorn.sketchfab":"../templates/assets/plugins/sketchfab/popcorn.sketchfab","popcorn.skip":"../templates/assets/plugins/skip/popcorn.skip","popcorn.text":"../templates/assets/plugins/text/popcorn.text","popcorn.toc":"../templates/assets/plugins/toc/popcorn.toc","popcorn.chapter":"../templates/assets/plugins/chapter/popcorn.chapter","popcorn.wikipedia":"../templates/assets/plugins/wikipedia/popcorn.wikipedia","popcorn.deprecated":"../src/util/deprecated",text:"../external/require/text",json:"../external/require/json",l10n:"../external/require/l10n","make-api":"../external/make-api","sketchfab-iframe":"../external/sketchfab/sketchfab-iframe","sso-include":"../external/sso-include"},shim:{"popcorn.core":["popcorn.ie8"],"popcorn._MediaElementProto":["popcorn.core"],"popcorn.HTMLMediaElement":["popcorn.core"],"popcorn.HTMLNullVideoElement":["popcorn.core","popcorn._MediaElementProto"],"popcorn.HTMLSoundCloudAudioElement":["popcorn.core","popcorn._MediaElementProto"],"popcorn.HTMLVimeoVideoElement":["popcorn.core","popcorn._MediaElementProto"],"popcorn.HTMLYouTubeVideoElement":["popcorn.core","popcorn._MediaElementProto"],"popcorn.HTMLJWPlayerVideoElement":["popcorn.core","popcorn._MediaElementProto"],"popcorn.player":["popcorn.core"],"popcorn.soundcloud":["popcorn.core","popcorn.player","popcorn.HTMLSoundCloudAudioElement"],"popcorn.vimeo":["popcorn.core","popcorn.player","popcorn.HTMLVimeoVideoElement"],"popcorn.youtube":["popcorn.core","popcorn.player","popcorn.HTMLYouTubeVideoElement"],"popcorn.googlemap":["popcorn.core"],"popcorn.image":["popcorn.core"],"popcorn.loopPlugin":["popcorn.core"],"popcorn.pausePlugin":["popcorn.core"],"popcorn.popup":["popcorn.core"],"popcorn.sequencer":["popcorn.core","popcorn.player"],"popcorn.skip":["popcorn.core"],"popcorn.text":["popcorn.core"],"popcorn.toc":["popcorn.core"],"popcorn.chapter":["popcorn.core"],"popcorn.wikipedia":["popcorn.core"],"popcorn.sketchfab":["popcorn.core","sketchfab-iframe"],"popcorn.deprecated":["popcorn.core"]}}),define("popcorn",["popcorn.soundcloud","popcorn.vimeo","popcorn.youtube","popcorn.googlemap","popcorn.image","popcorn.loopPlugin","popcorn.pausePlugin","popcorn.popup","popcorn.sequencer","popcorn.sketchfab","popcorn.skip","popcorn.text","popcorn.toc","popcorn.chapter","popcorn.wikipedia","popcorn.deprecated","popcorn.HTMLMediaElement","popcorn.HTMLNullVideoElement","popcorn.HTMLSoundCloudAudioElement","popcorn.HTMLVimeoVideoElement","popcorn.HTMLYouTubeVideoElement","popcorn.HTMLJWPlayerVideoElement"],function(){return{}}),define("embed-main",["util/uri","util/lang","ui/widget/controls","ui/widget/textbox","ui/resizeHandler","util/mediatypes","text!layouts/attribution.html","util/accepted-flash","util/accepted-ua","popcorn"],function(e,t,n,r,i,s,o){function v(){function n(){f.currentTime(e),f.off("timeupdate",n)}var e=c.start,t=c.end;c.fullscreen&&f.emit("butter-fullscreen-allowed",p),f.off("load",v),e>0&&e<f.duration()?(f.on("seeked",function r(){f.off("seeked",r),c.autoplay&&f.play()}),f.on("timeupdate",n)):c.autoplay&&f.play(),t>0&&t>e&&t<=f.duration()&&f.cue(t,function(){f.pause(),f.emit("ended")})}var u=t.domFragment(o),a={version:"Butter-Embed-@VERSION@"},f,l=new i,c,h=e.parse(window.location.href).queryKey,p=document.querySelectorAll(".container")[0];c={autohide:h.autohide==="1"?!0:!1,autoplay:h.autoplay==="1"?!0:!1,controls:h.controls==="0"?!1:!0,preload:h.preload!=="none",start:h.start|0,end:h.end|0,fullscreen:h.fullscreen==="0"?!1:function(e){if("fullScreenElement"in e)return!0;var t="khtml o ms webkit moz".split(" "),n=t.length,r;while(n--){r=t[n];if(r+"FullscreenElement"in e)return!0}return!1}(document),loop:h.loop==="1"?!0:!1,branding:h.branding==="0"?!1:!0,showinfo:h.showinfo==="0"?!1:!0},l.resize(),window.addEventListener("resize",l.resize,!1),n.create("controls",{onShareClick:function(){shareClick(f)},onRemixClick:function(){remixClick(f)},onFullscreenClick:function(){fullscreenClick()},init:function(e){function w(){var e=g.querySelectorAll(".current-toc-item");e&&$.each(e,function(){this.classList.remove("current-toc-item")});var t=[];for(var n=0;n<tocItems.length;n++){var r=tocItems[n],i=f.currentTime();i>=r.start&&i<r.end&&(r.link.classList.add("current-toc-item"),t.push(r.link))}}function M(e,t,n,r){var i={};i.start=parseFloat(e),i.end=parseFloat(t),i.h1Count=parseFloat(n),i.titles=r,i.tocBars=[],A.push(i)}function _(){d.classList.toggle("attribution-on"),videoContainer=document.querySelectorAll(".container")[0],videoContainer.classList.toggle("reduced-on")}window.popcornDataFn(),f=Popcorn.byId("Butter-Generated"),e(f),f.controls(!0),c.loop&&f.loop(!0),f.readyState()>=1?v():f.media.addEventListener("canplay",v),c.branding&&(setupClickHandlers(f,c),setupEventHandlers(f,c),r.applyTo(selectId("#share-url"),{readOnly:!0}),r.applyTo(selectId("#share-iframe"),{readOnly:!0}),selectId("#share-iframe").value=buildIFrameHTML(),selectId("#share-url").value=getCanonicalURL());var t=f.data.trackEvents.where({type:"sequencer"}),n=f.data.trackEvents.where({type:"image"}),i=f.data.trackEvents.where({type:"googlemap"}),o=document.querySelector(".attribution-details"),a=document.querySelector(".attribution-media"),l=selectId(".attribution-content"),h=selectId(".attribution-logo"),p=selectId(".attribution-close"),d=selectId(".attribution-info"),m,g,y;a&&o.removeChild(a),m=f.data.running.toc?f.data.running.toc[0].jsonml:null,g=m?JsonML.toHTML(m):document.createElement("ol"),l.appendChild(g);var b=g.querySelectorAll("a");for(var E=0;E<b.length;E++){var S=b[E];S.innerHTML=reconstituteHTML(S.innerHTML);var x=S.getAttribute("data-end"),T=S.getAttribute("data-start"),N=S.getAttribute("data-level"),C=S.getAttribute("data-view-end-time"),k={};k.start=parseFloat(T),k.end=parseFloat(C),k.viewEndTime=parseFloat(C),k.level=parseFloat(N),k.link=S,tocItems.push(k),f.cue(k.start,w),f.cue(k.end,function(){f.paused()&&f.play()}),S.onclick=function(e){e.preventDefault();var t=e.target.getAttribute("data-start");f.paused()?f.pause(t):f.play(t)}}f.data.running.toc?f.data.running.toc[0].tocItems=tocItems:null;var L=[],A=[],O=0;$(g).find("a[data-level='3']").each(function(){L.push(this.getAttribute("data-start"))}),$(g).find("[data-level='1']").each(function(){var e=this,t=[],n={};++O,$(e).parent().children().length==1&&(t.push(e.innerHTML),M(e.getAttribute("data-start"),e.getAttribute("data-view-end-time"),O,t)),$(e).parent().find("[data-level='2']").each(function(){var n=this;$(n).parent().children().length==1&&(t.push(n.innerHTML),M(n.getAttribute("data-start"),n.getAttribute("data-view-end-time"),O,t),t=[]),$(n).parent().find("[data-level='3']").each(function(){var r=this;t.push(e.innerHTML),t.push(n.innerHTML),t.push(r.innerHTML),M(r.getAttribute("data-start"),r.getAttribute("data-view-end-time"),O,t),t=[]})})}),f.data.running.toc?f.data.running.toc[0].tocTooltips=A:null,f.on("updateToc",w),h.addEventListener("click",_,!1);if(t.length){var D=u.querySelector(".attribution-media").cloneNode(!0),P,H,B,j;for(var E=0;E<t.length;E++)H=t[E],P=u.querySelector(".data-container.media").cloneNode(!0),B=H.source[0],j=s.checkUrl(B),j==="YouTube"&&!y&&(y=!0),j==="Archive"&&(B=H.linkback),P.querySelector("span").classList.add(j.toLowerCase()+"-icon"),P.querySelector("a").href=B,P.querySelector("a").innerHTML=H.title,D.appendChild(P)}if(n.length){var F=u.querySelector(".attribution-images").cloneNode(!0),I,q,R="/resources/icons/",U=!1;for(var z=0;z<n.length;z++){q=n[z],I=u.querySelector(".data-container.image").cloneNode(!0);var W=q.photosetId||q.src||"http://www.flickr.com/search/?m=tags&q="+q.tags,X=q.src||q.photosetId||q.tags,V=document.createElement("img");V.classList.add("media-icon"),I.querySelector("a").href=W,I.querySelector("a").innerHTML=X,q.tags&&q.photosetId&&q.src&&(q.tags=q.photosetId=""),q.tags||q.photosetId||s.checkUrl(q.src)==="Flickr"?(U=!0,V.src+=R+"flickr-black.png",I.insertBefore(V,I.firstChild),F.appendChild(I)):q.src.indexOf("giphy")!==-1?(U=!0,V.src+=R+"giphy.png",I.insertBefore(V,I.firstChild),F.appendChild(I)):I=null}U&&o.appendChild(F)}if(i.length){var J=u.querySelector(".attribution-extra").cloneNode(!0);J.querySelector(".data-container").innerHTML=Popcorn.manifest.googlemap.about.attribution,o.appendChild(J)}},preload:c.preload});if(!c.showinfo){var d=document.getElementById("embed-info");d.parentNode.removeChild(d)}window.Butter&&console&&console.warn&&(console.warn("Butter Warning: page already contains Butter, removing."),delete window.Butter),window.Butter=a}),requirejs.config({baseUrl:"/src"}),require(["util/shims","embed-main"]),define("embed-bootstrap",function(){})})();